function mp(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const o=Object.getOwnPropertyDescriptor(s,a);o&&Object.defineProperty(e,a,o.get?o:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();function fp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Jd={exports:{}},Va={},Yd={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bs=Symbol.for("react.element"),pp=Symbol.for("react.portal"),hp=Symbol.for("react.fragment"),xp=Symbol.for("react.strict_mode"),gp=Symbol.for("react.profiler"),yp=Symbol.for("react.provider"),vp=Symbol.for("react.context"),bp=Symbol.for("react.forward_ref"),jp=Symbol.for("react.suspense"),wp=Symbol.for("react.memo"),Np=Symbol.for("react.lazy"),uc=Symbol.iterator;function kp(e){return e===null||typeof e!="object"?null:(e=uc&&e[uc]||e["@@iterator"],typeof e=="function"?e:null)}var Xd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Zd=Object.assign,eu={};function bn(e,t,r){this.props=e,this.context=t,this.refs=eu,this.updater=r||Xd}bn.prototype.isReactComponent={};bn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};bn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function tu(){}tu.prototype=bn.prototype;function ai(e,t,r){this.props=e,this.context=t,this.refs=eu,this.updater=r||Xd}var oi=ai.prototype=new tu;oi.constructor=ai;Zd(oi,bn.prototype);oi.isPureReactComponent=!0;var mc=Array.isArray,ru=Object.prototype.hasOwnProperty,li={current:null},nu={key:!0,ref:!0,__self:!0,__source:!0};function su(e,t,r){var s,a={},o=null,l=null;if(t!=null)for(s in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(o=""+t.key),t)ru.call(t,s)&&!nu.hasOwnProperty(s)&&(a[s]=t[s]);var i=arguments.length-2;if(i===1)a.children=r;else if(1<i){for(var c=Array(i),d=0;d<i;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(s in i=e.defaultProps,i)a[s]===void 0&&(a[s]=i[s]);return{$$typeof:bs,type:e,key:o,ref:l,props:a,_owner:li.current}}function Sp(e,t){return{$$typeof:bs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ii(e){return typeof e=="object"&&e!==null&&e.$$typeof===bs}function Cp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var fc=/\/+/g;function wo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Cp(""+e.key):t.toString(36)}function ea(e,t,r,s,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case bs:case pp:l=!0}}if(l)return l=e,a=a(l),e=s===""?"."+wo(l,0):s,mc(a)?(r="",e!=null&&(r=e.replace(fc,"$&/")+"/"),ea(a,t,r,"",function(d){return d})):a!=null&&(ii(a)&&(a=Sp(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(fc,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=s===""?".":s+":",mc(e))for(var i=0;i<e.length;i++){o=e[i];var c=s+wo(o,i);l+=ea(o,t,r,c,a)}else if(c=kp(e),typeof c=="function")for(e=c.call(e),i=0;!(o=e.next()).done;)o=o.value,c=s+wo(o,i++),l+=ea(o,t,r,c,a);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Ms(e,t,r){if(e==null)return e;var s=[],a=0;return ea(e,s,"","",function(o){return t.call(r,o,a++)}),s}function Ep(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ie={current:null},ta={transition:null},Pp={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:ta,ReactCurrentOwner:li};function au(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:Ms,forEach:function(e,t,r){Ms(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ms(e,function(){t++}),t},toArray:function(e){return Ms(e,function(t){return t})||[]},only:function(e){if(!ii(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};re.Component=bn;re.Fragment=hp;re.Profiler=gp;re.PureComponent=ai;re.StrictMode=xp;re.Suspense=jp;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pp;re.act=au;re.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=Zd({},e.props),a=e.key,o=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,l=li.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)ru.call(t,c)&&!nu.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){i=Array(c);for(var d=0;d<c;d++)i[d]=arguments[d+2];s.children=i}return{$$typeof:bs,type:e.type,key:a,ref:o,props:s,_owner:l}};re.createContext=function(e){return e={$$typeof:vp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:yp,_context:e},e.Consumer=e};re.createElement=su;re.createFactory=function(e){var t=su.bind(null,e);return t.type=e,t};re.createRef=function(){return{current:null}};re.forwardRef=function(e){return{$$typeof:bp,render:e}};re.isValidElement=ii;re.lazy=function(e){return{$$typeof:Np,_payload:{_status:-1,_result:e},_init:Ep}};re.memo=function(e,t){return{$$typeof:wp,type:e,compare:t===void 0?null:t}};re.startTransition=function(e){var t=ta.transition;ta.transition={};try{e()}finally{ta.transition=t}};re.unstable_act=au;re.useCallback=function(e,t){return Ie.current.useCallback(e,t)};re.useContext=function(e){return Ie.current.useContext(e)};re.useDebugValue=function(){};re.useDeferredValue=function(e){return Ie.current.useDeferredValue(e)};re.useEffect=function(e,t){return Ie.current.useEffect(e,t)};re.useId=function(){return Ie.current.useId()};re.useImperativeHandle=function(e,t,r){return Ie.current.useImperativeHandle(e,t,r)};re.useInsertionEffect=function(e,t){return Ie.current.useInsertionEffect(e,t)};re.useLayoutEffect=function(e,t){return Ie.current.useLayoutEffect(e,t)};re.useMemo=function(e,t){return Ie.current.useMemo(e,t)};re.useReducer=function(e,t,r){return Ie.current.useReducer(e,t,r)};re.useRef=function(e){return Ie.current.useRef(e)};re.useState=function(e){return Ie.current.useState(e)};re.useSyncExternalStore=function(e,t,r){return Ie.current.useSyncExternalStore(e,t,r)};re.useTransition=function(){return Ie.current.useTransition()};re.version="18.3.1";Yd.exports=re;var f=Yd.exports;const _p=fp(f),Lp=mp({__proto__:null,default:_p},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rp=f,zp=Symbol.for("react.element"),Tp=Symbol.for("react.fragment"),Fp=Object.prototype.hasOwnProperty,Mp=Rp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ap={key:!0,ref:!0,__self:!0,__source:!0};function ou(e,t,r){var s,a={},o=null,l=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)Fp.call(t,s)&&!Ap.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:zp,type:e,key:o,ref:l,props:a,_owner:Mp.current}}Va.Fragment=Tp;Va.jsx=ou;Va.jsxs=ou;Jd.exports=Va;var n=Jd.exports,lu={exports:{}},rt={},iu={exports:{}},cu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,B){var U=R.length;R.push(B);e:for(;0<U;){var D=U-1>>>1,$=R[D];if(0<a($,B))R[D]=B,R[U]=$,U=D;else break e}}function r(R){return R.length===0?null:R[0]}function s(R){if(R.length===0)return null;var B=R[0],U=R.pop();if(U!==B){R[0]=U;e:for(var D=0,$=R.length,K=$>>>1;D<K;){var G=2*(D+1)-1,Y=R[G],oe=G+1,ie=R[oe];if(0>a(Y,U))oe<$&&0>a(ie,Y)?(R[D]=ie,R[oe]=U,D=oe):(R[D]=Y,R[G]=U,D=G);else if(oe<$&&0>a(ie,U))R[D]=ie,R[oe]=U,D=oe;else break e}}return B}function a(R,B){var U=R.sortIndex-B.sortIndex;return U!==0?U:R.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,i=l.now();e.unstable_now=function(){return l.now()-i}}var c=[],d=[],u=1,m=null,x=3,w=!1,v=!1,b=!1,N=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(R){for(var B=r(d);B!==null;){if(B.callback===null)s(d);else if(B.startTime<=R)s(d),B.sortIndex=B.expirationTime,t(c,B);else break;B=r(d)}}function C(R){if(b=!1,g(R),!v)if(r(c)!==null)v=!0,J(P);else{var B=r(d);B!==null&&T(C,B.startTime-R)}}function P(R,B){v=!1,b&&(b=!1,p(L),L=-1),w=!0;var U=x;try{for(g(B),m=r(c);m!==null&&(!(m.expirationTime>B)||R&&!j());){var D=m.callback;if(typeof D=="function"){m.callback=null,x=m.priorityLevel;var $=D(m.expirationTime<=B);B=e.unstable_now(),typeof $=="function"?m.callback=$:m===r(c)&&s(c),g(B)}else s(c);m=r(c)}if(m!==null)var K=!0;else{var G=r(d);G!==null&&T(C,G.startTime-B),K=!1}return K}finally{m=null,x=U,w=!1}}var y=!1,E=null,L=-1,k=5,S=-1;function j(){return!(e.unstable_now()-S<k)}function z(){if(E!==null){var R=e.unstable_now();S=R;var B=!0;try{B=E(!0,R)}finally{B?V():(y=!1,E=null)}}else y=!1}var V;if(typeof h=="function")V=function(){h(z)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,Q=A.port2;A.port1.onmessage=z,V=function(){Q.postMessage(null)}}else V=function(){N(z,0)};function J(R){E=R,y||(y=!0,V())}function T(R,B){L=N(function(){R(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){v||w||(v=!0,J(P))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(R){switch(x){case 1:case 2:case 3:var B=3;break;default:B=x}var U=x;x=B;try{return R()}finally{x=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,B){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var U=x;x=R;try{return B()}finally{x=U}},e.unstable_scheduleCallback=function(R,B,U){var D=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?D+U:D):U=D,R){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=U+$,R={id:u++,callback:B,priorityLevel:R,startTime:U,expirationTime:$,sortIndex:-1},U>D?(R.sortIndex=U,t(d,R),r(c)===null&&R===r(d)&&(b?(p(L),L=-1):b=!0,T(C,U-D))):(R.sortIndex=$,t(c,R),v||w||(v=!0,J(P))),R},e.unstable_shouldYield=j,e.unstable_wrapCallback=function(R){var B=x;return function(){var U=x;x=B;try{return R.apply(this,arguments)}finally{x=U}}}})(cu);iu.exports=cu;var Op=iu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $p=f,tt=Op;function O(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var du=new Set,es={};function Dr(e,t){fn(e,t),fn(e+"Capture",t)}function fn(e,t){for(es[e]=t,e=0;e<t.length;e++)du.add(t[e])}var Ot=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zo=Object.prototype.hasOwnProperty,Dp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pc={},hc={};function Ip(e){return Zo.call(hc,e)?!0:Zo.call(pc,e)?!1:Dp.test(e)?hc[e]=!0:(pc[e]=!0,!1)}function Up(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Bp(e,t,r,s){if(t===null||typeof t>"u"||Up(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ue(e,t,r,s,a,o,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=l}var _e={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){_e[e]=new Ue(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];_e[t]=new Ue(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){_e[e]=new Ue(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){_e[e]=new Ue(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){_e[e]=new Ue(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){_e[e]=new Ue(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){_e[e]=new Ue(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){_e[e]=new Ue(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){_e[e]=new Ue(e,5,!1,e.toLowerCase(),null,!1,!1)});var ci=/[\-:]([a-z])/g;function di(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ci,di);_e[t]=new Ue(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ci,di);_e[t]=new Ue(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ci,di);_e[t]=new Ue(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){_e[e]=new Ue(e,1,!1,e.toLowerCase(),null,!1,!1)});_e.xlinkHref=new Ue("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){_e[e]=new Ue(e,1,!1,e.toLowerCase(),null,!0,!0)});function ui(e,t,r,s){var a=_e.hasOwnProperty(t)?_e[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Bp(t,r,a,s)&&(r=null),s||a===null?Ip(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var Bt=$p.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,As=Symbol.for("react.element"),qr=Symbol.for("react.portal"),Qr=Symbol.for("react.fragment"),mi=Symbol.for("react.strict_mode"),el=Symbol.for("react.profiler"),uu=Symbol.for("react.provider"),mu=Symbol.for("react.context"),fi=Symbol.for("react.forward_ref"),tl=Symbol.for("react.suspense"),rl=Symbol.for("react.suspense_list"),pi=Symbol.for("react.memo"),Qt=Symbol.for("react.lazy"),fu=Symbol.for("react.offscreen"),xc=Symbol.iterator;function _n(e){return e===null||typeof e!="object"?null:(e=xc&&e[xc]||e["@@iterator"],typeof e=="function"?e:null)}var he=Object.assign,No;function $n(e){if(No===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);No=t&&t[1]||""}return`
`+No+e}var ko=!1;function So(e,t){if(!e||ko)return"";ko=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),o=s.stack.split(`
`),l=a.length-1,i=o.length-1;1<=l&&0<=i&&a[l]!==o[i];)i--;for(;1<=l&&0<=i;l--,i--)if(a[l]!==o[i]){if(l!==1||i!==1)do if(l--,i--,0>i||a[l]!==o[i]){var c=`
`+a[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=i);break}}}finally{ko=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?$n(e):""}function Hp(e){switch(e.tag){case 5:return $n(e.type);case 16:return $n("Lazy");case 13:return $n("Suspense");case 19:return $n("SuspenseList");case 0:case 2:case 15:return e=So(e.type,!1),e;case 11:return e=So(e.type.render,!1),e;case 1:return e=So(e.type,!0),e;default:return""}}function nl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Qr:return"Fragment";case qr:return"Portal";case el:return"Profiler";case mi:return"StrictMode";case tl:return"Suspense";case rl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case mu:return(e.displayName||"Context")+".Consumer";case uu:return(e._context.displayName||"Context")+".Provider";case fi:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pi:return t=e.displayName||null,t!==null?t:nl(e.type)||"Memo";case Qt:t=e._payload,e=e._init;try{return nl(e(t))}catch{}}return null}function Vp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return nl(t);case 8:return t===mi?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function mr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function pu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Wp(e){var t=pu(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){s=""+l,o.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Os(e){e._valueTracker||(e._valueTracker=Wp(e))}function hu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=pu(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function xa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function sl(e,t){var r=t.checked;return he({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function gc(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=mr(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function xu(e,t){t=t.checked,t!=null&&ui(e,"checked",t,!1)}function al(e,t){xu(e,t);var r=mr(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ol(e,t.type,r):t.hasOwnProperty("defaultValue")&&ol(e,t.type,mr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function yc(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function ol(e,t,r){(t!=="number"||xa(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Dn=Array.isArray;function an(e,t,r,s){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=""+mr(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function ll(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(O(91));return he({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function vc(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(O(92));if(Dn(r)){if(1<r.length)throw Error(O(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:mr(r)}}function gu(e,t){var r=mr(t.value),s=mr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function bc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function yu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function il(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?yu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $s,vu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($s=$s||document.createElement("div"),$s.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$s.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ts(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Vn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qp=["Webkit","ms","Moz","O"];Object.keys(Vn).forEach(function(e){qp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Vn[t]=Vn[e]})});function bu(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Vn.hasOwnProperty(e)&&Vn[e]?(""+t).trim():t+"px"}function ju(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=bu(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,a):e[r]=a}}var Qp=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cl(e,t){if(t){if(Qp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(O(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(O(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(O(61))}if(t.style!=null&&typeof t.style!="object")throw Error(O(62))}}function dl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ul=null;function hi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ml=null,on=null,ln=null;function jc(e){if(e=Ns(e)){if(typeof ml!="function")throw Error(O(280));var t=e.stateNode;t&&(t=Ka(t),ml(e.stateNode,e.type,t))}}function wu(e){on?ln?ln.push(e):ln=[e]:on=e}function Nu(){if(on){var e=on,t=ln;if(ln=on=null,jc(e),t)for(e=0;e<t.length;e++)jc(t[e])}}function ku(e,t){return e(t)}function Su(){}var Co=!1;function Cu(e,t,r){if(Co)return e(t,r);Co=!0;try{return ku(e,t,r)}finally{Co=!1,(on!==null||ln!==null)&&(Su(),Nu())}}function rs(e,t){var r=e.stateNode;if(r===null)return null;var s=Ka(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(O(231,t,typeof r));return r}var fl=!1;if(Ot)try{var Ln={};Object.defineProperty(Ln,"passive",{get:function(){fl=!0}}),window.addEventListener("test",Ln,Ln),window.removeEventListener("test",Ln,Ln)}catch{fl=!1}function Gp(e,t,r,s,a,o,l,i,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var Wn=!1,ga=null,ya=!1,pl=null,Kp={onError:function(e){Wn=!0,ga=e}};function Jp(e,t,r,s,a,o,l,i,c){Wn=!1,ga=null,Gp.apply(Kp,arguments)}function Yp(e,t,r,s,a,o,l,i,c){if(Jp.apply(this,arguments),Wn){if(Wn){var d=ga;Wn=!1,ga=null}else throw Error(O(198));ya||(ya=!0,pl=d)}}function Ir(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Eu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wc(e){if(Ir(e)!==e)throw Error(O(188))}function Xp(e){var t=e.alternate;if(!t){if(t=Ir(e),t===null)throw Error(O(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(a===null)break;var o=a.alternate;if(o===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===r)return wc(a),e;if(o===s)return wc(a),t;o=o.sibling}throw Error(O(188))}if(r.return!==s.return)r=a,s=o;else{for(var l=!1,i=a.child;i;){if(i===r){l=!0,r=a,s=o;break}if(i===s){l=!0,s=a,r=o;break}i=i.sibling}if(!l){for(i=o.child;i;){if(i===r){l=!0,r=o,s=a;break}if(i===s){l=!0,s=o,r=a;break}i=i.sibling}if(!l)throw Error(O(189))}}if(r.alternate!==s)throw Error(O(190))}if(r.tag!==3)throw Error(O(188));return r.stateNode.current===r?e:t}function Pu(e){return e=Xp(e),e!==null?_u(e):null}function _u(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=_u(e);if(t!==null)return t;e=e.sibling}return null}var Lu=tt.unstable_scheduleCallback,Nc=tt.unstable_cancelCallback,Zp=tt.unstable_shouldYield,eh=tt.unstable_requestPaint,ye=tt.unstable_now,th=tt.unstable_getCurrentPriorityLevel,xi=tt.unstable_ImmediatePriority,Ru=tt.unstable_UserBlockingPriority,va=tt.unstable_NormalPriority,rh=tt.unstable_LowPriority,zu=tt.unstable_IdlePriority,Wa=null,St=null;function nh(e){if(St&&typeof St.onCommitFiberRoot=="function")try{St.onCommitFiberRoot(Wa,e,void 0,(e.current.flags&128)===128)}catch{}}var ht=Math.clz32?Math.clz32:oh,sh=Math.log,ah=Math.LN2;function oh(e){return e>>>=0,e===0?32:31-(sh(e)/ah|0)|0}var Ds=64,Is=4194304;function In(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ba(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,o=e.pingedLanes,l=r&268435455;if(l!==0){var i=l&~a;i!==0?s=In(i):(o&=l,o!==0&&(s=In(o)))}else l=r&~a,l!==0?s=In(l):o!==0&&(s=In(o));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,o=t&-t,a>=o||a===16&&(o&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-ht(t),a=1<<r,s|=e[r],t&=~a;return s}function lh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ih(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-ht(o),i=1<<l,c=a[l];c===-1?(!(i&r)||i&s)&&(a[l]=lh(i,t)):c<=t&&(e.expiredLanes|=i),o&=~i}}function hl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Tu(){var e=Ds;return Ds<<=1,!(Ds&4194240)&&(Ds=64),e}function Eo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function js(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ht(t),e[t]=r}function ch(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-ht(r),o=1<<a;t[a]=0,s[a]=-1,e[a]=-1,r&=~o}}function gi(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-ht(r),a=1<<s;a&t|e[s]&t&&(e[s]|=t),r&=~a}}var ae=0;function Fu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Mu,yi,Au,Ou,$u,xl=!1,Us=[],rr=null,nr=null,sr=null,ns=new Map,ss=new Map,Kt=[],dh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kc(e,t){switch(e){case"focusin":case"focusout":rr=null;break;case"dragenter":case"dragleave":nr=null;break;case"mouseover":case"mouseout":sr=null;break;case"pointerover":case"pointerout":ns.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ss.delete(t.pointerId)}}function Rn(e,t,r,s,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:o,targetContainers:[a]},t!==null&&(t=Ns(t),t!==null&&yi(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function uh(e,t,r,s,a){switch(t){case"focusin":return rr=Rn(rr,e,t,r,s,a),!0;case"dragenter":return nr=Rn(nr,e,t,r,s,a),!0;case"mouseover":return sr=Rn(sr,e,t,r,s,a),!0;case"pointerover":var o=a.pointerId;return ns.set(o,Rn(ns.get(o)||null,e,t,r,s,a)),!0;case"gotpointercapture":return o=a.pointerId,ss.set(o,Rn(ss.get(o)||null,e,t,r,s,a)),!0}return!1}function Du(e){var t=kr(e.target);if(t!==null){var r=Ir(t);if(r!==null){if(t=r.tag,t===13){if(t=Eu(r),t!==null){e.blockedOn=t,$u(e.priority,function(){Au(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ra(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=gl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);ul=s,r.target.dispatchEvent(s),ul=null}else return t=Ns(r),t!==null&&yi(t),e.blockedOn=r,!1;t.shift()}return!0}function Sc(e,t,r){ra(e)&&r.delete(t)}function mh(){xl=!1,rr!==null&&ra(rr)&&(rr=null),nr!==null&&ra(nr)&&(nr=null),sr!==null&&ra(sr)&&(sr=null),ns.forEach(Sc),ss.forEach(Sc)}function zn(e,t){e.blockedOn===t&&(e.blockedOn=null,xl||(xl=!0,tt.unstable_scheduleCallback(tt.unstable_NormalPriority,mh)))}function as(e){function t(a){return zn(a,e)}if(0<Us.length){zn(Us[0],e);for(var r=1;r<Us.length;r++){var s=Us[r];s.blockedOn===e&&(s.blockedOn=null)}}for(rr!==null&&zn(rr,e),nr!==null&&zn(nr,e),sr!==null&&zn(sr,e),ns.forEach(t),ss.forEach(t),r=0;r<Kt.length;r++)s=Kt[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Kt.length&&(r=Kt[0],r.blockedOn===null);)Du(r),r.blockedOn===null&&Kt.shift()}var cn=Bt.ReactCurrentBatchConfig,ja=!0;function fh(e,t,r,s){var a=ae,o=cn.transition;cn.transition=null;try{ae=1,vi(e,t,r,s)}finally{ae=a,cn.transition=o}}function ph(e,t,r,s){var a=ae,o=cn.transition;cn.transition=null;try{ae=4,vi(e,t,r,s)}finally{ae=a,cn.transition=o}}function vi(e,t,r,s){if(ja){var a=gl(e,t,r,s);if(a===null)Oo(e,t,s,wa,r),kc(e,s);else if(uh(a,e,t,r,s))s.stopPropagation();else if(kc(e,s),t&4&&-1<dh.indexOf(e)){for(;a!==null;){var o=Ns(a);if(o!==null&&Mu(o),o=gl(e,t,r,s),o===null&&Oo(e,t,s,wa,r),o===a)break;a=o}a!==null&&s.stopPropagation()}else Oo(e,t,s,null,r)}}var wa=null;function gl(e,t,r,s){if(wa=null,e=hi(s),e=kr(e),e!==null)if(t=Ir(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Eu(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return wa=e,null}function Iu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(th()){case xi:return 1;case Ru:return 4;case va:case rh:return 16;case zu:return 536870912;default:return 16}default:return 16}}var Xt=null,bi=null,na=null;function Uu(){if(na)return na;var e,t=bi,r=t.length,s,a="value"in Xt?Xt.value:Xt.textContent,o=a.length;for(e=0;e<r&&t[e]===a[e];e++);var l=r-e;for(s=1;s<=l&&t[r-s]===a[o-s];s++);return na=a.slice(e,1<s?1-s:void 0)}function sa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Bs(){return!0}function Cc(){return!1}function nt(e){function t(r,s,a,o,l){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(r=e[i],this[i]=r?r(o):o[i]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Bs:Cc,this.isPropagationStopped=Cc,this}return he(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Bs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Bs)},persist:function(){},isPersistent:Bs}),t}var jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ji=nt(jn),ws=he({},jn,{view:0,detail:0}),hh=nt(ws),Po,_o,Tn,qa=he({},ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Tn&&(Tn&&e.type==="mousemove"?(Po=e.screenX-Tn.screenX,_o=e.screenY-Tn.screenY):_o=Po=0,Tn=e),Po)},movementY:function(e){return"movementY"in e?e.movementY:_o}}),Ec=nt(qa),xh=he({},qa,{dataTransfer:0}),gh=nt(xh),yh=he({},ws,{relatedTarget:0}),Lo=nt(yh),vh=he({},jn,{animationName:0,elapsedTime:0,pseudoElement:0}),bh=nt(vh),jh=he({},jn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wh=nt(jh),Nh=he({},jn,{data:0}),Pc=nt(Nh),kh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ch={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ch[e])?!!t[e]:!1}function wi(){return Eh}var Ph=he({},ws,{key:function(e){if(e.key){var t=kh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=sa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Sh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wi,charCode:function(e){return e.type==="keypress"?sa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?sa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_h=nt(Ph),Lh=he({},qa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_c=nt(Lh),Rh=he({},ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wi}),zh=nt(Rh),Th=he({},jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fh=nt(Th),Mh=he({},qa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ah=nt(Mh),Oh=[9,13,27,32],Ni=Ot&&"CompositionEvent"in window,qn=null;Ot&&"documentMode"in document&&(qn=document.documentMode);var $h=Ot&&"TextEvent"in window&&!qn,Bu=Ot&&(!Ni||qn&&8<qn&&11>=qn),Lc=" ",Rc=!1;function Hu(e,t){switch(e){case"keyup":return Oh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gr=!1;function Dh(e,t){switch(e){case"compositionend":return Vu(t);case"keypress":return t.which!==32?null:(Rc=!0,Lc);case"textInput":return e=t.data,e===Lc&&Rc?null:e;default:return null}}function Ih(e,t){if(Gr)return e==="compositionend"||!Ni&&Hu(e,t)?(e=Uu(),na=bi=Xt=null,Gr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bu&&t.locale!=="ko"?null:t.data;default:return null}}var Uh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Uh[e.type]:t==="textarea"}function Wu(e,t,r,s){wu(s),t=Na(t,"onChange"),0<t.length&&(r=new ji("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Qn=null,os=null;function Bh(e){rm(e,0)}function Qa(e){var t=Yr(e);if(hu(t))return e}function Hh(e,t){if(e==="change")return t}var qu=!1;if(Ot){var Ro;if(Ot){var zo="oninput"in document;if(!zo){var Tc=document.createElement("div");Tc.setAttribute("oninput","return;"),zo=typeof Tc.oninput=="function"}Ro=zo}else Ro=!1;qu=Ro&&(!document.documentMode||9<document.documentMode)}function Fc(){Qn&&(Qn.detachEvent("onpropertychange",Qu),os=Qn=null)}function Qu(e){if(e.propertyName==="value"&&Qa(os)){var t=[];Wu(t,os,e,hi(e)),Cu(Bh,t)}}function Vh(e,t,r){e==="focusin"?(Fc(),Qn=t,os=r,Qn.attachEvent("onpropertychange",Qu)):e==="focusout"&&Fc()}function Wh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Qa(os)}function qh(e,t){if(e==="click")return Qa(t)}function Qh(e,t){if(e==="input"||e==="change")return Qa(t)}function Gh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var gt=typeof Object.is=="function"?Object.is:Gh;function ls(e,t){if(gt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!Zo.call(t,a)||!gt(e[a],t[a]))return!1}return!0}function Mc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ac(e,t){var r=Mc(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Mc(r)}}function Gu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Gu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ku(){for(var e=window,t=xa();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=xa(e.document)}return t}function ki(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Kh(e){var t=Ku(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Gu(r.ownerDocument.documentElement,r)){if(s!==null&&ki(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,o=Math.min(s.start,a);s=s.end===void 0?o:Math.min(s.end,a),!e.extend&&o>s&&(a=s,s=o,o=a),a=Ac(r,o);var l=Ac(r,s);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),o>s?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Jh=Ot&&"documentMode"in document&&11>=document.documentMode,Kr=null,yl=null,Gn=null,vl=!1;function Oc(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;vl||Kr==null||Kr!==xa(s)||(s=Kr,"selectionStart"in s&&ki(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Gn&&ls(Gn,s)||(Gn=s,s=Na(yl,"onSelect"),0<s.length&&(t=new ji("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Kr)))}function Hs(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Jr={animationend:Hs("Animation","AnimationEnd"),animationiteration:Hs("Animation","AnimationIteration"),animationstart:Hs("Animation","AnimationStart"),transitionend:Hs("Transition","TransitionEnd")},To={},Ju={};Ot&&(Ju=document.createElement("div").style,"AnimationEvent"in window||(delete Jr.animationend.animation,delete Jr.animationiteration.animation,delete Jr.animationstart.animation),"TransitionEvent"in window||delete Jr.transitionend.transition);function Ga(e){if(To[e])return To[e];if(!Jr[e])return e;var t=Jr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Ju)return To[e]=t[r];return e}var Yu=Ga("animationend"),Xu=Ga("animationiteration"),Zu=Ga("animationstart"),em=Ga("transitionend"),tm=new Map,$c="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hr(e,t){tm.set(e,t),Dr(t,[e])}for(var Fo=0;Fo<$c.length;Fo++){var Mo=$c[Fo],Yh=Mo.toLowerCase(),Xh=Mo[0].toUpperCase()+Mo.slice(1);hr(Yh,"on"+Xh)}hr(Yu,"onAnimationEnd");hr(Xu,"onAnimationIteration");hr(Zu,"onAnimationStart");hr("dblclick","onDoubleClick");hr("focusin","onFocus");hr("focusout","onBlur");hr(em,"onTransitionEnd");fn("onMouseEnter",["mouseout","mouseover"]);fn("onMouseLeave",["mouseout","mouseover"]);fn("onPointerEnter",["pointerout","pointerover"]);fn("onPointerLeave",["pointerout","pointerover"]);Dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Un="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Un));function Dc(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,Yp(s,t,void 0,e),e.currentTarget=null}function rm(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var l=s.length-1;0<=l;l--){var i=s[l],c=i.instance,d=i.currentTarget;if(i=i.listener,c!==o&&a.isPropagationStopped())break e;Dc(a,i,d),o=c}else for(l=0;l<s.length;l++){if(i=s[l],c=i.instance,d=i.currentTarget,i=i.listener,c!==o&&a.isPropagationStopped())break e;Dc(a,i,d),o=c}}}if(ya)throw e=pl,ya=!1,pl=null,e}function de(e,t){var r=t[kl];r===void 0&&(r=t[kl]=new Set);var s=e+"__bubble";r.has(s)||(nm(t,e,2,!1),r.add(s))}function Ao(e,t,r){var s=0;t&&(s|=4),nm(r,e,s,t)}var Vs="_reactListening"+Math.random().toString(36).slice(2);function is(e){if(!e[Vs]){e[Vs]=!0,du.forEach(function(r){r!=="selectionchange"&&(Zh.has(r)||Ao(r,!1,e),Ao(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Vs]||(t[Vs]=!0,Ao("selectionchange",!1,t))}}function nm(e,t,r,s){switch(Iu(t)){case 1:var a=fh;break;case 4:a=ph;break;default:a=vi}r=a.bind(null,t,r,e),a=void 0,!fl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Oo(e,t,r,s,a){var o=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var i=s.stateNode.containerInfo;if(i===a||i.nodeType===8&&i.parentNode===a)break;if(l===4)for(l=s.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;l=l.return}for(;i!==null;){if(l=kr(i),l===null)return;if(c=l.tag,c===5||c===6){s=o=l;continue e}i=i.parentNode}}s=s.return}Cu(function(){var d=o,u=hi(r),m=[];e:{var x=tm.get(e);if(x!==void 0){var w=ji,v=e;switch(e){case"keypress":if(sa(r)===0)break e;case"keydown":case"keyup":w=_h;break;case"focusin":v="focus",w=Lo;break;case"focusout":v="blur",w=Lo;break;case"beforeblur":case"afterblur":w=Lo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Ec;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=gh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=zh;break;case Yu:case Xu:case Zu:w=bh;break;case em:w=Fh;break;case"scroll":w=hh;break;case"wheel":w=Ah;break;case"copy":case"cut":case"paste":w=wh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=_c}var b=(t&4)!==0,N=!b&&e==="scroll",p=b?x!==null?x+"Capture":null:x;b=[];for(var h=d,g;h!==null;){g=h;var C=g.stateNode;if(g.tag===5&&C!==null&&(g=C,p!==null&&(C=rs(h,p),C!=null&&b.push(cs(h,C,g)))),N)break;h=h.return}0<b.length&&(x=new w(x,v,null,r,u),m.push({event:x,listeners:b}))}}if(!(t&7)){e:{if(x=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",x&&r!==ul&&(v=r.relatedTarget||r.fromElement)&&(kr(v)||v[$t]))break e;if((w||x)&&(x=u.window===u?u:(x=u.ownerDocument)?x.defaultView||x.parentWindow:window,w?(v=r.relatedTarget||r.toElement,w=d,v=v?kr(v):null,v!==null&&(N=Ir(v),v!==N||v.tag!==5&&v.tag!==6)&&(v=null)):(w=null,v=d),w!==v)){if(b=Ec,C="onMouseLeave",p="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(b=_c,C="onPointerLeave",p="onPointerEnter",h="pointer"),N=w==null?x:Yr(w),g=v==null?x:Yr(v),x=new b(C,h+"leave",w,r,u),x.target=N,x.relatedTarget=g,C=null,kr(u)===d&&(b=new b(p,h+"enter",v,r,u),b.target=g,b.relatedTarget=N,C=b),N=C,w&&v)t:{for(b=w,p=v,h=0,g=b;g;g=Wr(g))h++;for(g=0,C=p;C;C=Wr(C))g++;for(;0<h-g;)b=Wr(b),h--;for(;0<g-h;)p=Wr(p),g--;for(;h--;){if(b===p||p!==null&&b===p.alternate)break t;b=Wr(b),p=Wr(p)}b=null}else b=null;w!==null&&Ic(m,x,w,b,!1),v!==null&&N!==null&&Ic(m,N,v,b,!0)}}e:{if(x=d?Yr(d):window,w=x.nodeName&&x.nodeName.toLowerCase(),w==="select"||w==="input"&&x.type==="file")var P=Hh;else if(zc(x))if(qu)P=Qh;else{P=Wh;var y=Vh}else(w=x.nodeName)&&w.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(P=qh);if(P&&(P=P(e,d))){Wu(m,P,r,u);break e}y&&y(e,x,d),e==="focusout"&&(y=x._wrapperState)&&y.controlled&&x.type==="number"&&ol(x,"number",x.value)}switch(y=d?Yr(d):window,e){case"focusin":(zc(y)||y.contentEditable==="true")&&(Kr=y,yl=d,Gn=null);break;case"focusout":Gn=yl=Kr=null;break;case"mousedown":vl=!0;break;case"contextmenu":case"mouseup":case"dragend":vl=!1,Oc(m,r,u);break;case"selectionchange":if(Jh)break;case"keydown":case"keyup":Oc(m,r,u)}var E;if(Ni)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Gr?Hu(e,r)&&(L="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(L="onCompositionStart");L&&(Bu&&r.locale!=="ko"&&(Gr||L!=="onCompositionStart"?L==="onCompositionEnd"&&Gr&&(E=Uu()):(Xt=u,bi="value"in Xt?Xt.value:Xt.textContent,Gr=!0)),y=Na(d,L),0<y.length&&(L=new Pc(L,e,null,r,u),m.push({event:L,listeners:y}),E?L.data=E:(E=Vu(r),E!==null&&(L.data=E)))),(E=$h?Dh(e,r):Ih(e,r))&&(d=Na(d,"onBeforeInput"),0<d.length&&(u=new Pc("onBeforeInput","beforeinput",null,r,u),m.push({event:u,listeners:d}),u.data=E))}rm(m,t)})}function cs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Na(e,t){for(var r=t+"Capture",s=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=rs(e,r),o!=null&&s.unshift(cs(e,o,a)),o=rs(e,t),o!=null&&s.push(cs(e,o,a))),e=e.return}return s}function Wr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ic(e,t,r,s,a){for(var o=t._reactName,l=[];r!==null&&r!==s;){var i=r,c=i.alternate,d=i.stateNode;if(c!==null&&c===s)break;i.tag===5&&d!==null&&(i=d,a?(c=rs(r,o),c!=null&&l.unshift(cs(r,c,i))):a||(c=rs(r,o),c!=null&&l.push(cs(r,c,i)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var e0=/\r\n?/g,t0=/\u0000|\uFFFD/g;function Uc(e){return(typeof e=="string"?e:""+e).replace(e0,`
`).replace(t0,"")}function Ws(e,t,r){if(t=Uc(t),Uc(e)!==t&&r)throw Error(O(425))}function ka(){}var bl=null,jl=null;function wl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Nl=typeof setTimeout=="function"?setTimeout:void 0,r0=typeof clearTimeout=="function"?clearTimeout:void 0,Bc=typeof Promise=="function"?Promise:void 0,n0=typeof queueMicrotask=="function"?queueMicrotask:typeof Bc<"u"?function(e){return Bc.resolve(null).then(e).catch(s0)}:Nl;function s0(e){setTimeout(function(){throw e})}function $o(e,t){var r=t,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){e.removeChild(a),as(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);as(t)}function ar(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Hc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var wn=Math.random().toString(36).slice(2),Nt="__reactFiber$"+wn,ds="__reactProps$"+wn,$t="__reactContainer$"+wn,kl="__reactEvents$"+wn,a0="__reactListeners$"+wn,o0="__reactHandles$"+wn;function kr(e){var t=e[Nt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[$t]||r[Nt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Hc(e);e!==null;){if(r=e[Nt])return r;e=Hc(e)}return t}e=r,r=e.parentNode}return null}function Ns(e){return e=e[Nt]||e[$t],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Yr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(O(33))}function Ka(e){return e[ds]||null}var Sl=[],Xr=-1;function xr(e){return{current:e}}function ue(e){0>Xr||(e.current=Sl[Xr],Sl[Xr]=null,Xr--)}function ce(e,t){Xr++,Sl[Xr]=e.current,e.current=t}var fr={},Me=xr(fr),We=xr(!1),zr=fr;function pn(e,t){var r=e.type.contextTypes;if(!r)return fr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in r)a[o]=t[o];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function qe(e){return e=e.childContextTypes,e!=null}function Sa(){ue(We),ue(Me)}function Vc(e,t,r){if(Me.current!==fr)throw Error(O(168));ce(Me,t),ce(We,r)}function sm(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(O(108,Vp(e)||"Unknown",a));return he({},r,s)}function Ca(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fr,zr=Me.current,ce(Me,e),ce(We,We.current),!0}function Wc(e,t,r){var s=e.stateNode;if(!s)throw Error(O(169));r?(e=sm(e,t,zr),s.__reactInternalMemoizedMergedChildContext=e,ue(We),ue(Me),ce(Me,e)):ue(We),ce(We,r)}var zt=null,Ja=!1,Do=!1;function am(e){zt===null?zt=[e]:zt.push(e)}function l0(e){Ja=!0,am(e)}function gr(){if(!Do&&zt!==null){Do=!0;var e=0,t=ae;try{var r=zt;for(ae=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}zt=null,Ja=!1}catch(a){throw zt!==null&&(zt=zt.slice(e+1)),Lu(xi,gr),a}finally{ae=t,Do=!1}}return null}var Zr=[],en=0,Ea=null,Pa=0,st=[],at=0,Tr=null,Ft=1,Mt="";function wr(e,t){Zr[en++]=Pa,Zr[en++]=Ea,Ea=e,Pa=t}function om(e,t,r){st[at++]=Ft,st[at++]=Mt,st[at++]=Tr,Tr=e;var s=Ft;e=Mt;var a=32-ht(s)-1;s&=~(1<<a),r+=1;var o=32-ht(t)+a;if(30<o){var l=a-a%5;o=(s&(1<<l)-1).toString(32),s>>=l,a-=l,Ft=1<<32-ht(t)+a|r<<a|s,Mt=o+e}else Ft=1<<o|r<<a|s,Mt=e}function Si(e){e.return!==null&&(wr(e,1),om(e,1,0))}function Ci(e){for(;e===Ea;)Ea=Zr[--en],Zr[en]=null,Pa=Zr[--en],Zr[en]=null;for(;e===Tr;)Tr=st[--at],st[at]=null,Mt=st[--at],st[at]=null,Ft=st[--at],st[at]=null}var et=null,Ze=null,me=!1,ft=null;function lm(e,t){var r=ot(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function qc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,et=e,Ze=ar(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,et=e,Ze=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Tr!==null?{id:Ft,overflow:Mt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ot(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,et=e,Ze=null,!0):!1;default:return!1}}function Cl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function El(e){if(me){var t=Ze;if(t){var r=t;if(!qc(e,t)){if(Cl(e))throw Error(O(418));t=ar(r.nextSibling);var s=et;t&&qc(e,t)?lm(s,r):(e.flags=e.flags&-4097|2,me=!1,et=e)}}else{if(Cl(e))throw Error(O(418));e.flags=e.flags&-4097|2,me=!1,et=e}}}function Qc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;et=e}function qs(e){if(e!==et)return!1;if(!me)return Qc(e),me=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!wl(e.type,e.memoizedProps)),t&&(t=Ze)){if(Cl(e))throw im(),Error(O(418));for(;t;)lm(e,t),t=ar(t.nextSibling)}if(Qc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(O(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ze=ar(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ze=null}}else Ze=et?ar(e.stateNode.nextSibling):null;return!0}function im(){for(var e=Ze;e;)e=ar(e.nextSibling)}function hn(){Ze=et=null,me=!1}function Ei(e){ft===null?ft=[e]:ft.push(e)}var i0=Bt.ReactCurrentBatchConfig;function Fn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(O(309));var s=r.stateNode}if(!s)throw Error(O(147,e));var a=s,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(l){var i=a.refs;l===null?delete i[o]:i[o]=l},t._stringRef=o,t)}if(typeof e!="string")throw Error(O(284));if(!r._owner)throw Error(O(290,e))}return e}function Qs(e,t){throw e=Object.prototype.toString.call(t),Error(O(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Gc(e){var t=e._init;return t(e._payload)}function cm(e){function t(p,h){if(e){var g=p.deletions;g===null?(p.deletions=[h],p.flags|=16):g.push(h)}}function r(p,h){if(!e)return null;for(;h!==null;)t(p,h),h=h.sibling;return null}function s(p,h){for(p=new Map;h!==null;)h.key!==null?p.set(h.key,h):p.set(h.index,h),h=h.sibling;return p}function a(p,h){return p=cr(p,h),p.index=0,p.sibling=null,p}function o(p,h,g){return p.index=g,e?(g=p.alternate,g!==null?(g=g.index,g<h?(p.flags|=2,h):g):(p.flags|=2,h)):(p.flags|=1048576,h)}function l(p){return e&&p.alternate===null&&(p.flags|=2),p}function i(p,h,g,C){return h===null||h.tag!==6?(h=qo(g,p.mode,C),h.return=p,h):(h=a(h,g),h.return=p,h)}function c(p,h,g,C){var P=g.type;return P===Qr?u(p,h,g.props.children,C,g.key):h!==null&&(h.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Qt&&Gc(P)===h.type)?(C=a(h,g.props),C.ref=Fn(p,h,g),C.return=p,C):(C=ua(g.type,g.key,g.props,null,p.mode,C),C.ref=Fn(p,h,g),C.return=p,C)}function d(p,h,g,C){return h===null||h.tag!==4||h.stateNode.containerInfo!==g.containerInfo||h.stateNode.implementation!==g.implementation?(h=Qo(g,p.mode,C),h.return=p,h):(h=a(h,g.children||[]),h.return=p,h)}function u(p,h,g,C,P){return h===null||h.tag!==7?(h=Lr(g,p.mode,C,P),h.return=p,h):(h=a(h,g),h.return=p,h)}function m(p,h,g){if(typeof h=="string"&&h!==""||typeof h=="number")return h=qo(""+h,p.mode,g),h.return=p,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case As:return g=ua(h.type,h.key,h.props,null,p.mode,g),g.ref=Fn(p,null,h),g.return=p,g;case qr:return h=Qo(h,p.mode,g),h.return=p,h;case Qt:var C=h._init;return m(p,C(h._payload),g)}if(Dn(h)||_n(h))return h=Lr(h,p.mode,g,null),h.return=p,h;Qs(p,h)}return null}function x(p,h,g,C){var P=h!==null?h.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return P!==null?null:i(p,h,""+g,C);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case As:return g.key===P?c(p,h,g,C):null;case qr:return g.key===P?d(p,h,g,C):null;case Qt:return P=g._init,x(p,h,P(g._payload),C)}if(Dn(g)||_n(g))return P!==null?null:u(p,h,g,C,null);Qs(p,g)}return null}function w(p,h,g,C,P){if(typeof C=="string"&&C!==""||typeof C=="number")return p=p.get(g)||null,i(h,p,""+C,P);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case As:return p=p.get(C.key===null?g:C.key)||null,c(h,p,C,P);case qr:return p=p.get(C.key===null?g:C.key)||null,d(h,p,C,P);case Qt:var y=C._init;return w(p,h,g,y(C._payload),P)}if(Dn(C)||_n(C))return p=p.get(g)||null,u(h,p,C,P,null);Qs(h,C)}return null}function v(p,h,g,C){for(var P=null,y=null,E=h,L=h=0,k=null;E!==null&&L<g.length;L++){E.index>L?(k=E,E=null):k=E.sibling;var S=x(p,E,g[L],C);if(S===null){E===null&&(E=k);break}e&&E&&S.alternate===null&&t(p,E),h=o(S,h,L),y===null?P=S:y.sibling=S,y=S,E=k}if(L===g.length)return r(p,E),me&&wr(p,L),P;if(E===null){for(;L<g.length;L++)E=m(p,g[L],C),E!==null&&(h=o(E,h,L),y===null?P=E:y.sibling=E,y=E);return me&&wr(p,L),P}for(E=s(p,E);L<g.length;L++)k=w(E,p,L,g[L],C),k!==null&&(e&&k.alternate!==null&&E.delete(k.key===null?L:k.key),h=o(k,h,L),y===null?P=k:y.sibling=k,y=k);return e&&E.forEach(function(j){return t(p,j)}),me&&wr(p,L),P}function b(p,h,g,C){var P=_n(g);if(typeof P!="function")throw Error(O(150));if(g=P.call(g),g==null)throw Error(O(151));for(var y=P=null,E=h,L=h=0,k=null,S=g.next();E!==null&&!S.done;L++,S=g.next()){E.index>L?(k=E,E=null):k=E.sibling;var j=x(p,E,S.value,C);if(j===null){E===null&&(E=k);break}e&&E&&j.alternate===null&&t(p,E),h=o(j,h,L),y===null?P=j:y.sibling=j,y=j,E=k}if(S.done)return r(p,E),me&&wr(p,L),P;if(E===null){for(;!S.done;L++,S=g.next())S=m(p,S.value,C),S!==null&&(h=o(S,h,L),y===null?P=S:y.sibling=S,y=S);return me&&wr(p,L),P}for(E=s(p,E);!S.done;L++,S=g.next())S=w(E,p,L,S.value,C),S!==null&&(e&&S.alternate!==null&&E.delete(S.key===null?L:S.key),h=o(S,h,L),y===null?P=S:y.sibling=S,y=S);return e&&E.forEach(function(z){return t(p,z)}),me&&wr(p,L),P}function N(p,h,g,C){if(typeof g=="object"&&g!==null&&g.type===Qr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case As:e:{for(var P=g.key,y=h;y!==null;){if(y.key===P){if(P=g.type,P===Qr){if(y.tag===7){r(p,y.sibling),h=a(y,g.props.children),h.return=p,p=h;break e}}else if(y.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Qt&&Gc(P)===y.type){r(p,y.sibling),h=a(y,g.props),h.ref=Fn(p,y,g),h.return=p,p=h;break e}r(p,y);break}else t(p,y);y=y.sibling}g.type===Qr?(h=Lr(g.props.children,p.mode,C,g.key),h.return=p,p=h):(C=ua(g.type,g.key,g.props,null,p.mode,C),C.ref=Fn(p,h,g),C.return=p,p=C)}return l(p);case qr:e:{for(y=g.key;h!==null;){if(h.key===y)if(h.tag===4&&h.stateNode.containerInfo===g.containerInfo&&h.stateNode.implementation===g.implementation){r(p,h.sibling),h=a(h,g.children||[]),h.return=p,p=h;break e}else{r(p,h);break}else t(p,h);h=h.sibling}h=Qo(g,p.mode,C),h.return=p,p=h}return l(p);case Qt:return y=g._init,N(p,h,y(g._payload),C)}if(Dn(g))return v(p,h,g,C);if(_n(g))return b(p,h,g,C);Qs(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,h!==null&&h.tag===6?(r(p,h.sibling),h=a(h,g),h.return=p,p=h):(r(p,h),h=qo(g,p.mode,C),h.return=p,p=h),l(p)):r(p,h)}return N}var xn=cm(!0),dm=cm(!1),_a=xr(null),La=null,tn=null,Pi=null;function _i(){Pi=tn=La=null}function Li(e){var t=_a.current;ue(_a),e._currentValue=t}function Pl(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function dn(e,t){La=e,Pi=tn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(He=!0),e.firstContext=null)}function it(e){var t=e._currentValue;if(Pi!==e)if(e={context:e,memoizedValue:t,next:null},tn===null){if(La===null)throw Error(O(308));tn=e,La.dependencies={lanes:0,firstContext:e}}else tn=tn.next=e;return t}var Sr=null;function Ri(e){Sr===null?Sr=[e]:Sr.push(e)}function um(e,t,r,s){var a=t.interleaved;return a===null?(r.next=r,Ri(t)):(r.next=a.next,a.next=r),t.interleaved=r,Dt(e,s)}function Dt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Gt=!1;function zi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function At(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function or(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ne&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,Dt(e,r)}return a=s.interleaved,a===null?(t.next=t,Ri(s)):(t.next=a.next,a.next=t),s.interleaved=t,Dt(e,r)}function aa(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,gi(e,r)}}function Kc(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?a=o=l:o=o.next=l,r=r.next}while(r!==null);o===null?a=o=t:o=o.next=t}else a=o=t;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ra(e,t,r,s){var a=e.updateQueue;Gt=!1;var o=a.firstBaseUpdate,l=a.lastBaseUpdate,i=a.shared.pending;if(i!==null){a.shared.pending=null;var c=i,d=c.next;c.next=null,l===null?o=d:l.next=d,l=c;var u=e.alternate;u!==null&&(u=u.updateQueue,i=u.lastBaseUpdate,i!==l&&(i===null?u.firstBaseUpdate=d:i.next=d,u.lastBaseUpdate=c))}if(o!==null){var m=a.baseState;l=0,u=d=c=null,i=o;do{var x=i.lane,w=i.eventTime;if((s&x)===x){u!==null&&(u=u.next={eventTime:w,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var v=e,b=i;switch(x=t,w=r,b.tag){case 1:if(v=b.payload,typeof v=="function"){m=v.call(w,m,x);break e}m=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,x=typeof v=="function"?v.call(w,m,x):v,x==null)break e;m=he({},m,x);break e;case 2:Gt=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,x=a.effects,x===null?a.effects=[i]:x.push(i))}else w={eventTime:w,lane:x,tag:i.tag,payload:i.payload,callback:i.callback,next:null},u===null?(d=u=w,c=m):u=u.next=w,l|=x;if(i=i.next,i===null){if(i=a.shared.pending,i===null)break;x=i,i=x.next,x.next=null,a.lastBaseUpdate=x,a.shared.pending=null}}while(!0);if(u===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else o===null&&(a.shared.lanes=0);Mr|=l,e.lanes=l,e.memoizedState=m}}function Jc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(O(191,a));a.call(s)}}}var ks={},Ct=xr(ks),us=xr(ks),ms=xr(ks);function Cr(e){if(e===ks)throw Error(O(174));return e}function Ti(e,t){switch(ce(ms,t),ce(us,e),ce(Ct,ks),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:il(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=il(t,e)}ue(Ct),ce(Ct,t)}function gn(){ue(Ct),ue(us),ue(ms)}function fm(e){Cr(ms.current);var t=Cr(Ct.current),r=il(t,e.type);t!==r&&(ce(us,e),ce(Ct,r))}function Fi(e){us.current===e&&(ue(Ct),ue(us))}var fe=xr(0);function za(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Io=[];function Mi(){for(var e=0;e<Io.length;e++)Io[e]._workInProgressVersionPrimary=null;Io.length=0}var oa=Bt.ReactCurrentDispatcher,Uo=Bt.ReactCurrentBatchConfig,Fr=0,pe=null,we=null,ke=null,Ta=!1,Kn=!1,fs=0,c0=0;function Le(){throw Error(O(321))}function Ai(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!gt(e[r],t[r]))return!1;return!0}function Oi(e,t,r,s,a,o){if(Fr=o,pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oa.current=e===null||e.memoizedState===null?f0:p0,e=r(s,a),Kn){o=0;do{if(Kn=!1,fs=0,25<=o)throw Error(O(301));o+=1,ke=we=null,t.updateQueue=null,oa.current=h0,e=r(s,a)}while(Kn)}if(oa.current=Fa,t=we!==null&&we.next!==null,Fr=0,ke=we=pe=null,Ta=!1,t)throw Error(O(300));return e}function $i(){var e=fs!==0;return fs=0,e}function wt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?pe.memoizedState=ke=e:ke=ke.next=e,ke}function ct(){if(we===null){var e=pe.alternate;e=e!==null?e.memoizedState:null}else e=we.next;var t=ke===null?pe.memoizedState:ke.next;if(t!==null)ke=t,we=e;else{if(e===null)throw Error(O(310));we=e,e={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},ke===null?pe.memoizedState=ke=e:ke=ke.next=e}return ke}function ps(e,t){return typeof t=="function"?t(e):t}function Bo(e){var t=ct(),r=t.queue;if(r===null)throw Error(O(311));r.lastRenderedReducer=e;var s=we,a=s.baseQueue,o=r.pending;if(o!==null){if(a!==null){var l=a.next;a.next=o.next,o.next=l}s.baseQueue=a=o,r.pending=null}if(a!==null){o=a.next,s=s.baseState;var i=l=null,c=null,d=o;do{var u=d.lane;if((Fr&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(i=c=m,l=s):c=c.next=m,pe.lanes|=u,Mr|=u}d=d.next}while(d!==null&&d!==o);c===null?l=s:c.next=i,gt(s,t.memoizedState)||(He=!0),t.memoizedState=s,t.baseState=l,t.baseQueue=c,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do o=a.lane,pe.lanes|=o,Mr|=o,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ho(e){var t=ct(),r=t.queue;if(r===null)throw Error(O(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,o=t.memoizedState;if(a!==null){r.pending=null;var l=a=a.next;do o=e(o,l.action),l=l.next;while(l!==a);gt(o,t.memoizedState)||(He=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,s]}function pm(){}function hm(e,t){var r=pe,s=ct(),a=t(),o=!gt(s.memoizedState,a);if(o&&(s.memoizedState=a,He=!0),s=s.queue,Di(ym.bind(null,r,s,e),[e]),s.getSnapshot!==t||o||ke!==null&&ke.memoizedState.tag&1){if(r.flags|=2048,hs(9,gm.bind(null,r,s,a,t),void 0,null),Se===null)throw Error(O(349));Fr&30||xm(r,t,a)}return a}function xm(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=pe.updateQueue,t===null?(t={lastEffect:null,stores:null},pe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function gm(e,t,r,s){t.value=r,t.getSnapshot=s,vm(t)&&bm(e)}function ym(e,t,r){return r(function(){vm(t)&&bm(e)})}function vm(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!gt(e,r)}catch{return!0}}function bm(e){var t=Dt(e,1);t!==null&&xt(t,e,1,-1)}function Yc(e){var t=wt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:e},t.queue=e,e=e.dispatch=m0.bind(null,pe,e),[t.memoizedState,e]}function hs(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=pe.updateQueue,t===null?(t={lastEffect:null,stores:null},pe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function jm(){return ct().memoizedState}function la(e,t,r,s){var a=wt();pe.flags|=e,a.memoizedState=hs(1|t,r,void 0,s===void 0?null:s)}function Ya(e,t,r,s){var a=ct();s=s===void 0?null:s;var o=void 0;if(we!==null){var l=we.memoizedState;if(o=l.destroy,s!==null&&Ai(s,l.deps)){a.memoizedState=hs(t,r,o,s);return}}pe.flags|=e,a.memoizedState=hs(1|t,r,o,s)}function Xc(e,t){return la(8390656,8,e,t)}function Di(e,t){return Ya(2048,8,e,t)}function wm(e,t){return Ya(4,2,e,t)}function Nm(e,t){return Ya(4,4,e,t)}function km(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Sm(e,t,r){return r=r!=null?r.concat([e]):null,Ya(4,4,km.bind(null,t,e),r)}function Ii(){}function Cm(e,t){var r=ct();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Ai(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function Em(e,t){var r=ct();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Ai(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function Pm(e,t,r){return Fr&21?(gt(r,t)||(r=Tu(),pe.lanes|=r,Mr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,He=!0),e.memoizedState=r)}function d0(e,t){var r=ae;ae=r!==0&&4>r?r:4,e(!0);var s=Uo.transition;Uo.transition={};try{e(!1),t()}finally{ae=r,Uo.transition=s}}function _m(){return ct().memoizedState}function u0(e,t,r){var s=ir(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Lm(e))Rm(t,r);else if(r=um(e,t,r,s),r!==null){var a=De();xt(r,e,s,a),zm(r,t,s)}}function m0(e,t,r){var s=ir(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Lm(e))Rm(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var l=t.lastRenderedState,i=o(l,r);if(a.hasEagerState=!0,a.eagerState=i,gt(i,l)){var c=t.interleaved;c===null?(a.next=a,Ri(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=um(e,t,a,s),r!==null&&(a=De(),xt(r,e,s,a),zm(r,t,s))}}function Lm(e){var t=e.alternate;return e===pe||t!==null&&t===pe}function Rm(e,t){Kn=Ta=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function zm(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,gi(e,r)}}var Fa={readContext:it,useCallback:Le,useContext:Le,useEffect:Le,useImperativeHandle:Le,useInsertionEffect:Le,useLayoutEffect:Le,useMemo:Le,useReducer:Le,useRef:Le,useState:Le,useDebugValue:Le,useDeferredValue:Le,useTransition:Le,useMutableSource:Le,useSyncExternalStore:Le,useId:Le,unstable_isNewReconciler:!1},f0={readContext:it,useCallback:function(e,t){return wt().memoizedState=[e,t===void 0?null:t],e},useContext:it,useEffect:Xc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,la(4194308,4,km.bind(null,t,e),r)},useLayoutEffect:function(e,t){return la(4194308,4,e,t)},useInsertionEffect:function(e,t){return la(4,2,e,t)},useMemo:function(e,t){var r=wt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=wt();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=u0.bind(null,pe,e),[s.memoizedState,e]},useRef:function(e){var t=wt();return e={current:e},t.memoizedState=e},useState:Yc,useDebugValue:Ii,useDeferredValue:function(e){return wt().memoizedState=e},useTransition:function(){var e=Yc(!1),t=e[0];return e=d0.bind(null,e[1]),wt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=pe,a=wt();if(me){if(r===void 0)throw Error(O(407));r=r()}else{if(r=t(),Se===null)throw Error(O(349));Fr&30||xm(s,t,r)}a.memoizedState=r;var o={value:r,getSnapshot:t};return a.queue=o,Xc(ym.bind(null,s,o,e),[e]),s.flags|=2048,hs(9,gm.bind(null,s,o,r,t),void 0,null),r},useId:function(){var e=wt(),t=Se.identifierPrefix;if(me){var r=Mt,s=Ft;r=(s&~(1<<32-ht(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=fs++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=c0++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},p0={readContext:it,useCallback:Cm,useContext:it,useEffect:Di,useImperativeHandle:Sm,useInsertionEffect:wm,useLayoutEffect:Nm,useMemo:Em,useReducer:Bo,useRef:jm,useState:function(){return Bo(ps)},useDebugValue:Ii,useDeferredValue:function(e){var t=ct();return Pm(t,we.memoizedState,e)},useTransition:function(){var e=Bo(ps)[0],t=ct().memoizedState;return[e,t]},useMutableSource:pm,useSyncExternalStore:hm,useId:_m,unstable_isNewReconciler:!1},h0={readContext:it,useCallback:Cm,useContext:it,useEffect:Di,useImperativeHandle:Sm,useInsertionEffect:wm,useLayoutEffect:Nm,useMemo:Em,useReducer:Ho,useRef:jm,useState:function(){return Ho(ps)},useDebugValue:Ii,useDeferredValue:function(e){var t=ct();return we===null?t.memoizedState=e:Pm(t,we.memoizedState,e)},useTransition:function(){var e=Ho(ps)[0],t=ct().memoizedState;return[e,t]},useMutableSource:pm,useSyncExternalStore:hm,useId:_m,unstable_isNewReconciler:!1};function ut(e,t){if(e&&e.defaultProps){t=he({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function _l(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:he({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Xa={isMounted:function(e){return(e=e._reactInternals)?Ir(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=De(),a=ir(e),o=At(s,a);o.payload=t,r!=null&&(o.callback=r),t=or(e,o,a),t!==null&&(xt(t,e,a,s),aa(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=De(),a=ir(e),o=At(s,a);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=or(e,o,a),t!==null&&(xt(t,e,a,s),aa(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=De(),s=ir(e),a=At(r,s);a.tag=2,t!=null&&(a.callback=t),t=or(e,a,s),t!==null&&(xt(t,e,s,r),aa(t,e,s))}};function Zc(e,t,r,s,a,o,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,o,l):t.prototype&&t.prototype.isPureReactComponent?!ls(r,s)||!ls(a,o):!0}function Tm(e,t,r){var s=!1,a=fr,o=t.contextType;return typeof o=="object"&&o!==null?o=it(o):(a=qe(t)?zr:Me.current,s=t.contextTypes,o=(s=s!=null)?pn(e,a):fr),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Xa,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function ed(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&Xa.enqueueReplaceState(t,t.state,null)}function Ll(e,t,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},zi(e);var o=t.contextType;typeof o=="object"&&o!==null?a.context=it(o):(o=qe(t)?zr:Me.current,a.context=pn(e,o)),a.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(_l(e,t,o,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Xa.enqueueReplaceState(a,a.state,null),Ra(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function yn(e,t){try{var r="",s=t;do r+=Hp(s),s=s.return;while(s);var a=r}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:a,digest:null}}function Vo(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Rl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var x0=typeof WeakMap=="function"?WeakMap:Map;function Fm(e,t,r){r=At(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){Aa||(Aa=!0,Ul=s),Rl(e,t)},r}function Mm(e,t,r){r=At(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;r.payload=function(){return s(a)},r.callback=function(){Rl(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Rl(e,t),typeof s!="function"&&(lr===null?lr=new Set([this]):lr.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function td(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new x0;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(r)||(a.add(r),e=L0.bind(null,e,t,r),t.then(e,e))}function rd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function nd(e,t,r,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=At(-1,1),t.tag=2,or(r,t,1))),r.lanes|=1),e)}var g0=Bt.ReactCurrentOwner,He=!1;function Ae(e,t,r,s){t.child=e===null?dm(t,null,r,s):xn(t,e.child,r,s)}function sd(e,t,r,s,a){r=r.render;var o=t.ref;return dn(t,a),s=Oi(e,t,r,s,o,a),r=$i(),e!==null&&!He?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,It(e,t,a)):(me&&r&&Si(t),t.flags|=1,Ae(e,t,s,a),t.child)}function ad(e,t,r,s,a){if(e===null){var o=r.type;return typeof o=="function"&&!Gi(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,Am(e,t,o,s,a)):(e=ua(r.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&a)){var l=o.memoizedProps;if(r=r.compare,r=r!==null?r:ls,r(l,s)&&e.ref===t.ref)return It(e,t,a)}return t.flags|=1,e=cr(o,s),e.ref=t.ref,e.return=t,t.child=e}function Am(e,t,r,s,a){if(e!==null){var o=e.memoizedProps;if(ls(o,s)&&e.ref===t.ref)if(He=!1,t.pendingProps=s=o,(e.lanes&a)!==0)e.flags&131072&&(He=!0);else return t.lanes=e.lanes,It(e,t,a)}return zl(e,t,r,s,a)}function Om(e,t,r){var s=t.pendingProps,a=s.children,o=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ce(nn,Xe),Xe|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ce(nn,Xe),Xe|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=o!==null?o.baseLanes:r,ce(nn,Xe),Xe|=s}else o!==null?(s=o.baseLanes|r,t.memoizedState=null):s=r,ce(nn,Xe),Xe|=s;return Ae(e,t,a,r),t.child}function $m(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function zl(e,t,r,s,a){var o=qe(r)?zr:Me.current;return o=pn(t,o),dn(t,a),r=Oi(e,t,r,s,o,a),s=$i(),e!==null&&!He?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,It(e,t,a)):(me&&s&&Si(t),t.flags|=1,Ae(e,t,r,a),t.child)}function od(e,t,r,s,a){if(qe(r)){var o=!0;Ca(t)}else o=!1;if(dn(t,a),t.stateNode===null)ia(e,t),Tm(t,r,s),Ll(t,r,s,a),s=!0;else if(e===null){var l=t.stateNode,i=t.memoizedProps;l.props=i;var c=l.context,d=r.contextType;typeof d=="object"&&d!==null?d=it(d):(d=qe(r)?zr:Me.current,d=pn(t,d));var u=r.getDerivedStateFromProps,m=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(i!==s||c!==d)&&ed(t,l,s,d),Gt=!1;var x=t.memoizedState;l.state=x,Ra(t,s,l,a),c=t.memoizedState,i!==s||x!==c||We.current||Gt?(typeof u=="function"&&(_l(t,r,u,s),c=t.memoizedState),(i=Gt||Zc(t,r,i,s,x,c,d))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),l.props=s,l.state=c,l.context=d,s=i):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{l=t.stateNode,mm(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:ut(t.type,i),l.props=d,m=t.pendingProps,x=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=it(c):(c=qe(r)?zr:Me.current,c=pn(t,c));var w=r.getDerivedStateFromProps;(u=typeof w=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(i!==m||x!==c)&&ed(t,l,s,c),Gt=!1,x=t.memoizedState,l.state=x,Ra(t,s,l,a);var v=t.memoizedState;i!==m||x!==v||We.current||Gt?(typeof w=="function"&&(_l(t,r,w,s),v=t.memoizedState),(d=Gt||Zc(t,r,d,s,x,v,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,v,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,v,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||i===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=v),l.props=s,l.state=v,l.context=c,s=d):(typeof l.componentDidUpdate!="function"||i===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),s=!1)}return Tl(e,t,r,s,o,a)}function Tl(e,t,r,s,a,o){$m(e,t);var l=(t.flags&128)!==0;if(!s&&!l)return a&&Wc(t,r,!1),It(e,t,o);s=t.stateNode,g0.current=t;var i=l&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&l?(t.child=xn(t,e.child,null,o),t.child=xn(t,null,i,o)):Ae(e,t,i,o),t.memoizedState=s.state,a&&Wc(t,r,!0),t.child}function Dm(e){var t=e.stateNode;t.pendingContext?Vc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Vc(e,t.context,!1),Ti(e,t.containerInfo)}function ld(e,t,r,s,a){return hn(),Ei(a),t.flags|=256,Ae(e,t,r,s),t.child}var Fl={dehydrated:null,treeContext:null,retryLane:0};function Ml(e){return{baseLanes:e,cachePool:null,transitions:null}}function Im(e,t,r){var s=t.pendingProps,a=fe.current,o=!1,l=(t.flags&128)!==0,i;if((i=l)||(i=e!==null&&e.memoizedState===null?!1:(a&2)!==0),i?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ce(fe,a&1),e===null)return El(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},!(s&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=to(l,s,0,null),e=Lr(e,s,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ml(r),t.memoizedState=Fl,e):Ui(t,l));if(a=e.memoizedState,a!==null&&(i=a.dehydrated,i!==null))return y0(e,t,l,s,i,a,r);if(o){o=s.fallback,l=t.mode,a=e.child,i=a.sibling;var c={mode:"hidden",children:s.children};return!(l&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=cr(a,c),s.subtreeFlags=a.subtreeFlags&14680064),i!==null?o=cr(i,o):(o=Lr(o,l,r,null),o.flags|=2),o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=e.child.memoizedState,l=l===null?Ml(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~r,t.memoizedState=Fl,s}return o=e.child,e=o.sibling,s=cr(o,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Ui(e,t){return t=to({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Gs(e,t,r,s){return s!==null&&Ei(s),xn(t,e.child,null,r),e=Ui(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function y0(e,t,r,s,a,o,l){if(r)return t.flags&256?(t.flags&=-257,s=Vo(Error(O(422))),Gs(e,t,l,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=s.fallback,a=t.mode,s=to({mode:"visible",children:s.children},a,0,null),o=Lr(o,a,l,null),o.flags|=2,s.return=t,o.return=t,s.sibling=o,t.child=s,t.mode&1&&xn(t,e.child,null,l),t.child.memoizedState=Ml(l),t.memoizedState=Fl,o);if(!(t.mode&1))return Gs(e,t,l,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var i=s.dgst;return s=i,o=Error(O(419)),s=Vo(o,s,void 0),Gs(e,t,l,s)}if(i=(l&e.childLanes)!==0,He||i){if(s=Se,s!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|l)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,Dt(e,a),xt(s,e,a,-1))}return Qi(),s=Vo(Error(O(421))),Gs(e,t,l,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=R0.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,Ze=ar(a.nextSibling),et=t,me=!0,ft=null,e!==null&&(st[at++]=Ft,st[at++]=Mt,st[at++]=Tr,Ft=e.id,Mt=e.overflow,Tr=t),t=Ui(t,s.children),t.flags|=4096,t)}function id(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Pl(e.return,t,r)}function Wo(e,t,r,s,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=r,o.tailMode=a)}function Um(e,t,r){var s=t.pendingProps,a=s.revealOrder,o=s.tail;if(Ae(e,t,s.children,r),s=fe.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&id(e,r,t);else if(e.tag===19)id(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(ce(fe,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&za(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Wo(t,!1,a,r,o);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&za(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Wo(t,!0,r,null,o);break;case"together":Wo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ia(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function It(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Mr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(O(153));if(t.child!==null){for(e=t.child,r=cr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=cr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function v0(e,t,r){switch(t.tag){case 3:Dm(t),hn();break;case 5:fm(t);break;case 1:qe(t.type)&&Ca(t);break;case 4:Ti(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;ce(_a,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(ce(fe,fe.current&1),t.flags|=128,null):r&t.child.childLanes?Im(e,t,r):(ce(fe,fe.current&1),e=It(e,t,r),e!==null?e.sibling:null);ce(fe,fe.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return Um(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ce(fe,fe.current),s)break;return null;case 22:case 23:return t.lanes=0,Om(e,t,r)}return It(e,t,r)}var Bm,Al,Hm,Vm;Bm=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Al=function(){};Hm=function(e,t,r,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,Cr(Ct.current);var o=null;switch(r){case"input":a=sl(e,a),s=sl(e,s),o=[];break;case"select":a=he({},a,{value:void 0}),s=he({},s,{value:void 0}),o=[];break;case"textarea":a=ll(e,a),s=ll(e,s),o=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=ka)}cl(r,s);var l;r=null;for(d in a)if(!s.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var i=a[d];for(l in i)i.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(es.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in s){var c=s[d];if(i=a!=null?a[d]:void 0,s.hasOwnProperty(d)&&c!==i&&(c!=null||i!=null))if(d==="style")if(i){for(l in i)!i.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&i[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(o||(o=[]),o.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(es.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&de("scroll",e),o||i===c||(o=[])):(o=o||[]).push(d,c))}r&&(o=o||[]).push("style",r);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};Vm=function(e,t,r,s){r!==s&&(t.flags|=4)};function Mn(e,t){if(!me)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Re(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function b0(e,t,r){var s=t.pendingProps;switch(Ci(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Re(t),null;case 1:return qe(t.type)&&Sa(),Re(t),null;case 3:return s=t.stateNode,gn(),ue(We),ue(Me),Mi(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(qs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ft!==null&&(Vl(ft),ft=null))),Al(e,t),Re(t),null;case 5:Fi(t);var a=Cr(ms.current);if(r=t.type,e!==null&&t.stateNode!=null)Hm(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(O(166));return Re(t),null}if(e=Cr(Ct.current),qs(t)){s=t.stateNode,r=t.type;var o=t.memoizedProps;switch(s[Nt]=t,s[ds]=o,e=(t.mode&1)!==0,r){case"dialog":de("cancel",s),de("close",s);break;case"iframe":case"object":case"embed":de("load",s);break;case"video":case"audio":for(a=0;a<Un.length;a++)de(Un[a],s);break;case"source":de("error",s);break;case"img":case"image":case"link":de("error",s),de("load",s);break;case"details":de("toggle",s);break;case"input":gc(s,o),de("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},de("invalid",s);break;case"textarea":vc(s,o),de("invalid",s)}cl(r,o),a=null;for(var l in o)if(o.hasOwnProperty(l)){var i=o[l];l==="children"?typeof i=="string"?s.textContent!==i&&(o.suppressHydrationWarning!==!0&&Ws(s.textContent,i,e),a=["children",i]):typeof i=="number"&&s.textContent!==""+i&&(o.suppressHydrationWarning!==!0&&Ws(s.textContent,i,e),a=["children",""+i]):es.hasOwnProperty(l)&&i!=null&&l==="onScroll"&&de("scroll",s)}switch(r){case"input":Os(s),yc(s,o,!0);break;case"textarea":Os(s),bc(s);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(s.onclick=ka)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=yu(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=l.createElement(r,{is:s.is}):(e=l.createElement(r),r==="select"&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,r),e[Nt]=t,e[ds]=s,Bm(e,t,!1,!1),t.stateNode=e;e:{switch(l=dl(r,s),r){case"dialog":de("cancel",e),de("close",e),a=s;break;case"iframe":case"object":case"embed":de("load",e),a=s;break;case"video":case"audio":for(a=0;a<Un.length;a++)de(Un[a],e);a=s;break;case"source":de("error",e),a=s;break;case"img":case"image":case"link":de("error",e),de("load",e),a=s;break;case"details":de("toggle",e),a=s;break;case"input":gc(e,s),a=sl(e,s),de("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=he({},s,{value:void 0}),de("invalid",e);break;case"textarea":vc(e,s),a=ll(e,s),de("invalid",e);break;default:a=s}cl(r,a),i=a;for(o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="style"?ju(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&vu(e,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ts(e,c):typeof c=="number"&&ts(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(es.hasOwnProperty(o)?c!=null&&o==="onScroll"&&de("scroll",e):c!=null&&ui(e,o,c,l))}switch(r){case"input":Os(e),yc(e,s,!1);break;case"textarea":Os(e),bc(e);break;case"option":s.value!=null&&e.setAttribute("value",""+mr(s.value));break;case"select":e.multiple=!!s.multiple,o=s.value,o!=null?an(e,!!s.multiple,o,!1):s.defaultValue!=null&&an(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=ka)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Re(t),null;case 6:if(e&&t.stateNode!=null)Vm(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(O(166));if(r=Cr(ms.current),Cr(Ct.current),qs(t)){if(s=t.stateNode,r=t.memoizedProps,s[Nt]=t,(o=s.nodeValue!==r)&&(e=et,e!==null))switch(e.tag){case 3:Ws(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ws(s.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Nt]=t,t.stateNode=s}return Re(t),null;case 13:if(ue(fe),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(me&&Ze!==null&&t.mode&1&&!(t.flags&128))im(),hn(),t.flags|=98560,o=!1;else if(o=qs(t),s!==null&&s.dehydrated!==null){if(e===null){if(!o)throw Error(O(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(O(317));o[Nt]=t}else hn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Re(t),o=!1}else ft!==null&&(Vl(ft),ft=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||fe.current&1?Ne===0&&(Ne=3):Qi())),t.updateQueue!==null&&(t.flags|=4),Re(t),null);case 4:return gn(),Al(e,t),e===null&&is(t.stateNode.containerInfo),Re(t),null;case 10:return Li(t.type._context),Re(t),null;case 17:return qe(t.type)&&Sa(),Re(t),null;case 19:if(ue(fe),o=t.memoizedState,o===null)return Re(t),null;if(s=(t.flags&128)!==0,l=o.rendering,l===null)if(s)Mn(o,!1);else{if(Ne!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=za(e),l!==null){for(t.flags|=128,Mn(o,!1),s=l.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)o=r,e=s,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ce(fe,fe.current&1|2),t.child}e=e.sibling}o.tail!==null&&ye()>vn&&(t.flags|=128,s=!0,Mn(o,!1),t.lanes=4194304)}else{if(!s)if(e=za(l),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Mn(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!me)return Re(t),null}else 2*ye()-o.renderingStartTime>vn&&r!==1073741824&&(t.flags|=128,s=!0,Mn(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(r=o.last,r!==null?r.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ye(),t.sibling=null,r=fe.current,ce(fe,s?r&1|2:r&1),t):(Re(t),null);case 22:case 23:return qi(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Xe&1073741824&&(Re(t),t.subtreeFlags&6&&(t.flags|=8192)):Re(t),null;case 24:return null;case 25:return null}throw Error(O(156,t.tag))}function j0(e,t){switch(Ci(t),t.tag){case 1:return qe(t.type)&&Sa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return gn(),ue(We),ue(Me),Mi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Fi(t),null;case 13:if(ue(fe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(O(340));hn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ue(fe),null;case 4:return gn(),null;case 10:return Li(t.type._context),null;case 22:case 23:return qi(),null;case 24:return null;default:return null}}var Ks=!1,Te=!1,w0=typeof WeakSet=="function"?WeakSet:Set,q=null;function rn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){xe(e,t,s)}else r.current=null}function Ol(e,t,r){try{r()}catch(s){xe(e,t,s)}}var cd=!1;function N0(e,t){if(bl=ja,e=Ku(),ki(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var l=0,i=-1,c=-1,d=0,u=0,m=e,x=null;t:for(;;){for(var w;m!==r||a!==0&&m.nodeType!==3||(i=l+a),m!==o||s!==0&&m.nodeType!==3||(c=l+s),m.nodeType===3&&(l+=m.nodeValue.length),(w=m.firstChild)!==null;)x=m,m=w;for(;;){if(m===e)break t;if(x===r&&++d===a&&(i=l),x===o&&++u===s&&(c=l),(w=m.nextSibling)!==null)break;m=x,x=m.parentNode}m=w}r=i===-1||c===-1?null:{start:i,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(jl={focusedElem:e,selectionRange:r},ja=!1,q=t;q!==null;)if(t=q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,q=e;else for(;q!==null;){t=q;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var b=v.memoizedProps,N=v.memoizedState,p=t.stateNode,h=p.getSnapshotBeforeUpdate(t.elementType===t.type?b:ut(t.type,b),N);p.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(C){xe(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,q=e;break}q=t.return}return v=cd,cd=!1,v}function Jn(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&Ol(t,r,o)}a=a.next}while(a!==s)}}function Za(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function $l(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Wm(e){var t=e.alternate;t!==null&&(e.alternate=null,Wm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Nt],delete t[ds],delete t[kl],delete t[a0],delete t[o0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function qm(e){return e.tag===5||e.tag===3||e.tag===4}function dd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Dl(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ka));else if(s!==4&&(e=e.child,e!==null))for(Dl(e,t,r),e=e.sibling;e!==null;)Dl(e,t,r),e=e.sibling}function Il(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Il(e,t,r),e=e.sibling;e!==null;)Il(e,t,r),e=e.sibling}var Ee=null,mt=!1;function qt(e,t,r){for(r=r.child;r!==null;)Qm(e,t,r),r=r.sibling}function Qm(e,t,r){if(St&&typeof St.onCommitFiberUnmount=="function")try{St.onCommitFiberUnmount(Wa,r)}catch{}switch(r.tag){case 5:Te||rn(r,t);case 6:var s=Ee,a=mt;Ee=null,qt(e,t,r),Ee=s,mt=a,Ee!==null&&(mt?(e=Ee,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ee.removeChild(r.stateNode));break;case 18:Ee!==null&&(mt?(e=Ee,r=r.stateNode,e.nodeType===8?$o(e.parentNode,r):e.nodeType===1&&$o(e,r),as(e)):$o(Ee,r.stateNode));break;case 4:s=Ee,a=mt,Ee=r.stateNode.containerInfo,mt=!0,qt(e,t,r),Ee=s,mt=a;break;case 0:case 11:case 14:case 15:if(!Te&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var o=a,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&Ol(r,t,l),a=a.next}while(a!==s)}qt(e,t,r);break;case 1:if(!Te&&(rn(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(i){xe(r,t,i)}qt(e,t,r);break;case 21:qt(e,t,r);break;case 22:r.mode&1?(Te=(s=Te)||r.memoizedState!==null,qt(e,t,r),Te=s):qt(e,t,r);break;default:qt(e,t,r)}}function ud(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new w0),t.forEach(function(s){var a=z0.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function dt(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var o=e,l=t,i=l;e:for(;i!==null;){switch(i.tag){case 5:Ee=i.stateNode,mt=!1;break e;case 3:Ee=i.stateNode.containerInfo,mt=!0;break e;case 4:Ee=i.stateNode.containerInfo,mt=!0;break e}i=i.return}if(Ee===null)throw Error(O(160));Qm(o,l,a),Ee=null,mt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){xe(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Gm(t,e),t=t.sibling}function Gm(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dt(t,e),bt(e),s&4){try{Jn(3,e,e.return),Za(3,e)}catch(b){xe(e,e.return,b)}try{Jn(5,e,e.return)}catch(b){xe(e,e.return,b)}}break;case 1:dt(t,e),bt(e),s&512&&r!==null&&rn(r,r.return);break;case 5:if(dt(t,e),bt(e),s&512&&r!==null&&rn(r,r.return),e.flags&32){var a=e.stateNode;try{ts(a,"")}catch(b){xe(e,e.return,b)}}if(s&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,l=r!==null?r.memoizedProps:o,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&o.type==="radio"&&o.name!=null&&xu(a,o),dl(i,l);var d=dl(i,o);for(l=0;l<c.length;l+=2){var u=c[l],m=c[l+1];u==="style"?ju(a,m):u==="dangerouslySetInnerHTML"?vu(a,m):u==="children"?ts(a,m):ui(a,u,m,d)}switch(i){case"input":al(a,o);break;case"textarea":gu(a,o);break;case"select":var x=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var w=o.value;w!=null?an(a,!!o.multiple,w,!1):x!==!!o.multiple&&(o.defaultValue!=null?an(a,!!o.multiple,o.defaultValue,!0):an(a,!!o.multiple,o.multiple?[]:"",!1))}a[ds]=o}catch(b){xe(e,e.return,b)}}break;case 6:if(dt(t,e),bt(e),s&4){if(e.stateNode===null)throw Error(O(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(b){xe(e,e.return,b)}}break;case 3:if(dt(t,e),bt(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{as(t.containerInfo)}catch(b){xe(e,e.return,b)}break;case 4:dt(t,e),bt(e);break;case 13:dt(t,e),bt(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(Vi=ye())),s&4&&ud(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Te=(d=Te)||u,dt(t,e),Te=d):dt(t,e),bt(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(q=e,u=e.child;u!==null;){for(m=q=u;q!==null;){switch(x=q,w=x.child,x.tag){case 0:case 11:case 14:case 15:Jn(4,x,x.return);break;case 1:rn(x,x.return);var v=x.stateNode;if(typeof v.componentWillUnmount=="function"){s=x,r=x.return;try{t=s,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(b){xe(s,r,b)}}break;case 5:rn(x,x.return);break;case 22:if(x.memoizedState!==null){fd(m);continue}}w!==null?(w.return=x,q=w):fd(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,d?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(i=m.stateNode,c=m.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=bu("display",l))}catch(b){xe(e,e.return,b)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(b){xe(e,e.return,b)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:dt(t,e),bt(e),s&4&&ud(e);break;case 21:break;default:dt(t,e),bt(e)}}function bt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(qm(r)){var s=r;break e}r=r.return}throw Error(O(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(ts(a,""),s.flags&=-33);var o=dd(e);Il(e,o,a);break;case 3:case 4:var l=s.stateNode.containerInfo,i=dd(e);Dl(e,i,l);break;default:throw Error(O(161))}}catch(c){xe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function k0(e,t,r){q=e,Km(e)}function Km(e,t,r){for(var s=(e.mode&1)!==0;q!==null;){var a=q,o=a.child;if(a.tag===22&&s){var l=a.memoizedState!==null||Ks;if(!l){var i=a.alternate,c=i!==null&&i.memoizedState!==null||Te;i=Ks;var d=Te;if(Ks=l,(Te=c)&&!d)for(q=a;q!==null;)l=q,c=l.child,l.tag===22&&l.memoizedState!==null?pd(a):c!==null?(c.return=l,q=c):pd(a);for(;o!==null;)q=o,Km(o),o=o.sibling;q=a,Ks=i,Te=d}md(e)}else a.subtreeFlags&8772&&o!==null?(o.return=a,q=o):md(e)}}function md(e){for(;q!==null;){var t=q;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Te||Za(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Te)if(r===null)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:ut(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Jc(t,o,s);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Jc(t,l,r)}break;case 5:var i=t.stateNode;if(r===null&&t.flags&4){r=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&as(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}Te||t.flags&512&&$l(t)}catch(x){xe(t,t.return,x)}}if(t===e){q=null;break}if(r=t.sibling,r!==null){r.return=t.return,q=r;break}q=t.return}}function fd(e){for(;q!==null;){var t=q;if(t===e){q=null;break}var r=t.sibling;if(r!==null){r.return=t.return,q=r;break}q=t.return}}function pd(e){for(;q!==null;){var t=q;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Za(4,t)}catch(c){xe(t,r,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(c){xe(t,a,c)}}var o=t.return;try{$l(t)}catch(c){xe(t,o,c)}break;case 5:var l=t.return;try{$l(t)}catch(c){xe(t,l,c)}}}catch(c){xe(t,t.return,c)}if(t===e){q=null;break}var i=t.sibling;if(i!==null){i.return=t.return,q=i;break}q=t.return}}var S0=Math.ceil,Ma=Bt.ReactCurrentDispatcher,Bi=Bt.ReactCurrentOwner,lt=Bt.ReactCurrentBatchConfig,ne=0,Se=null,je=null,Pe=0,Xe=0,nn=xr(0),Ne=0,xs=null,Mr=0,eo=0,Hi=0,Yn=null,Be=null,Vi=0,vn=1/0,Rt=null,Aa=!1,Ul=null,lr=null,Js=!1,Zt=null,Oa=0,Xn=0,Bl=null,ca=-1,da=0;function De(){return ne&6?ye():ca!==-1?ca:ca=ye()}function ir(e){return e.mode&1?ne&2&&Pe!==0?Pe&-Pe:i0.transition!==null?(da===0&&(da=Tu()),da):(e=ae,e!==0||(e=window.event,e=e===void 0?16:Iu(e.type)),e):1}function xt(e,t,r,s){if(50<Xn)throw Xn=0,Bl=null,Error(O(185));js(e,r,s),(!(ne&2)||e!==Se)&&(e===Se&&(!(ne&2)&&(eo|=r),Ne===4&&Jt(e,Pe)),Qe(e,s),r===1&&ne===0&&!(t.mode&1)&&(vn=ye()+500,Ja&&gr()))}function Qe(e,t){var r=e.callbackNode;ih(e,t);var s=ba(e,e===Se?Pe:0);if(s===0)r!==null&&Nc(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&Nc(r),t===1)e.tag===0?l0(hd.bind(null,e)):am(hd.bind(null,e)),n0(function(){!(ne&6)&&gr()}),r=null;else{switch(Fu(s)){case 1:r=xi;break;case 4:r=Ru;break;case 16:r=va;break;case 536870912:r=zu;break;default:r=va}r=nf(r,Jm.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Jm(e,t){if(ca=-1,da=0,ne&6)throw Error(O(327));var r=e.callbackNode;if(un()&&e.callbackNode!==r)return null;var s=ba(e,e===Se?Pe:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=$a(e,s);else{t=s;var a=ne;ne|=2;var o=Xm();(Se!==e||Pe!==t)&&(Rt=null,vn=ye()+500,_r(e,t));do try{P0();break}catch(i){Ym(e,i)}while(!0);_i(),Ma.current=o,ne=a,je!==null?t=0:(Se=null,Pe=0,t=Ne)}if(t!==0){if(t===2&&(a=hl(e),a!==0&&(s=a,t=Hl(e,a))),t===1)throw r=xs,_r(e,0),Jt(e,s),Qe(e,ye()),r;if(t===6)Jt(e,s);else{if(a=e.current.alternate,!(s&30)&&!C0(a)&&(t=$a(e,s),t===2&&(o=hl(e),o!==0&&(s=o,t=Hl(e,o))),t===1))throw r=xs,_r(e,0),Jt(e,s),Qe(e,ye()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(O(345));case 2:Nr(e,Be,Rt);break;case 3:if(Jt(e,s),(s&130023424)===s&&(t=Vi+500-ye(),10<t)){if(ba(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){De(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Nl(Nr.bind(null,e,Be,Rt),t);break}Nr(e,Be,Rt);break;case 4:if(Jt(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var l=31-ht(s);o=1<<l,l=t[l],l>a&&(a=l),s&=~o}if(s=a,s=ye()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*S0(s/1960))-s,10<s){e.timeoutHandle=Nl(Nr.bind(null,e,Be,Rt),s);break}Nr(e,Be,Rt);break;case 5:Nr(e,Be,Rt);break;default:throw Error(O(329))}}}return Qe(e,ye()),e.callbackNode===r?Jm.bind(null,e):null}function Hl(e,t){var r=Yn;return e.current.memoizedState.isDehydrated&&(_r(e,t).flags|=256),e=$a(e,t),e!==2&&(t=Be,Be=r,t!==null&&Vl(t)),e}function Vl(e){Be===null?Be=e:Be.push.apply(Be,e)}function C0(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],o=a.getSnapshot;a=a.value;try{if(!gt(o(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jt(e,t){for(t&=~Hi,t&=~eo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ht(t),s=1<<r;e[r]=-1,t&=~s}}function hd(e){if(ne&6)throw Error(O(327));un();var t=ba(e,0);if(!(t&1))return Qe(e,ye()),null;var r=$a(e,t);if(e.tag!==0&&r===2){var s=hl(e);s!==0&&(t=s,r=Hl(e,s))}if(r===1)throw r=xs,_r(e,0),Jt(e,t),Qe(e,ye()),r;if(r===6)throw Error(O(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Nr(e,Be,Rt),Qe(e,ye()),null}function Wi(e,t){var r=ne;ne|=1;try{return e(t)}finally{ne=r,ne===0&&(vn=ye()+500,Ja&&gr())}}function Ar(e){Zt!==null&&Zt.tag===0&&!(ne&6)&&un();var t=ne;ne|=1;var r=lt.transition,s=ae;try{if(lt.transition=null,ae=1,e)return e()}finally{ae=s,lt.transition=r,ne=t,!(ne&6)&&gr()}}function qi(){Xe=nn.current,ue(nn)}function _r(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,r0(r)),je!==null)for(r=je.return;r!==null;){var s=r;switch(Ci(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Sa();break;case 3:gn(),ue(We),ue(Me),Mi();break;case 5:Fi(s);break;case 4:gn();break;case 13:ue(fe);break;case 19:ue(fe);break;case 10:Li(s.type._context);break;case 22:case 23:qi()}r=r.return}if(Se=e,je=e=cr(e.current,null),Pe=Xe=t,Ne=0,xs=null,Hi=eo=Mr=0,Be=Yn=null,Sr!==null){for(t=0;t<Sr.length;t++)if(r=Sr[t],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,o=r.pending;if(o!==null){var l=o.next;o.next=a,s.next=l}r.pending=s}Sr=null}return e}function Ym(e,t){do{var r=je;try{if(_i(),oa.current=Fa,Ta){for(var s=pe.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Ta=!1}if(Fr=0,ke=we=pe=null,Kn=!1,fs=0,Bi.current=null,r===null||r.return===null){Ne=1,xs=t,je=null;break}e:{var o=e,l=r.return,i=r,c=t;if(t=Pe,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=i,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var x=u.alternate;x?(u.updateQueue=x.updateQueue,u.memoizedState=x.memoizedState,u.lanes=x.lanes):(u.updateQueue=null,u.memoizedState=null)}var w=rd(l);if(w!==null){w.flags&=-257,nd(w,l,i,o,t),w.mode&1&&td(o,d,t),t=w,c=d;var v=t.updateQueue;if(v===null){var b=new Set;b.add(c),t.updateQueue=b}else v.add(c);break e}else{if(!(t&1)){td(o,d,t),Qi();break e}c=Error(O(426))}}else if(me&&i.mode&1){var N=rd(l);if(N!==null){!(N.flags&65536)&&(N.flags|=256),nd(N,l,i,o,t),Ei(yn(c,i));break e}}o=c=yn(c,i),Ne!==4&&(Ne=2),Yn===null?Yn=[o]:Yn.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var p=Fm(o,c,t);Kc(o,p);break e;case 1:i=c;var h=o.type,g=o.stateNode;if(!(o.flags&128)&&(typeof h.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(lr===null||!lr.has(g)))){o.flags|=65536,t&=-t,o.lanes|=t;var C=Mm(o,i,t);Kc(o,C);break e}}o=o.return}while(o!==null)}ef(r)}catch(P){t=P,je===r&&r!==null&&(je=r=r.return);continue}break}while(!0)}function Xm(){var e=Ma.current;return Ma.current=Fa,e===null?Fa:e}function Qi(){(Ne===0||Ne===3||Ne===2)&&(Ne=4),Se===null||!(Mr&268435455)&&!(eo&268435455)||Jt(Se,Pe)}function $a(e,t){var r=ne;ne|=2;var s=Xm();(Se!==e||Pe!==t)&&(Rt=null,_r(e,t));do try{E0();break}catch(a){Ym(e,a)}while(!0);if(_i(),ne=r,Ma.current=s,je!==null)throw Error(O(261));return Se=null,Pe=0,Ne}function E0(){for(;je!==null;)Zm(je)}function P0(){for(;je!==null&&!Zp();)Zm(je)}function Zm(e){var t=rf(e.alternate,e,Xe);e.memoizedProps=e.pendingProps,t===null?ef(e):je=t,Bi.current=null}function ef(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=j0(r,t),r!==null){r.flags&=32767,je=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ne=6,je=null;return}}else if(r=b0(r,t,Xe),r!==null){je=r;return}if(t=t.sibling,t!==null){je=t;return}je=t=e}while(t!==null);Ne===0&&(Ne=5)}function Nr(e,t,r){var s=ae,a=lt.transition;try{lt.transition=null,ae=1,_0(e,t,r,s)}finally{lt.transition=a,ae=s}return null}function _0(e,t,r,s){do un();while(Zt!==null);if(ne&6)throw Error(O(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(O(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(ch(e,o),e===Se&&(je=Se=null,Pe=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Js||(Js=!0,nf(va,function(){return un(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=lt.transition,lt.transition=null;var l=ae;ae=1;var i=ne;ne|=4,Bi.current=null,N0(e,r),Gm(r,e),Kh(jl),ja=!!bl,jl=bl=null,e.current=r,k0(r),eh(),ne=i,ae=l,lt.transition=o}else e.current=r;if(Js&&(Js=!1,Zt=e,Oa=a),o=e.pendingLanes,o===0&&(lr=null),nh(r.stateNode),Qe(e,ye()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(Aa)throw Aa=!1,e=Ul,Ul=null,e;return Oa&1&&e.tag!==0&&un(),o=e.pendingLanes,o&1?e===Bl?Xn++:(Xn=0,Bl=e):Xn=0,gr(),null}function un(){if(Zt!==null){var e=Fu(Oa),t=lt.transition,r=ae;try{if(lt.transition=null,ae=16>e?16:e,Zt===null)var s=!1;else{if(e=Zt,Zt=null,Oa=0,ne&6)throw Error(O(331));var a=ne;for(ne|=4,q=e.current;q!==null;){var o=q,l=o.child;if(q.flags&16){var i=o.deletions;if(i!==null){for(var c=0;c<i.length;c++){var d=i[c];for(q=d;q!==null;){var u=q;switch(u.tag){case 0:case 11:case 15:Jn(8,u,o)}var m=u.child;if(m!==null)m.return=u,q=m;else for(;q!==null;){u=q;var x=u.sibling,w=u.return;if(Wm(u),u===d){q=null;break}if(x!==null){x.return=w,q=x;break}q=w}}}var v=o.alternate;if(v!==null){var b=v.child;if(b!==null){v.child=null;do{var N=b.sibling;b.sibling=null,b=N}while(b!==null)}}q=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,q=l;else e:for(;q!==null;){if(o=q,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Jn(9,o,o.return)}var p=o.sibling;if(p!==null){p.return=o.return,q=p;break e}q=o.return}}var h=e.current;for(q=h;q!==null;){l=q;var g=l.child;if(l.subtreeFlags&2064&&g!==null)g.return=l,q=g;else e:for(l=h;q!==null;){if(i=q,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Za(9,i)}}catch(P){xe(i,i.return,P)}if(i===l){q=null;break e}var C=i.sibling;if(C!==null){C.return=i.return,q=C;break e}q=i.return}}if(ne=a,gr(),St&&typeof St.onPostCommitFiberRoot=="function")try{St.onPostCommitFiberRoot(Wa,e)}catch{}s=!0}return s}finally{ae=r,lt.transition=t}}return!1}function xd(e,t,r){t=yn(r,t),t=Fm(e,t,1),e=or(e,t,1),t=De(),e!==null&&(js(e,1,t),Qe(e,t))}function xe(e,t,r){if(e.tag===3)xd(e,e,r);else for(;t!==null;){if(t.tag===3){xd(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(lr===null||!lr.has(s))){e=yn(r,e),e=Mm(t,e,1),t=or(t,e,1),e=De(),t!==null&&(js(t,1,e),Qe(t,e));break}}t=t.return}}function L0(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=De(),e.pingedLanes|=e.suspendedLanes&r,Se===e&&(Pe&r)===r&&(Ne===4||Ne===3&&(Pe&130023424)===Pe&&500>ye()-Vi?_r(e,0):Hi|=r),Qe(e,t)}function tf(e,t){t===0&&(e.mode&1?(t=Is,Is<<=1,!(Is&130023424)&&(Is=4194304)):t=1);var r=De();e=Dt(e,t),e!==null&&(js(e,t,r),Qe(e,r))}function R0(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),tf(e,r)}function z0(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(O(314))}s!==null&&s.delete(t),tf(e,r)}var rf;rf=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||We.current)He=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return He=!1,v0(e,t,r);He=!!(e.flags&131072)}else He=!1,me&&t.flags&1048576&&om(t,Pa,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;ia(e,t),e=t.pendingProps;var a=pn(t,Me.current);dn(t,r),a=Oi(null,t,s,e,a,r);var o=$i();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qe(s)?(o=!0,Ca(t)):o=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,zi(t),a.updater=Xa,t.stateNode=a,a._reactInternals=t,Ll(t,s,e,r),t=Tl(null,t,s,!0,o,r)):(t.tag=0,me&&o&&Si(t),Ae(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch(ia(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=F0(s),e=ut(s,e),a){case 0:t=zl(null,t,s,e,r);break e;case 1:t=od(null,t,s,e,r);break e;case 11:t=sd(null,t,s,e,r);break e;case 14:t=ad(null,t,s,ut(s.type,e),r);break e}throw Error(O(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:ut(s,a),zl(e,t,s,a,r);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:ut(s,a),od(e,t,s,a,r);case 3:e:{if(Dm(t),e===null)throw Error(O(387));s=t.pendingProps,o=t.memoizedState,a=o.element,mm(e,t),Ra(t,s,null,r);var l=t.memoizedState;if(s=l.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){a=yn(Error(O(423)),t),t=ld(e,t,s,r,a);break e}else if(s!==a){a=yn(Error(O(424)),t),t=ld(e,t,s,r,a);break e}else for(Ze=ar(t.stateNode.containerInfo.firstChild),et=t,me=!0,ft=null,r=dm(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(hn(),s===a){t=It(e,t,r);break e}Ae(e,t,s,r)}t=t.child}return t;case 5:return fm(t),e===null&&El(t),s=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,l=a.children,wl(s,a)?l=null:o!==null&&wl(s,o)&&(t.flags|=32),$m(e,t),Ae(e,t,l,r),t.child;case 6:return e===null&&El(t),null;case 13:return Im(e,t,r);case 4:return Ti(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=xn(t,null,s,r):Ae(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:ut(s,a),sd(e,t,s,a,r);case 7:return Ae(e,t,t.pendingProps,r),t.child;case 8:return Ae(e,t,t.pendingProps.children,r),t.child;case 12:return Ae(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,o=t.memoizedProps,l=a.value,ce(_a,s._currentValue),s._currentValue=l,o!==null)if(gt(o.value,l)){if(o.children===a.children&&!We.current){t=It(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var i=o.dependencies;if(i!==null){l=o.child;for(var c=i.firstContext;c!==null;){if(c.context===s){if(o.tag===1){c=At(-1,r&-r),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),Pl(o.return,r,t),i.lanes|=r;break}c=c.next}}else if(o.tag===10)l=o.type===t.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(O(341));l.lanes|=r,i=l.alternate,i!==null&&(i.lanes|=r),Pl(l,r,t),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===t){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Ae(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,dn(t,r),a=it(a),s=s(a),t.flags|=1,Ae(e,t,s,r),t.child;case 14:return s=t.type,a=ut(s,t.pendingProps),a=ut(s.type,a),ad(e,t,s,a,r);case 15:return Am(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:ut(s,a),ia(e,t),t.tag=1,qe(s)?(e=!0,Ca(t)):e=!1,dn(t,r),Tm(t,s,a),Ll(t,s,a,r),Tl(null,t,s,!0,e,r);case 19:return Um(e,t,r);case 22:return Om(e,t,r)}throw Error(O(156,t.tag))};function nf(e,t){return Lu(e,t)}function T0(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ot(e,t,r,s){return new T0(e,t,r,s)}function Gi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function F0(e){if(typeof e=="function")return Gi(e)?1:0;if(e!=null){if(e=e.$$typeof,e===fi)return 11;if(e===pi)return 14}return 2}function cr(e,t){var r=e.alternate;return r===null?(r=ot(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ua(e,t,r,s,a,o){var l=2;if(s=e,typeof e=="function")Gi(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Qr:return Lr(r.children,a,o,t);case mi:l=8,a|=8;break;case el:return e=ot(12,r,t,a|2),e.elementType=el,e.lanes=o,e;case tl:return e=ot(13,r,t,a),e.elementType=tl,e.lanes=o,e;case rl:return e=ot(19,r,t,a),e.elementType=rl,e.lanes=o,e;case fu:return to(r,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case uu:l=10;break e;case mu:l=9;break e;case fi:l=11;break e;case pi:l=14;break e;case Qt:l=16,s=null;break e}throw Error(O(130,e==null?e:typeof e,""))}return t=ot(l,r,t,a),t.elementType=e,t.type=s,t.lanes=o,t}function Lr(e,t,r,s){return e=ot(7,e,s,t),e.lanes=r,e}function to(e,t,r,s){return e=ot(22,e,s,t),e.elementType=fu,e.lanes=r,e.stateNode={isHidden:!1},e}function qo(e,t,r){return e=ot(6,e,null,t),e.lanes=r,e}function Qo(e,t,r){return t=ot(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function M0(e,t,r,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Eo(0),this.expirationTimes=Eo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Eo(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Ki(e,t,r,s,a,o,l,i,c){return e=new M0(e,t,r,i,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=ot(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},zi(o),e}function A0(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qr,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function sf(e){if(!e)return fr;e=e._reactInternals;e:{if(Ir(e)!==e||e.tag!==1)throw Error(O(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(O(171))}if(e.tag===1){var r=e.type;if(qe(r))return sm(e,r,t)}return t}function af(e,t,r,s,a,o,l,i,c){return e=Ki(r,s,!0,e,a,o,l,i,c),e.context=sf(null),r=e.current,s=De(),a=ir(r),o=At(s,a),o.callback=t??null,or(r,o,a),e.current.lanes=a,js(e,a,s),Qe(e,s),e}function ro(e,t,r,s){var a=t.current,o=De(),l=ir(a);return r=sf(r),t.context===null?t.context=r:t.pendingContext=r,t=At(o,l),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=or(a,t,l),e!==null&&(xt(e,a,l,o),aa(e,a,l)),l}function Da(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function gd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Ji(e,t){gd(e,t),(e=e.alternate)&&gd(e,t)}function O0(){return null}var of=typeof reportError=="function"?reportError:function(e){console.error(e)};function Yi(e){this._internalRoot=e}no.prototype.render=Yi.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(O(409));ro(e,t,null,null)};no.prototype.unmount=Yi.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ar(function(){ro(null,e,null,null)}),t[$t]=null}};function no(e){this._internalRoot=e}no.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ou();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Kt.length&&t!==0&&t<Kt[r].priority;r++);Kt.splice(r,0,e),r===0&&Du(e)}};function Xi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function so(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function yd(){}function $0(e,t,r,s,a){if(a){if(typeof s=="function"){var o=s;s=function(){var d=Da(l);o.call(d)}}var l=af(t,s,e,0,null,!1,!1,"",yd);return e._reactRootContainer=l,e[$t]=l.current,is(e.nodeType===8?e.parentNode:e),Ar(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var i=s;s=function(){var d=Da(c);i.call(d)}}var c=Ki(e,0,!1,null,null,!1,!1,"",yd);return e._reactRootContainer=c,e[$t]=c.current,is(e.nodeType===8?e.parentNode:e),Ar(function(){ro(t,c,r,s)}),c}function ao(e,t,r,s,a){var o=r._reactRootContainer;if(o){var l=o;if(typeof a=="function"){var i=a;a=function(){var c=Da(l);i.call(c)}}ro(t,l,e,a)}else l=$0(r,t,e,a,s);return Da(l)}Mu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=In(t.pendingLanes);r!==0&&(gi(t,r|1),Qe(t,ye()),!(ne&6)&&(vn=ye()+500,gr()))}break;case 13:Ar(function(){var s=Dt(e,1);if(s!==null){var a=De();xt(s,e,1,a)}}),Ji(e,1)}};yi=function(e){if(e.tag===13){var t=Dt(e,134217728);if(t!==null){var r=De();xt(t,e,134217728,r)}Ji(e,134217728)}};Au=function(e){if(e.tag===13){var t=ir(e),r=Dt(e,t);if(r!==null){var s=De();xt(r,e,t,s)}Ji(e,t)}};Ou=function(){return ae};$u=function(e,t){var r=ae;try{return ae=e,t()}finally{ae=r}};ml=function(e,t,r){switch(t){case"input":if(al(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=Ka(s);if(!a)throw Error(O(90));hu(s),al(s,a)}}}break;case"textarea":gu(e,r);break;case"select":t=r.value,t!=null&&an(e,!!r.multiple,t,!1)}};ku=Wi;Su=Ar;var D0={usingClientEntryPoint:!1,Events:[Ns,Yr,Ka,wu,Nu,Wi]},An={findFiberByHostInstance:kr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},I0={bundleType:An.bundleType,version:An.version,rendererPackageName:An.rendererPackageName,rendererConfig:An.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Pu(e),e===null?null:e.stateNode},findFiberByHostInstance:An.findFiberByHostInstance||O0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ys=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ys.isDisabled&&Ys.supportsFiber)try{Wa=Ys.inject(I0),St=Ys}catch{}}rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D0;rt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xi(t))throw Error(O(200));return A0(e,t,null,r)};rt.createRoot=function(e,t){if(!Xi(e))throw Error(O(299));var r=!1,s="",a=of;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Ki(e,1,!1,null,null,r,!1,s,a),e[$t]=t.current,is(e.nodeType===8?e.parentNode:e),new Yi(t)};rt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(O(188)):(e=Object.keys(e).join(","),Error(O(268,e)));return e=Pu(t),e=e===null?null:e.stateNode,e};rt.flushSync=function(e){return Ar(e)};rt.hydrate=function(e,t,r){if(!so(t))throw Error(O(200));return ao(null,e,t,!0,r)};rt.hydrateRoot=function(e,t,r){if(!Xi(e))throw Error(O(405));var s=r!=null&&r.hydratedSources||null,a=!1,o="",l=of;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=af(t,null,e,1,r??null,a,!1,o,l),e[$t]=t.current,is(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new no(t)};rt.render=function(e,t,r){if(!so(t))throw Error(O(200));return ao(null,e,t,!1,r)};rt.unmountComponentAtNode=function(e){if(!so(e))throw Error(O(40));return e._reactRootContainer?(Ar(function(){ao(null,null,e,!1,function(){e._reactRootContainer=null,e[$t]=null})}),!0):!1};rt.unstable_batchedUpdates=Wi;rt.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!so(r))throw Error(O(200));if(e==null||e._reactInternals===void 0)throw Error(O(38));return ao(e,t,r,!1,s)};rt.version="18.3.1-next-f1338f8080-20240426";function lf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lf)}catch(e){console.error(e)}}lf(),lu.exports=rt;var U0=lu.exports,cf,vd=U0;cf=vd.createRoot,vd.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gs(){return gs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},gs.apply(this,arguments)}var er;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(er||(er={}));const bd="popstate";function B0(e){e===void 0&&(e={});function t(s,a){let{pathname:o,search:l,hash:i}=s.location;return Wl("",{pathname:o,search:l,hash:i},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:Ia(a)}return V0(t,r,null,e)}function ve(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function df(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function H0(){return Math.random().toString(36).substr(2,8)}function jd(e,t){return{usr:e.state,key:e.key,idx:t}}function Wl(e,t,r,s){return r===void 0&&(r=null),gs({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Nn(t):t,{state:r,key:t&&t.key||s||H0()})}function Ia(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Nn(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function V0(e,t,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:o=!1}=s,l=a.history,i=er.Pop,c=null,d=u();d==null&&(d=0,l.replaceState(gs({},l.state,{idx:d}),""));function u(){return(l.state||{idx:null}).idx}function m(){i=er.Pop;let N=u(),p=N==null?null:N-d;d=N,c&&c({action:i,location:b.location,delta:p})}function x(N,p){i=er.Push;let h=Wl(b.location,N,p);d=u()+1;let g=jd(h,d),C=b.createHref(h);try{l.pushState(g,"",C)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;a.location.assign(C)}o&&c&&c({action:i,location:b.location,delta:1})}function w(N,p){i=er.Replace;let h=Wl(b.location,N,p);d=u();let g=jd(h,d),C=b.createHref(h);l.replaceState(g,"",C),o&&c&&c({action:i,location:b.location,delta:0})}function v(N){let p=a.location.origin!=="null"?a.location.origin:a.location.href,h=typeof N=="string"?N:Ia(N);return h=h.replace(/ $/,"%20"),ve(p,"No window.location.(origin|href) available to create URL for href: "+h),new URL(h,p)}let b={get action(){return i},get location(){return e(a,l)},listen(N){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(bd,m),c=N,()=>{a.removeEventListener(bd,m),c=null}},createHref(N){return t(a,N)},createURL:v,encodeLocation(N){let p=v(N);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:x,replace:w,go(N){return l.go(N)}};return b}var wd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(wd||(wd={}));function W0(e,t,r){return r===void 0&&(r="/"),q0(e,t,r)}function q0(e,t,r,s){let a=typeof t=="string"?Nn(t):t,o=Zi(a.pathname||"/",r);if(o==null)return null;let l=uf(e);Q0(l);let i=null;for(let c=0;i==null&&c<l.length;++c){let d=ax(o);i=rx(l[c],d)}return i}function uf(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let a=(o,l,i)=>{let c={relativePath:i===void 0?o.path||"":i,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};c.relativePath.startsWith("/")&&(ve(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=dr([s,c.relativePath]),u=r.concat(c);o.children&&o.children.length>0&&(ve(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),uf(o.children,t,u,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:ex(d,o.index),routesMeta:u})};return e.forEach((o,l)=>{var i;if(o.path===""||!((i=o.path)!=null&&i.includes("?")))a(o,l);else for(let c of mf(o.path))a(o,l,c)}),t}function mf(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,a=r.endsWith("?"),o=r.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let l=mf(s.join("/")),i=[];return i.push(...l.map(c=>c===""?o:[o,c].join("/"))),a&&i.push(...l),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function Q0(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:tx(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const G0=/^:[\w-]+$/,K0=3,J0=2,Y0=1,X0=10,Z0=-2,Nd=e=>e==="*";function ex(e,t){let r=e.split("/"),s=r.length;return r.some(Nd)&&(s+=Z0),t&&(s+=J0),r.filter(a=>!Nd(a)).reduce((a,o)=>a+(G0.test(o)?K0:o===""?Y0:X0),s)}function tx(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function rx(e,t,r){let{routesMeta:s}=e,a={},o="/",l=[];for(let i=0;i<s.length;++i){let c=s[i],d=i===s.length-1,u=o==="/"?t:t.slice(o.length)||"/",m=nx({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),x=c.route;if(!m)return null;Object.assign(a,m.params),l.push({params:a,pathname:dr([o,m.pathname]),pathnameBase:cx(dr([o,m.pathnameBase])),route:x}),m.pathnameBase!=="/"&&(o=dr([o,m.pathnameBase]))}return l}function nx(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=sx(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),i=a.slice(1);return{params:s.reduce((d,u,m)=>{let{paramName:x,isOptional:w}=u;if(x==="*"){let b=i[m]||"";l=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const v=i[m];return w&&!v?d[x]=void 0:d[x]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:l,pattern:e}}function sx(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),df(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,i,c)=>(s.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function ax(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return df(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Zi(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function ox(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:a=""}=typeof e=="string"?Nn(e):e;return{pathname:r?r.startsWith("/")?r:lx(r,t):t,search:dx(s),hash:ux(a)}}function lx(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Go(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ix(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function ec(e,t){let r=ix(e);return t?r.map((s,a)=>a===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function tc(e,t,r,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=Nn(e):(a=gs({},e),ve(!a.pathname||!a.pathname.includes("?"),Go("?","pathname","search",a)),ve(!a.pathname||!a.pathname.includes("#"),Go("#","pathname","hash",a)),ve(!a.search||!a.search.includes("#"),Go("#","search","hash",a)));let o=e===""||a.pathname==="",l=o?"/":a.pathname,i;if(l==null)i=r;else{let m=t.length-1;if(!s&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),m-=1;a.pathname=x.join("/")}i=m>=0?t[m]:"/"}let c=ox(a,i),d=l&&l!=="/"&&l.endsWith("/"),u=(o||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const dr=e=>e.join("/").replace(/\/\/+/g,"/"),cx=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),dx=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ux=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function mx(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const ff=["post","put","patch","delete"];new Set(ff);const fx=["get",...ff];new Set(fx);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ys(){return ys=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ys.apply(this,arguments)}const rc=f.createContext(null),px=f.createContext(null),yr=f.createContext(null),oo=f.createContext(null),Ht=f.createContext({outlet:null,matches:[],isDataRoute:!1}),pf=f.createContext(null);function hx(e,t){let{relative:r}=t===void 0?{}:t;kn()||ve(!1);let{basename:s,navigator:a}=f.useContext(yr),{hash:o,pathname:l,search:i}=xf(e,{relative:r}),c=l;return s!=="/"&&(c=l==="/"?s:dr([s,l])),a.createHref({pathname:c,search:i,hash:o})}function kn(){return f.useContext(oo)!=null}function Ur(){return kn()||ve(!1),f.useContext(oo).location}function hf(e){f.useContext(yr).static||f.useLayoutEffect(e)}function lo(){let{isDataRoute:e}=f.useContext(Ht);return e?_x():xx()}function xx(){kn()||ve(!1);let e=f.useContext(rc),{basename:t,future:r,navigator:s}=f.useContext(yr),{matches:a}=f.useContext(Ht),{pathname:o}=Ur(),l=JSON.stringify(ec(a,r.v7_relativeSplatPath)),i=f.useRef(!1);return hf(()=>{i.current=!0}),f.useCallback(function(d,u){if(u===void 0&&(u={}),!i.current)return;if(typeof d=="number"){s.go(d);return}let m=tc(d,JSON.parse(l),o,u.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:dr([t,m.pathname])),(u.replace?s.replace:s.push)(m,u.state,u)},[t,s,l,o,e])}function gx(){let{matches:e}=f.useContext(Ht),t=e[e.length-1];return t?t.params:{}}function xf(e,t){let{relative:r}=t===void 0?{}:t,{future:s}=f.useContext(yr),{matches:a}=f.useContext(Ht),{pathname:o}=Ur(),l=JSON.stringify(ec(a,s.v7_relativeSplatPath));return f.useMemo(()=>tc(e,JSON.parse(l),o,r==="path"),[e,l,o,r])}function yx(e,t){return vx(e,t)}function vx(e,t,r,s){kn()||ve(!1);let{navigator:a}=f.useContext(yr),{matches:o}=f.useContext(Ht),l=o[o.length-1],i=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let d=Ur(),u;if(t){var m;let N=typeof t=="string"?Nn(t):t;c==="/"||(m=N.pathname)!=null&&m.startsWith(c)||ve(!1),u=N}else u=d;let x=u.pathname||"/",w=x;if(c!=="/"){let N=c.replace(/^\//,"").split("/");w="/"+x.replace(/^\//,"").split("/").slice(N.length).join("/")}let v=W0(e,{pathname:w}),b=kx(v&&v.map(N=>Object.assign({},N,{params:Object.assign({},i,N.params),pathname:dr([c,a.encodeLocation?a.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?c:dr([c,a.encodeLocation?a.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),o,r,s);return t&&b?f.createElement(oo.Provider,{value:{location:ys({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:er.Pop}},b):b}function bx(){let e=Px(),t=mx(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),r?f.createElement("pre",{style:a},r):null,null)}const jx=f.createElement(bx,null);class wx extends f.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?f.createElement(Ht.Provider,{value:this.props.routeContext},f.createElement(pf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Nx(e){let{routeContext:t,match:r,children:s}=e,a=f.useContext(rc);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),f.createElement(Ht.Provider,{value:t},s)}function kx(e,t,r,s){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var o;if(!r)return null;if(r.errors)e=r.matches;else if((o=s)!=null&&o.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,i=(a=r)==null?void 0:a.errors;if(i!=null){let u=l.findIndex(m=>m.route.id&&(i==null?void 0:i[m.route.id])!==void 0);u>=0||ve(!1),l=l.slice(0,Math.min(l.length,u+1))}let c=!1,d=-1;if(r&&s&&s.v7_partialHydration)for(let u=0;u<l.length;u++){let m=l[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:x,errors:w}=r,v=m.route.loader&&x[m.route.id]===void 0&&(!w||w[m.route.id]===void 0);if(m.route.lazy||v){c=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((u,m,x)=>{let w,v=!1,b=null,N=null;r&&(w=i&&m.route.id?i[m.route.id]:void 0,b=m.route.errorElement||jx,c&&(d<0&&x===0?(Lx("route-fallback"),v=!0,N=null):d===x&&(v=!0,N=m.route.hydrateFallbackElement||null)));let p=t.concat(l.slice(0,x+1)),h=()=>{let g;return w?g=b:v?g=N:m.route.Component?g=f.createElement(m.route.Component,null):m.route.element?g=m.route.element:g=u,f.createElement(Nx,{match:m,routeContext:{outlet:u,matches:p,isDataRoute:r!=null},children:g})};return r&&(m.route.ErrorBoundary||m.route.errorElement||x===0)?f.createElement(wx,{location:r.location,revalidation:r.revalidation,component:b,error:w,children:h(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):h()},null)}var gf=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(gf||{}),yf=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(yf||{});function Sx(e){let t=f.useContext(rc);return t||ve(!1),t}function Cx(e){let t=f.useContext(px);return t||ve(!1),t}function Ex(e){let t=f.useContext(Ht);return t||ve(!1),t}function vf(e){let t=Ex(),r=t.matches[t.matches.length-1];return r.route.id||ve(!1),r.route.id}function Px(){var e;let t=f.useContext(pf),r=Cx(),s=vf();return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function _x(){let{router:e}=Sx(gf.UseNavigateStable),t=vf(yf.UseNavigateStable),r=f.useRef(!1);return hf(()=>{r.current=!0}),f.useCallback(function(a,o){o===void 0&&(o={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,ys({fromRouteId:t},o)))},[e,t])}const kd={};function Lx(e,t,r){kd[e]||(kd[e]=!0)}function Rx(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Bn(e){let{to:t,replace:r,state:s,relative:a}=e;kn()||ve(!1);let{future:o,static:l}=f.useContext(yr),{matches:i}=f.useContext(Ht),{pathname:c}=Ur(),d=lo(),u=tc(t,ec(i,o.v7_relativeSplatPath),c,a==="path"),m=JSON.stringify(u);return f.useEffect(()=>d(JSON.parse(m),{replace:r,state:s,relative:a}),[d,m,a,r,s]),null}function ge(e){ve(!1)}function zx(e){let{basename:t="/",children:r=null,location:s,navigationType:a=er.Pop,navigator:o,static:l=!1,future:i}=e;kn()&&ve(!1);let c=t.replace(/^\/*/,"/"),d=f.useMemo(()=>({basename:c,navigator:o,static:l,future:ys({v7_relativeSplatPath:!1},i)}),[c,i,o,l]);typeof s=="string"&&(s=Nn(s));let{pathname:u="/",search:m="",hash:x="",state:w=null,key:v="default"}=s,b=f.useMemo(()=>{let N=Zi(u,c);return N==null?null:{location:{pathname:N,search:m,hash:x,state:w,key:v},navigationType:a}},[c,u,m,x,w,v,a]);return b==null?null:f.createElement(yr.Provider,{value:d},f.createElement(oo.Provider,{children:r,value:b}))}function Tx(e){let{children:t,location:r}=e;return yx(ql(t),r)}new Promise(()=>{});function ql(e,t){t===void 0&&(t=[]);let r=[];return f.Children.forEach(e,(s,a)=>{if(!f.isValidElement(s))return;let o=[...t,a];if(s.type===f.Fragment){r.push.apply(r,ql(s.props.children,o));return}s.type!==ge&&ve(!1),!s.props.index||!s.props.children||ve(!1);let l={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=ql(s.props.children,o)),r.push(l)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ql(){return Ql=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ql.apply(this,arguments)}function Fx(e,t){if(e==null)return{};var r={},s=Object.keys(e),a,o;for(o=0;o<s.length;o++)a=s[o],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Mx(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Ax(e,t){return e.button===0&&(!t||t==="_self")&&!Mx(e)}function Gl(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let s=e[r];return t.concat(Array.isArray(s)?s.map(a=>[r,a]):[[r,s]])},[]))}function Ox(e,t){let r=Gl(e);return t&&t.forEach((s,a)=>{r.has(a)||t.getAll(a).forEach(o=>{r.append(a,o)})}),r}const $x=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Dx="6";try{window.__reactRouterVersion=Dx}catch{}const Ix="startTransition",Sd=Lp[Ix];function Ux(e){let{basename:t,children:r,future:s,window:a}=e,o=f.useRef();o.current==null&&(o.current=B0({window:a,v5Compat:!0}));let l=o.current,[i,c]=f.useState({action:l.action,location:l.location}),{v7_startTransition:d}=s||{},u=f.useCallback(m=>{d&&Sd?Sd(()=>c(m)):c(m)},[c,d]);return f.useLayoutEffect(()=>l.listen(u),[l,u]),f.useEffect(()=>Rx(s),[s]),f.createElement(zx,{basename:t,children:r,location:i.location,navigationType:i.action,navigator:l,future:s})}const Bx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Hx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pt=f.forwardRef(function(t,r){let{onClick:s,relative:a,reloadDocument:o,replace:l,state:i,target:c,to:d,preventScrollReset:u,viewTransition:m}=t,x=Fx(t,$x),{basename:w}=f.useContext(yr),v,b=!1;if(typeof d=="string"&&Hx.test(d)&&(v=d,Bx))try{let g=new URL(window.location.href),C=d.startsWith("//")?new URL(g.protocol+d):new URL(d),P=Zi(C.pathname,w);C.origin===g.origin&&P!=null?d=P+C.search+C.hash:b=!0}catch{}let N=hx(d,{relative:a}),p=Vx(d,{replace:l,state:i,target:c,preventScrollReset:u,relative:a,viewTransition:m});function h(g){s&&s(g),g.defaultPrevented||p(g)}return f.createElement("a",Ql({},x,{href:v||N,onClick:b||o?s:h,ref:r,target:c}))});var Cd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Cd||(Cd={}));var Ed;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ed||(Ed={}));function Vx(e,t){let{target:r,replace:s,state:a,preventScrollReset:o,relative:l,viewTransition:i}=t===void 0?{}:t,c=lo(),d=Ur(),u=xf(e,{relative:l});return f.useCallback(m=>{if(Ax(m,r)){m.preventDefault();let x=s!==void 0?s:Ia(d)===Ia(u);c(e,{replace:x,state:a,preventScrollReset:o,relative:l,viewTransition:i})}},[d,c,u,s,a,r,e,o,l,i])}function bf(e){let t=f.useRef(Gl(e)),r=f.useRef(!1),s=Ur(),a=f.useMemo(()=>Ox(s.search,r.current?null:t.current),[s.search]),o=lo(),l=f.useCallback((i,c)=>{const d=Gl(typeof i=="function"?i(a):i);r.current=!0,o("?"+d,c)},[o,a]);return[a,l]}let Wx={data:""},qx=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Wx,Qx=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Gx=/\/\*[^]*?\*\/|  +/g,Pd=/\n+/g,Yt=(e,t)=>{let r="",s="",a="";for(let o in e){let l=e[o];o[0]=="@"?o[1]=="i"?r=o+" "+l+";":s+=o[1]=="f"?Yt(l,o):o+"{"+Yt(l,o[1]=="k"?"":t)+"}":typeof l=="object"?s+=Yt(l,t?t.replace(/([^,])+/g,i=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,i):i?i+" "+c:c)):o):l!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=Yt.p?Yt.p(o,l):o+":"+l+";")}return r+(t&&a?t+"{"+a+"}":a)+s},Lt={},jf=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+jf(e[r]);return t}return e},Kx=(e,t,r,s,a)=>{let o=jf(e),l=Lt[o]||(Lt[o]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(o));if(!Lt[l]){let c=o!==e?e:(d=>{let u,m,x=[{}];for(;u=Qx.exec(d.replace(Gx,""));)u[4]?x.shift():u[3]?(m=u[3].replace(Pd," ").trim(),x.unshift(x[0][m]=x[0][m]||{})):x[0][u[1]]=u[2].replace(Pd," ").trim();return x[0]})(e);Lt[l]=Yt(a?{["@keyframes "+l]:c}:c,r?"":"."+l)}let i=r&&Lt.g?Lt.g:null;return r&&(Lt.g=Lt[l]),((c,d,u,m)=>{m?d.data=d.data.replace(m,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(Lt[l],t,s,i),l},Jx=(e,t,r)=>e.reduce((s,a,o)=>{let l=t[o];if(l&&l.call){let i=l(r),c=i&&i.props&&i.props.className||/^go/.test(i)&&i;l=c?"."+c:i&&typeof i=="object"?i.props?"":Yt(i,""):i===!1?"":i}return s+a+(l??"")},"");function io(e){let t=this||{},r=e.call?e(t.p):e;return Kx(r.unshift?r.raw?Jx(r,[].slice.call(arguments,1),t.p):r.reduce((s,a)=>Object.assign(s,a&&a.call?a(t.p):a),{}):r,qx(t.target),t.g,t.o,t.k)}let wf,Kl,Jl;io.bind({g:1});let Ut=io.bind({k:1});function Yx(e,t,r,s){Yt.p=t,wf=e,Kl=r,Jl=s}function vr(e,t){let r=this||{};return function(){let s=arguments;function a(o,l){let i=Object.assign({},o),c=i.className||a.className;r.p=Object.assign({theme:Kl&&Kl()},i),r.o=/ *go\d+/.test(c),i.className=io.apply(r,s)+(c?" "+c:"");let d=e;return e[0]&&(d=i.as||e,delete i.as),Jl&&d[0]&&Jl(i),wf(d,i)}return a}}var Xx=e=>typeof e=="function",Ua=(e,t)=>Xx(e)?e(t):e,Zx=(()=>{let e=0;return()=>(++e).toString()})(),Nf=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),eg=20,kf=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,eg)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:r}=t;return kf(e,{type:e.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+a}))}}},ma=[],Er={toasts:[],pausedAt:void 0},Br=e=>{Er=kf(Er,e),ma.forEach(t=>{t(Er)})},tg={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},rg=(e={})=>{let[t,r]=f.useState(Er),s=f.useRef(Er);f.useEffect(()=>(s.current!==Er&&r(Er),ma.push(r),()=>{let o=ma.indexOf(r);o>-1&&ma.splice(o,1)}),[]);let a=t.toasts.map(o=>{var l,i,c;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((l=e[o.type])==null?void 0:l.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((i=e[o.type])==null?void 0:i.duration)||(e==null?void 0:e.duration)||tg[o.type],style:{...e.style,...(c=e[o.type])==null?void 0:c.style,...o.style}}});return{...t,toasts:a}},ng=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||Zx()}),Ss=e=>(t,r)=>{let s=ng(t,e,r);return Br({type:2,toast:s}),s.id},Z=(e,t)=>Ss("blank")(e,t);Z.error=Ss("error");Z.success=Ss("success");Z.loading=Ss("loading");Z.custom=Ss("custom");Z.dismiss=e=>{Br({type:3,toastId:e})};Z.remove=e=>Br({type:4,toastId:e});Z.promise=(e,t,r)=>{let s=Z.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(a=>{let o=t.success?Ua(t.success,a):void 0;return o?Z.success(o,{id:s,...r,...r==null?void 0:r.success}):Z.dismiss(s),a}).catch(a=>{let o=t.error?Ua(t.error,a):void 0;o?Z.error(o,{id:s,...r,...r==null?void 0:r.error}):Z.dismiss(s)}),e};var sg=(e,t)=>{Br({type:1,toast:{id:e,height:t}})},ag=()=>{Br({type:5,time:Date.now()})},Zn=new Map,og=1e3,lg=(e,t=og)=>{if(Zn.has(e))return;let r=setTimeout(()=>{Zn.delete(e),Br({type:4,toastId:e})},t);Zn.set(e,r)},ig=e=>{let{toasts:t,pausedAt:r}=rg(e);f.useEffect(()=>{if(r)return;let o=Date.now(),l=t.map(i=>{if(i.duration===1/0)return;let c=(i.duration||0)+i.pauseDuration-(o-i.createdAt);if(c<0){i.visible&&Z.dismiss(i.id);return}return setTimeout(()=>Z.dismiss(i.id),c)});return()=>{l.forEach(i=>i&&clearTimeout(i))}},[t,r]);let s=f.useCallback(()=>{r&&Br({type:6,time:Date.now()})},[r]),a=f.useCallback((o,l)=>{let{reverseOrder:i=!1,gutter:c=8,defaultPosition:d}=l||{},u=t.filter(w=>(w.position||d)===(o.position||d)&&w.height),m=u.findIndex(w=>w.id===o.id),x=u.filter((w,v)=>v<m&&w.visible).length;return u.filter(w=>w.visible).slice(...i?[x+1]:[0,x]).reduce((w,v)=>w+(v.height||0)+c,0)},[t]);return f.useEffect(()=>{t.forEach(o=>{if(o.dismissed)lg(o.id,o.removeDelay);else{let l=Zn.get(o.id);l&&(clearTimeout(l),Zn.delete(o.id))}})},[t]),{toasts:t,handlers:{updateHeight:sg,startPause:ag,endPause:s,calculateOffset:a}}},cg=Ut`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,dg=Ut`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ug=Ut`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,mg=vr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${cg} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${dg} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${ug} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,fg=Ut`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,pg=vr("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${fg} 1s linear infinite;
`,hg=Ut`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,xg=Ut`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,gg=vr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${hg} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${xg} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,yg=vr("div")`
  position: absolute;
`,vg=vr("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,bg=Ut`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,jg=vr("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${bg} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,wg=({toast:e})=>{let{icon:t,type:r,iconTheme:s}=e;return t!==void 0?typeof t=="string"?f.createElement(jg,null,t):t:r==="blank"?null:f.createElement(vg,null,f.createElement(pg,{...s}),r!=="loading"&&f.createElement(yg,null,r==="error"?f.createElement(mg,{...s}):f.createElement(gg,{...s})))},Ng=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,kg=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,Sg="0%{opacity:0;} 100%{opacity:1;}",Cg="0%{opacity:1;} 100%{opacity:0;}",Eg=vr("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Pg=vr("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,_g=(e,t)=>{let r=e.includes("top")?1:-1,[s,a]=Nf()?[Sg,Cg]:[Ng(r),kg(r)];return{animation:t?`${Ut(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ut(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Lg=f.memo(({toast:e,position:t,style:r,children:s})=>{let a=e.height?_g(e.position||t||"top-center",e.visible):{opacity:0},o=f.createElement(wg,{toast:e}),l=f.createElement(Pg,{...e.ariaProps},Ua(e.message,e));return f.createElement(Eg,{className:e.className,style:{...a,...r,...e.style}},typeof s=="function"?s({icon:o,message:l}):f.createElement(f.Fragment,null,o,l))});Yx(f.createElement);var Rg=({id:e,className:t,style:r,onHeightUpdate:s,children:a})=>{let o=f.useCallback(l=>{if(l){let i=()=>{let c=l.getBoundingClientRect().height;s(e,c)};i(),new MutationObserver(i).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[e,s]);return f.createElement("div",{ref:o,className:t,style:r},a)},zg=(e,t)=>{let r=e.includes("top"),s=r?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Nf()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...s,...a}},Tg=io`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Xs=16,Fg=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:s,children:a,containerStyle:o,containerClassName:l})=>{let{toasts:i,handlers:c}=ig(r);return f.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Xs,left:Xs,right:Xs,bottom:Xs,pointerEvents:"none",...o},className:l,onMouseEnter:c.startPause,onMouseLeave:c.endPause},i.map(d=>{let u=d.position||t,m=c.calculateOffset(d,{reverseOrder:e,gutter:s,defaultPosition:t}),x=zg(u,m);return f.createElement(Rg,{id:d.id,key:d.id,onHeightUpdate:c.updateHeight,className:d.visible?Tg:"",style:x},d.type==="custom"?Ua(d.message,d):a?a(d):f.createElement(Lg,{toast:d,position:u}))}))};function Sf(e,t){return function(){return e.apply(t,arguments)}}const{toString:Mg}=Object.prototype,{getPrototypeOf:nc}=Object,{iterator:co,toStringTag:Cf}=Symbol,uo=(e=>t=>{const r=Mg.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),yt=e=>(e=e.toLowerCase(),t=>uo(t)===e),mo=e=>t=>typeof t===e,{isArray:Sn}=Array,vs=mo("undefined");function Ag(e){return e!==null&&!vs(e)&&e.constructor!==null&&!vs(e.constructor)&&Ge(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Ef=yt("ArrayBuffer");function Og(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Ef(e.buffer),t}const $g=mo("string"),Ge=mo("function"),Pf=mo("number"),fo=e=>e!==null&&typeof e=="object",Dg=e=>e===!0||e===!1,fa=e=>{if(uo(e)!=="object")return!1;const t=nc(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Cf in e)&&!(co in e)},Ig=yt("Date"),Ug=yt("File"),Bg=yt("Blob"),Hg=yt("FileList"),Vg=e=>fo(e)&&Ge(e.pipe),Wg=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ge(e.append)&&((t=uo(e))==="formdata"||t==="object"&&Ge(e.toString)&&e.toString()==="[object FormData]"))},qg=yt("URLSearchParams"),[Qg,Gg,Kg,Jg]=["ReadableStream","Request","Response","Headers"].map(yt),Yg=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Cs(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let s,a;if(typeof e!="object"&&(e=[e]),Sn(e))for(s=0,a=e.length;s<a;s++)t.call(null,e[s],s,e);else{const o=r?Object.getOwnPropertyNames(e):Object.keys(e),l=o.length;let i;for(s=0;s<l;s++)i=o[s],t.call(null,e[i],i,e)}}function _f(e,t){t=t.toLowerCase();const r=Object.keys(e);let s=r.length,a;for(;s-- >0;)if(a=r[s],t===a.toLowerCase())return a;return null}const Pr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Lf=e=>!vs(e)&&e!==Pr;function Yl(){const{caseless:e}=Lf(this)&&this||{},t={},r=(s,a)=>{const o=e&&_f(t,a)||a;fa(t[o])&&fa(s)?t[o]=Yl(t[o],s):fa(s)?t[o]=Yl({},s):Sn(s)?t[o]=s.slice():t[o]=s};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&Cs(arguments[s],r);return t}const Xg=(e,t,r,{allOwnKeys:s}={})=>(Cs(t,(a,o)=>{r&&Ge(a)?e[o]=Sf(a,r):e[o]=a},{allOwnKeys:s}),e),Zg=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),ey=(e,t,r,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},ty=(e,t,r,s)=>{let a,o,l;const i={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),o=a.length;o-- >0;)l=a[o],(!s||s(l,e,t))&&!i[l]&&(t[l]=e[l],i[l]=!0);e=r!==!1&&nc(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},ry=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const s=e.indexOf(t,r);return s!==-1&&s===r},ny=e=>{if(!e)return null;if(Sn(e))return e;let t=e.length;if(!Pf(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},sy=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&nc(Uint8Array)),ay=(e,t)=>{const s=(e&&e[co]).call(e);let a;for(;(a=s.next())&&!a.done;){const o=a.value;t.call(e,o[0],o[1])}},oy=(e,t)=>{let r;const s=[];for(;(r=e.exec(t))!==null;)s.push(r);return s},ly=yt("HTMLFormElement"),iy=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,a){return s.toUpperCase()+a}),_d=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),cy=yt("RegExp"),Rf=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),s={};Cs(r,(a,o)=>{let l;(l=t(a,o,e))!==!1&&(s[o]=l||a)}),Object.defineProperties(e,s)},dy=e=>{Rf(e,(t,r)=>{if(Ge(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=e[r];if(Ge(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},uy=(e,t)=>{const r={},s=a=>{a.forEach(o=>{r[o]=!0})};return Sn(e)?s(e):s(String(e).split(t)),r},my=()=>{},fy=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function py(e){return!!(e&&Ge(e.append)&&e[Cf]==="FormData"&&e[co])}const hy=e=>{const t=new Array(10),r=(s,a)=>{if(fo(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[a]=s;const o=Sn(s)?[]:{};return Cs(s,(l,i)=>{const c=r(l,a+1);!vs(c)&&(o[i]=c)}),t[a]=void 0,o}}return s};return r(e,0)},xy=yt("AsyncFunction"),gy=e=>e&&(fo(e)||Ge(e))&&Ge(e.then)&&Ge(e.catch),zf=((e,t)=>e?setImmediate:t?((r,s)=>(Pr.addEventListener("message",({source:a,data:o})=>{a===Pr&&o===r&&s.length&&s.shift()()},!1),a=>{s.push(a),Pr.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Ge(Pr.postMessage)),yy=typeof queueMicrotask<"u"?queueMicrotask.bind(Pr):typeof process<"u"&&process.nextTick||zf,vy=e=>e!=null&&Ge(e[co]),_={isArray:Sn,isArrayBuffer:Ef,isBuffer:Ag,isFormData:Wg,isArrayBufferView:Og,isString:$g,isNumber:Pf,isBoolean:Dg,isObject:fo,isPlainObject:fa,isReadableStream:Qg,isRequest:Gg,isResponse:Kg,isHeaders:Jg,isUndefined:vs,isDate:Ig,isFile:Ug,isBlob:Bg,isRegExp:cy,isFunction:Ge,isStream:Vg,isURLSearchParams:qg,isTypedArray:sy,isFileList:Hg,forEach:Cs,merge:Yl,extend:Xg,trim:Yg,stripBOM:Zg,inherits:ey,toFlatObject:ty,kindOf:uo,kindOfTest:yt,endsWith:ry,toArray:ny,forEachEntry:ay,matchAll:oy,isHTMLForm:ly,hasOwnProperty:_d,hasOwnProp:_d,reduceDescriptors:Rf,freezeMethods:dy,toObjectSet:uy,toCamelCase:iy,noop:my,toFiniteNumber:fy,findKey:_f,global:Pr,isContextDefined:Lf,isSpecCompliantForm:py,toJSONObject:hy,isAsyncFn:xy,isThenable:gy,setImmediate:zf,asap:yy,isIterable:vy};function ee(e,t,r,s,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),s&&(this.request=s),a&&(this.response=a,this.status=a.status?a.status:null)}_.inherits(ee,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_.toJSONObject(this.config),code:this.code,status:this.status}}});const Tf=ee.prototype,Ff={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Ff[e]={value:e}});Object.defineProperties(ee,Ff);Object.defineProperty(Tf,"isAxiosError",{value:!0});ee.from=(e,t,r,s,a,o)=>{const l=Object.create(Tf);return _.toFlatObject(e,l,function(c){return c!==Error.prototype},i=>i!=="isAxiosError"),ee.call(l,e.message,t,r,s,a),l.cause=e,l.name=e.name,o&&Object.assign(l,o),l};const by=null;function Xl(e){return _.isPlainObject(e)||_.isArray(e)}function Mf(e){return _.endsWith(e,"[]")?e.slice(0,-2):e}function Ld(e,t,r){return e?e.concat(t).map(function(a,o){return a=Mf(a),!r&&o?"["+a+"]":a}).join(r?".":""):t}function jy(e){return _.isArray(e)&&!e.some(Xl)}const wy=_.toFlatObject(_,{},null,function(t){return/^is[A-Z]/.test(t)});function po(e,t,r){if(!_.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=_.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,N){return!_.isUndefined(N[b])});const s=r.metaTokens,a=r.visitor||u,o=r.dots,l=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&_.isSpecCompliantForm(t);if(!_.isFunction(a))throw new TypeError("visitor must be a function");function d(v){if(v===null)return"";if(_.isDate(v))return v.toISOString();if(_.isBoolean(v))return v.toString();if(!c&&_.isBlob(v))throw new ee("Blob is not supported. Use a Buffer instead.");return _.isArrayBuffer(v)||_.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function u(v,b,N){let p=v;if(v&&!N&&typeof v=="object"){if(_.endsWith(b,"{}"))b=s?b:b.slice(0,-2),v=JSON.stringify(v);else if(_.isArray(v)&&jy(v)||(_.isFileList(v)||_.endsWith(b,"[]"))&&(p=_.toArray(v)))return b=Mf(b),p.forEach(function(g,C){!(_.isUndefined(g)||g===null)&&t.append(l===!0?Ld([b],C,o):l===null?b:b+"[]",d(g))}),!1}return Xl(v)?!0:(t.append(Ld(N,b,o),d(v)),!1)}const m=[],x=Object.assign(wy,{defaultVisitor:u,convertValue:d,isVisitable:Xl});function w(v,b){if(!_.isUndefined(v)){if(m.indexOf(v)!==-1)throw Error("Circular reference detected in "+b.join("."));m.push(v),_.forEach(v,function(p,h){(!(_.isUndefined(p)||p===null)&&a.call(t,p,_.isString(h)?h.trim():h,b,x))===!0&&w(p,b?b.concat(h):[h])}),m.pop()}}if(!_.isObject(e))throw new TypeError("data must be an object");return w(e),t}function Rd(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function sc(e,t){this._pairs=[],e&&po(e,this,t)}const Af=sc.prototype;Af.append=function(t,r){this._pairs.push([t,r])};Af.toString=function(t){const r=t?function(s){return t.call(this,s,Rd)}:Rd;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function Ny(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Of(e,t,r){if(!t)return e;const s=r&&r.encode||Ny;_.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let o;if(a?o=a(t,r):o=_.isURLSearchParams(t)?t.toString():new sc(t,r).toString(s),o){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class zd{constructor(){this.handlers=[]}use(t,r,s){return this.handlers.push({fulfilled:t,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){_.forEach(this.handlers,function(s){s!==null&&t(s)})}}const $f={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ky=typeof URLSearchParams<"u"?URLSearchParams:sc,Sy=typeof FormData<"u"?FormData:null,Cy=typeof Blob<"u"?Blob:null,Ey={isBrowser:!0,classes:{URLSearchParams:ky,FormData:Sy,Blob:Cy},protocols:["http","https","file","blob","url","data"]},ac=typeof window<"u"&&typeof document<"u",Zl=typeof navigator=="object"&&navigator||void 0,Py=ac&&(!Zl||["ReactNative","NativeScript","NS"].indexOf(Zl.product)<0),_y=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ly=ac&&window.location.href||"http://localhost",Ry=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ac,hasStandardBrowserEnv:Py,hasStandardBrowserWebWorkerEnv:_y,navigator:Zl,origin:Ly},Symbol.toStringTag,{value:"Module"})),Fe={...Ry,...Ey};function zy(e,t){return po(e,new Fe.classes.URLSearchParams,Object.assign({visitor:function(r,s,a,o){return Fe.isNode&&_.isBuffer(r)?(this.append(s,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function Ty(e){return _.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Fy(e){const t={},r=Object.keys(e);let s;const a=r.length;let o;for(s=0;s<a;s++)o=r[s],t[o]=e[o];return t}function Df(e){function t(r,s,a,o){let l=r[o++];if(l==="__proto__")return!0;const i=Number.isFinite(+l),c=o>=r.length;return l=!l&&_.isArray(a)?a.length:l,c?(_.hasOwnProp(a,l)?a[l]=[a[l],s]:a[l]=s,!i):((!a[l]||!_.isObject(a[l]))&&(a[l]=[]),t(r,s,a[l],o)&&_.isArray(a[l])&&(a[l]=Fy(a[l])),!i)}if(_.isFormData(e)&&_.isFunction(e.entries)){const r={};return _.forEachEntry(e,(s,a)=>{t(Ty(s),a,r,0)}),r}return null}function My(e,t,r){if(_.isString(e))try{return(t||JSON.parse)(e),_.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(e)}const Es={transitional:$f,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const s=r.getContentType()||"",a=s.indexOf("application/json")>-1,o=_.isObject(t);if(o&&_.isHTMLForm(t)&&(t=new FormData(t)),_.isFormData(t))return a?JSON.stringify(Df(t)):t;if(_.isArrayBuffer(t)||_.isBuffer(t)||_.isStream(t)||_.isFile(t)||_.isBlob(t)||_.isReadableStream(t))return t;if(_.isArrayBufferView(t))return t.buffer;if(_.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1)return zy(t,this.formSerializer).toString();if((i=_.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return po(i?{"files[]":t}:t,c&&new c,this.formSerializer)}}return o||a?(r.setContentType("application/json",!1),My(t)):t}],transformResponse:[function(t){const r=this.transitional||Es.transitional,s=r&&r.forcedJSONParsing,a=this.responseType==="json";if(_.isResponse(t)||_.isReadableStream(t))return t;if(t&&_.isString(t)&&(s&&!this.responseType||a)){const l=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(i){if(l)throw i.name==="SyntaxError"?ee.from(i,ee.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Fe.classes.FormData,Blob:Fe.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};_.forEach(["delete","get","head","post","put","patch"],e=>{Es.headers[e]={}});const Ay=_.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Oy=e=>{const t={};let r,s,a;return e&&e.split(`
`).forEach(function(l){a=l.indexOf(":"),r=l.substring(0,a).trim().toLowerCase(),s=l.substring(a+1).trim(),!(!r||t[r]&&Ay[r])&&(r==="set-cookie"?t[r]?t[r].push(s):t[r]=[s]:t[r]=t[r]?t[r]+", "+s:s)}),t},Td=Symbol("internals");function On(e){return e&&String(e).trim().toLowerCase()}function pa(e){return e===!1||e==null?e:_.isArray(e)?e.map(pa):String(e)}function $y(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(e);)t[s[1]]=s[2];return t}const Dy=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Ko(e,t,r,s,a){if(_.isFunction(s))return s.call(this,t,r);if(a&&(t=r),!!_.isString(t)){if(_.isString(s))return t.indexOf(s)!==-1;if(_.isRegExp(s))return s.test(t)}}function Iy(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,s)=>r.toUpperCase()+s)}function Uy(e,t){const r=_.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+r,{value:function(a,o,l){return this[s].call(this,t,a,o,l)},configurable:!0})})}let Ke=class{constructor(t){t&&this.set(t)}set(t,r,s){const a=this;function o(i,c,d){const u=On(c);if(!u)throw new Error("header name must be a non-empty string");const m=_.findKey(a,u);(!m||a[m]===void 0||d===!0||d===void 0&&a[m]!==!1)&&(a[m||c]=pa(i))}const l=(i,c)=>_.forEach(i,(d,u)=>o(d,u,c));if(_.isPlainObject(t)||t instanceof this.constructor)l(t,r);else if(_.isString(t)&&(t=t.trim())&&!Dy(t))l(Oy(t),r);else if(_.isObject(t)&&_.isIterable(t)){let i={},c,d;for(const u of t){if(!_.isArray(u))throw TypeError("Object iterator must return a key-value pair");i[d=u[0]]=(c=i[d])?_.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}l(i,r)}else t!=null&&o(r,t,s);return this}get(t,r){if(t=On(t),t){const s=_.findKey(this,t);if(s){const a=this[s];if(!r)return a;if(r===!0)return $y(a);if(_.isFunction(r))return r.call(this,a,s);if(_.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=On(t),t){const s=_.findKey(this,t);return!!(s&&this[s]!==void 0&&(!r||Ko(this,this[s],s,r)))}return!1}delete(t,r){const s=this;let a=!1;function o(l){if(l=On(l),l){const i=_.findKey(s,l);i&&(!r||Ko(s,s[i],i,r))&&(delete s[i],a=!0)}}return _.isArray(t)?t.forEach(o):o(t),a}clear(t){const r=Object.keys(this);let s=r.length,a=!1;for(;s--;){const o=r[s];(!t||Ko(this,this[o],o,t,!0))&&(delete this[o],a=!0)}return a}normalize(t){const r=this,s={};return _.forEach(this,(a,o)=>{const l=_.findKey(s,o);if(l){r[l]=pa(a),delete r[o];return}const i=t?Iy(o):String(o).trim();i!==o&&delete r[o],r[i]=pa(a),s[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return _.forEach(this,(s,a)=>{s!=null&&s!==!1&&(r[a]=t&&_.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const s=new this(t);return r.forEach(a=>s.set(a)),s}static accessor(t){const s=(this[Td]=this[Td]={accessors:{}}).accessors,a=this.prototype;function o(l){const i=On(l);s[i]||(Uy(a,l),s[i]=!0)}return _.isArray(t)?t.forEach(o):o(t),this}};Ke.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);_.reduceDescriptors(Ke.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[r]=s}}});_.freezeMethods(Ke);function Jo(e,t){const r=this||Es,s=t||r,a=Ke.from(s.headers);let o=s.data;return _.forEach(e,function(i){o=i.call(r,o,a.normalize(),t?t.status:void 0)}),a.normalize(),o}function If(e){return!!(e&&e.__CANCEL__)}function Cn(e,t,r){ee.call(this,e??"canceled",ee.ERR_CANCELED,t,r),this.name="CanceledError"}_.inherits(Cn,ee,{__CANCEL__:!0});function Uf(e,t,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?e(r):t(new ee("Request failed with status code "+r.status,[ee.ERR_BAD_REQUEST,ee.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function By(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Hy(e,t){e=e||10;const r=new Array(e),s=new Array(e);let a=0,o=0,l;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=s[o];l||(l=d),r[a]=c,s[a]=d;let m=o,x=0;for(;m!==a;)x+=r[m++],m=m%e;if(a=(a+1)%e,a===o&&(o=(o+1)%e),d-l<t)return;const w=u&&d-u;return w?Math.round(x*1e3/w):void 0}}function Vy(e,t){let r=0,s=1e3/t,a,o;const l=(d,u=Date.now())=>{r=u,a=null,o&&(clearTimeout(o),o=null),e.apply(null,d)};return[(...d)=>{const u=Date.now(),m=u-r;m>=s?l(d,u):(a=d,o||(o=setTimeout(()=>{o=null,l(a)},s-m)))},()=>a&&l(a)]}const Ba=(e,t,r=3)=>{let s=0;const a=Hy(50,250);return Vy(o=>{const l=o.loaded,i=o.lengthComputable?o.total:void 0,c=l-s,d=a(c),u=l<=i;s=l;const m={loaded:l,total:i,progress:i?l/i:void 0,bytes:c,rate:d||void 0,estimated:d&&i&&u?(i-l)/d:void 0,event:o,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(m)},r)},Fd=(e,t)=>{const r=e!=null;return[s=>t[0]({lengthComputable:r,total:e,loaded:s}),t[1]]},Md=e=>(...t)=>_.asap(()=>e(...t)),Wy=Fe.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Fe.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Fe.origin),Fe.navigator&&/(msie|trident)/i.test(Fe.navigator.userAgent)):()=>!0,qy=Fe.hasStandardBrowserEnv?{write(e,t,r,s,a,o){const l=[e+"="+encodeURIComponent(t)];_.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),_.isString(s)&&l.push("path="+s),_.isString(a)&&l.push("domain="+a),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Qy(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Gy(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Bf(e,t,r){let s=!Qy(t);return e&&(s||r==!1)?Gy(e,t):t}const Ad=e=>e instanceof Ke?{...e}:e;function Or(e,t){t=t||{};const r={};function s(d,u,m,x){return _.isPlainObject(d)&&_.isPlainObject(u)?_.merge.call({caseless:x},d,u):_.isPlainObject(u)?_.merge({},u):_.isArray(u)?u.slice():u}function a(d,u,m,x){if(_.isUndefined(u)){if(!_.isUndefined(d))return s(void 0,d,m,x)}else return s(d,u,m,x)}function o(d,u){if(!_.isUndefined(u))return s(void 0,u)}function l(d,u){if(_.isUndefined(u)){if(!_.isUndefined(d))return s(void 0,d)}else return s(void 0,u)}function i(d,u,m){if(m in t)return s(d,u);if(m in e)return s(void 0,d)}const c={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:i,headers:(d,u,m)=>a(Ad(d),Ad(u),m,!0)};return _.forEach(Object.keys(Object.assign({},e,t)),function(u){const m=c[u]||a,x=m(e[u],t[u],u);_.isUndefined(x)&&m!==i||(r[u]=x)}),r}const Hf=e=>{const t=Or({},e);let{data:r,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:o,headers:l,auth:i}=t;t.headers=l=Ke.from(l),t.url=Of(Bf(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&l.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):"")));let c;if(_.isFormData(r)){if(Fe.hasStandardBrowserEnv||Fe.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((c=l.getContentType())!==!1){const[d,...u]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];l.setContentType([d||"multipart/form-data",...u].join("; "))}}if(Fe.hasStandardBrowserEnv&&(s&&_.isFunction(s)&&(s=s(t)),s||s!==!1&&Wy(t.url))){const d=a&&o&&qy.read(o);d&&l.set(a,d)}return t},Ky=typeof XMLHttpRequest<"u",Jy=Ky&&function(e){return new Promise(function(r,s){const a=Hf(e);let o=a.data;const l=Ke.from(a.headers).normalize();let{responseType:i,onUploadProgress:c,onDownloadProgress:d}=a,u,m,x,w,v;function b(){w&&w(),v&&v(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let N=new XMLHttpRequest;N.open(a.method.toUpperCase(),a.url,!0),N.timeout=a.timeout;function p(){if(!N)return;const g=Ke.from("getAllResponseHeaders"in N&&N.getAllResponseHeaders()),P={data:!i||i==="text"||i==="json"?N.responseText:N.response,status:N.status,statusText:N.statusText,headers:g,config:e,request:N};Uf(function(E){r(E),b()},function(E){s(E),b()},P),N=null}"onloadend"in N?N.onloadend=p:N.onreadystatechange=function(){!N||N.readyState!==4||N.status===0&&!(N.responseURL&&N.responseURL.indexOf("file:")===0)||setTimeout(p)},N.onabort=function(){N&&(s(new ee("Request aborted",ee.ECONNABORTED,e,N)),N=null)},N.onerror=function(){s(new ee("Network Error",ee.ERR_NETWORK,e,N)),N=null},N.ontimeout=function(){let C=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const P=a.transitional||$f;a.timeoutErrorMessage&&(C=a.timeoutErrorMessage),s(new ee(C,P.clarifyTimeoutError?ee.ETIMEDOUT:ee.ECONNABORTED,e,N)),N=null},o===void 0&&l.setContentType(null),"setRequestHeader"in N&&_.forEach(l.toJSON(),function(C,P){N.setRequestHeader(P,C)}),_.isUndefined(a.withCredentials)||(N.withCredentials=!!a.withCredentials),i&&i!=="json"&&(N.responseType=a.responseType),d&&([x,v]=Ba(d,!0),N.addEventListener("progress",x)),c&&N.upload&&([m,w]=Ba(c),N.upload.addEventListener("progress",m),N.upload.addEventListener("loadend",w)),(a.cancelToken||a.signal)&&(u=g=>{N&&(s(!g||g.type?new Cn(null,e,N):g),N.abort(),N=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const h=By(a.url);if(h&&Fe.protocols.indexOf(h)===-1){s(new ee("Unsupported protocol "+h+":",ee.ERR_BAD_REQUEST,e));return}N.send(o||null)})},Yy=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let s=new AbortController,a;const o=function(d){if(!a){a=!0,i();const u=d instanceof Error?d:this.reason;s.abort(u instanceof ee?u:new Cn(u instanceof Error?u.message:u))}};let l=t&&setTimeout(()=>{l=null,o(new ee(`timeout ${t} of ms exceeded`,ee.ETIMEDOUT))},t);const i=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(o):d.removeEventListener("abort",o)}),e=null)};e.forEach(d=>d.addEventListener("abort",o));const{signal:c}=s;return c.unsubscribe=()=>_.asap(i),c}},Xy=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let s=0,a;for(;s<r;)a=s+t,yield e.slice(s,a),s=a},Zy=async function*(e,t){for await(const r of ev(e))yield*Xy(r,t)},ev=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:s}=await t.read();if(r)break;yield s}}finally{await t.cancel()}},Od=(e,t,r,s)=>{const a=Zy(e,t);let o=0,l,i=c=>{l||(l=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await a.next();if(d){i(),c.close();return}let m=u.byteLength;if(r){let x=o+=m;r(x)}c.enqueue(new Uint8Array(u))}catch(d){throw i(d),d}},cancel(c){return i(c),a.return()}},{highWaterMark:2})},ho=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Vf=ho&&typeof ReadableStream=="function",tv=ho&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Wf=(e,...t)=>{try{return!!e(...t)}catch{return!1}},rv=Vf&&Wf(()=>{let e=!1;const t=new Request(Fe.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),$d=64*1024,ei=Vf&&Wf(()=>_.isReadableStream(new Response("").body)),Ha={stream:ei&&(e=>e.body)};ho&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Ha[t]&&(Ha[t]=_.isFunction(e[t])?r=>r[t]():(r,s)=>{throw new ee(`Response type '${t}' is not supported`,ee.ERR_NOT_SUPPORT,s)})})})(new Response);const nv=async e=>{if(e==null)return 0;if(_.isBlob(e))return e.size;if(_.isSpecCompliantForm(e))return(await new Request(Fe.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(_.isArrayBufferView(e)||_.isArrayBuffer(e))return e.byteLength;if(_.isURLSearchParams(e)&&(e=e+""),_.isString(e))return(await tv(e)).byteLength},sv=async(e,t)=>{const r=_.toFiniteNumber(e.getContentLength());return r??nv(t)},av=ho&&(async e=>{let{url:t,method:r,data:s,signal:a,cancelToken:o,timeout:l,onDownloadProgress:i,onUploadProgress:c,responseType:d,headers:u,withCredentials:m="same-origin",fetchOptions:x}=Hf(e);d=d?(d+"").toLowerCase():"text";let w=Yy([a,o&&o.toAbortSignal()],l),v;const b=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let N;try{if(c&&rv&&r!=="get"&&r!=="head"&&(N=await sv(u,s))!==0){let P=new Request(t,{method:"POST",body:s,duplex:"half"}),y;if(_.isFormData(s)&&(y=P.headers.get("content-type"))&&u.setContentType(y),P.body){const[E,L]=Fd(N,Ba(Md(c)));s=Od(P.body,$d,E,L)}}_.isString(m)||(m=m?"include":"omit");const p="credentials"in Request.prototype;v=new Request(t,{...x,signal:w,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:s,duplex:"half",credentials:p?m:void 0});let h=await fetch(v,x);const g=ei&&(d==="stream"||d==="response");if(ei&&(i||g&&b)){const P={};["status","statusText","headers"].forEach(k=>{P[k]=h[k]});const y=_.toFiniteNumber(h.headers.get("content-length")),[E,L]=i&&Fd(y,Ba(Md(i),!0))||[];h=new Response(Od(h.body,$d,E,()=>{L&&L(),b&&b()}),P)}d=d||"text";let C=await Ha[_.findKey(Ha,d)||"text"](h,e);return!g&&b&&b(),await new Promise((P,y)=>{Uf(P,y,{data:C,headers:Ke.from(h.headers),status:h.status,statusText:h.statusText,config:e,request:v})})}catch(p){throw b&&b(),p&&p.name==="TypeError"&&/Load failed|fetch/i.test(p.message)?Object.assign(new ee("Network Error",ee.ERR_NETWORK,e,v),{cause:p.cause||p}):ee.from(p,p&&p.code,e,v)}}),ti={http:by,xhr:Jy,fetch:av};_.forEach(ti,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Dd=e=>`- ${e}`,ov=e=>_.isFunction(e)||e===null||e===!1,qf={getAdapter:e=>{e=_.isArray(e)?e:[e];const{length:t}=e;let r,s;const a={};for(let o=0;o<t;o++){r=e[o];let l;if(s=r,!ov(r)&&(s=ti[(l=String(r)).toLowerCase()],s===void 0))throw new ee(`Unknown adapter '${l}'`);if(s)break;a[l||"#"+o]=s}if(!s){const o=Object.entries(a).map(([i,c])=>`adapter ${i} `+(c===!1?"is not supported by the environment":"is not available in the build"));let l=t?o.length>1?`since :
`+o.map(Dd).join(`
`):" "+Dd(o[0]):"as no adapter specified";throw new ee("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return s},adapters:ti};function Yo(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Cn(null,e)}function Id(e){return Yo(e),e.headers=Ke.from(e.headers),e.data=Jo.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),qf.getAdapter(e.adapter||Es.adapter)(e).then(function(s){return Yo(e),s.data=Jo.call(e,e.transformResponse,s),s.headers=Ke.from(s.headers),s},function(s){return If(s)||(Yo(e),s&&s.response&&(s.response.data=Jo.call(e,e.transformResponse,s.response),s.response.headers=Ke.from(s.response.headers))),Promise.reject(s)})}const Qf="1.10.0",xo={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{xo[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const Ud={};xo.transitional=function(t,r,s){function a(o,l){return"[Axios v"+Qf+"] Transitional option '"+o+"'"+l+(s?". "+s:"")}return(o,l,i)=>{if(t===!1)throw new ee(a(l," has been removed"+(r?" in "+r:"")),ee.ERR_DEPRECATED);return r&&!Ud[l]&&(Ud[l]=!0,console.warn(a(l," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,l,i):!0}};xo.spelling=function(t){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function lv(e,t,r){if(typeof e!="object")throw new ee("options must be an object",ee.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let a=s.length;for(;a-- >0;){const o=s[a],l=t[o];if(l){const i=e[o],c=i===void 0||l(i,o,e);if(c!==!0)throw new ee("option "+o+" must be "+c,ee.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ee("Unknown option "+o,ee.ERR_BAD_OPTION)}}const ha={assertOptions:lv,validators:xo},jt=ha.validators;let Rr=class{constructor(t){this.defaults=t||{},this.interceptors={request:new zd,response:new zd}}async request(t,r){try{return await this._request(t,r)}catch(s){if(s instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const o=a.stack?a.stack.replace(/^.+\n/,""):"";try{s.stack?o&&!String(s.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+o):s.stack=o}catch{}}throw s}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Or(this.defaults,r);const{transitional:s,paramsSerializer:a,headers:o}=r;s!==void 0&&ha.assertOptions(s,{silentJSONParsing:jt.transitional(jt.boolean),forcedJSONParsing:jt.transitional(jt.boolean),clarifyTimeoutError:jt.transitional(jt.boolean)},!1),a!=null&&(_.isFunction(a)?r.paramsSerializer={serialize:a}:ha.assertOptions(a,{encode:jt.function,serialize:jt.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),ha.assertOptions(r,{baseUrl:jt.spelling("baseURL"),withXsrfToken:jt.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=o&&_.merge(o.common,o[r.method]);o&&_.forEach(["delete","get","head","post","put","patch","common"],v=>{delete o[v]}),r.headers=Ke.concat(l,o);const i=[];let c=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(r)===!1||(c=c&&b.synchronous,i.unshift(b.fulfilled,b.rejected))});const d=[];this.interceptors.response.forEach(function(b){d.push(b.fulfilled,b.rejected)});let u,m=0,x;if(!c){const v=[Id.bind(this),void 0];for(v.unshift.apply(v,i),v.push.apply(v,d),x=v.length,u=Promise.resolve(r);m<x;)u=u.then(v[m++],v[m++]);return u}x=i.length;let w=r;for(m=0;m<x;){const v=i[m++],b=i[m++];try{w=v(w)}catch(N){b.call(this,N);break}}try{u=Id.call(this,w)}catch(v){return Promise.reject(v)}for(m=0,x=d.length;m<x;)u=u.then(d[m++],d[m++]);return u}getUri(t){t=Or(this.defaults,t);const r=Bf(t.baseURL,t.url,t.allowAbsoluteUrls);return Of(r,t.params,t.paramsSerializer)}};_.forEach(["delete","get","head","options"],function(t){Rr.prototype[t]=function(r,s){return this.request(Or(s||{},{method:t,url:r,data:(s||{}).data}))}});_.forEach(["post","put","patch"],function(t){function r(s){return function(o,l,i){return this.request(Or(i||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}Rr.prototype[t]=r(),Rr.prototype[t+"Form"]=r(!0)});let iv=class Gf{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const s=this;this.promise.then(a=>{if(!s._listeners)return;let o=s._listeners.length;for(;o-- >0;)s._listeners[o](a);s._listeners=null}),this.promise.then=a=>{let o;const l=new Promise(i=>{s.subscribe(i),o=i}).then(a);return l.cancel=function(){s.unsubscribe(o)},l},t(function(o,l,i){s.reason||(s.reason=new Cn(o,l,i),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=s=>{t.abort(s)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Gf(function(a){t=a}),cancel:t}}};function cv(e){return function(r){return e.apply(null,r)}}function dv(e){return _.isObject(e)&&e.isAxiosError===!0}const ri={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ri).forEach(([e,t])=>{ri[t]=e});function Kf(e){const t=new Rr(e),r=Sf(Rr.prototype.request,t);return _.extend(r,Rr.prototype,t,{allOwnKeys:!0}),_.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return Kf(Or(e,a))},r}const be=Kf(Es);be.Axios=Rr;be.CanceledError=Cn;be.CancelToken=iv;be.isCancel=If;be.VERSION=Qf;be.toFormData=po;be.AxiosError=ee;be.Cancel=be.CanceledError;be.all=function(t){return Promise.all(t)};be.spread=cv;be.isAxiosError=dv;be.mergeConfig=Or;be.AxiosHeaders=Ke;be.formToJSON=e=>Df(_.isHTMLForm(e)?new FormData(e):e);be.getAdapter=qf.getAdapter;be.HttpStatusCode=ri;be.default=be;const{Axios:Qb,AxiosError:Gb,CanceledError:Kb,isCancel:Jb,CancelToken:Yb,VERSION:Xb,all:Zb,Cancel:e1,isAxiosError:t1,spread:r1,toFormData:n1,AxiosHeaders:s1,HttpStatusCode:a1,formToJSON:o1,getAdapter:l1,mergeConfig:i1}=be,uv="https://sf-alumnos-backend-production.up.railway.app/api",H=be.create({baseURL:uv,headers:{"Content-Type":"application/json"}});H.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));H.interceptors.response.use(e=>e,e=>{var t;return((t=e.response)==null?void 0:t.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("usuario"),window.location.pathname!=="/login"&&(window.location.href="/login")),Promise.reject(e)});const Ve={obtenerTodos:()=>H.get("/usuarios"),obtenerPorId:e=>H.get(`/usuarios/${e}`),crear:e=>H.post("/usuarios",e),actualizar:(e,t)=>H.put(`/usuarios/${e}`,t),eliminar:e=>H.delete(`/usuarios/${e}`),cambiarEstado:(e,t)=>H.patch(`/usuarios/${e}/estado`,{activo:t}),eliminarCompleto:e=>H.delete(`/usuarios/${e}/completo`),login:e=>H.post("/auth/login",e),cambiarContrasena:(e,t)=>H.put(`/usuarios/${e}/cambiar-contrasena`,t),obtenerFavoritos:e=>H.get(`/usuarios/${e}/favoritos`),agregarFavorito:(e,t)=>H.post(`/usuarios/${e}/favoritos/${t}`),quitarFavorito:(e,t)=>H.delete(`/usuarios/${e}/favoritos/${t}`),alternarFavorito:(e,t)=>H.put(`/usuarios/${e}/favoritos/${t}`)},Hn={obtenerTodos:()=>H.get("/pagos"),obtenerPorUsuario:e=>H.get(`/pagos/usuario/${e}`),crear:e=>H.post("/pagos",e),actualizar:(e,t)=>H.put(`/pagos/${e}`,t),eliminar:e=>H.delete(`/pagos/${e}`),agregarClases:(e,t)=>H.post(`/pagos/${e}/clases`,{fechasClases:t})},kt={obtenerTodas:()=>H.get("/clases"),obtenerEstudiantesPorDia:()=>H.get("/clases/estudiantes-por-dia"),obtenerPorUsuario:e=>H.get(`/clases/usuario/${e}`),obtenerPorPago:e=>H.get(`/clases/pago/${e}`),obtenerSeparadas:e=>H.get(`/clases/usuario/${e}/separadas`),obtenerResumen:e=>H.get(`/clases/resumen/${e}`),obtenerPorFecha:e=>H.get(`/clases/fecha/${e}`),actualizarEstado:(e,t)=>H.put(`/clases/${e}/estado`,t)},sn={obtenerTodas:()=>H.get("/partituras"),buscar:e=>H.get(`/partituras/buscar?q=${encodeURIComponent(e)}`),obtenerPorCompositor:e=>H.get(`/partituras/compositor/${encodeURIComponent(e)}`),crear:e=>H.post("/partituras",e),actualizar:(e,t)=>H.put(`/partituras/${e}`,t),eliminar:e=>H.delete(`/partituras/${e}`)},mn={obtenerPorClase:e=>H.get(`/resumenes-clase/clase/${e}`),obtenerPorUsuario:(e,t={})=>{const r=new URLSearchParams(t).toString();return H.get(`/resumenes-clase/usuario/${e}${r?`?${r}`:""}`)},obtenerEstadisticas:e=>H.get(`/resumenes-clase/estadisticas/${e}`),crearOActualizar:e=>H.post("/resumenes-clase",e),eliminar:e=>H.delete(`/resumenes-clase/${e}`)},Jf={login:async e=>{try{return(await H.post("/auth/login",e)).data}catch(t){throw console.error("Error en login:",t),t}},obtenerPerfil:async()=>{try{return(await H.get("/auth/perfil")).data}catch(e){throw console.error("Error al obtener perfil:",e),e}},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("usuario")},isAuthenticated:()=>!!localStorage.getItem("token"),getToken:()=>localStorage.getItem("token"),getUsuario:()=>{const e=localStorage.getItem("usuario");return e?JSON.parse(e):null},guardarSession:(e,t)=>{localStorage.setItem("token",e),localStorage.setItem("usuario",JSON.stringify(t))}},Yf=!1,mv=!1,fv=!1;class pv{constructor(){this.isDev=Yf,this.allowDebug=this.isDev&&mv,this.allowSensitive=this.isDev&&fv}dev(...t){this.allowDebug&&console.log("[DEV]",...t)}info(t,...r){this.isDev?console.log("ℹ️",t,...r):console.log("ℹ️",t)}success(t,...r){this.isDev?console.log("✅",t,...r):console.log("✅",t)}warn(t,...r){this.isDev?console.warn("⚠️",t,...r):console.warn("⚠️",t)}error(t,r=null){this.isDev?console.error("❌",t,r):(console.error("❌",t),r&&r.message&&console.error("Error:",r.message))}debug(t,r){this.allowDebug&&console.log(`🔍 ${t}:`,r)}sensitive(t,r){this.allowSensitive&&console.log(`🔒 ${t}:`,r)}perf(t,r){this.allowDebug&&console.log(`⏱️ ${t}: ${r}ms`)}group(t,r){this.allowDebug&&(console.group(t),r(),console.groupEnd())}}const I=new pv,hv=Yf,Xf=f.createContext(),Je=()=>{const e=f.useContext(Xf);if(!e)throw new Error("useAuth debe ser usado dentro de un AuthProvider");return e},xv=({children:e})=>{const[t,r]=f.useState(null),[s,a]=f.useState(!0);f.useEffect(()=>{const u=localStorage.getItem("token"),m=localStorage.getItem("usuario");u&&m&&r(JSON.parse(m)),a(!1)},[]);const d={usuario:t,login:async(u,m)=>{var x,w,v;try{I.sensitive("Intentando login con:",{email:u,password:"***"}),I.debug("API URL:","https://sf-alumnos-backend-production.up.railway.app/api");const b=await Jf.login({email:u,password:m});I.sensitive("Respuesta del servidor:",b);const{token:N,usuario:p}=b;return localStorage.setItem("token",N),localStorage.setItem("usuario",JSON.stringify(p)),r(p),I.sensitive("Usuario logueado:",p),{success:!0}}catch(b){return I.error("Error en login:",b),I.error("Detalles del error:",(x=b.response)==null?void 0:x.data),{success:!1,error:((v=(w=b.response)==null?void 0:w.data)==null?void 0:v.message)||"Error al iniciar sesión"}}},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("usuario"),r(null)},isAdmin:()=>(t==null?void 0:t.rol)==="administrador",isAuthenticated:()=>t!==null,loading:s};return n.jsx(Xf.Provider,{value:d,children:e})},gv=()=>{const[e,t]=f.useState({email:"",password:""}),[r,s]=f.useState(""),[a,o]=f.useState(!1),{login:l}=Je(),i=d=>{t({...e,[d.target.name]:d.target.value})},c=async d=>{d.preventDefault(),o(!0),s("");const u=await l(e.email,e.password);u.success||s(u.error),o(!1)};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"max-w-md w-full space-y-8",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sistema de Gestión de Alumnos"}),n.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Ingresa tus credenciales para acceder"})]}),n.jsxs("form",{className:"mt-8 space-y-6",onSubmit:c,children:[n.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),n.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email",value:e.email,onChange:i})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"password",className:"sr-only",children:"Contraseña"}),n.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Contraseña",value:e.password,onChange:i})]})]}),r&&n.jsx("div",{className:"text-red-600 text-sm text-center",children:r}),n.jsx("div",{children:n.jsx("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:a?"Ingresando...":"Ingresar"})})]})]})})},yv=()=>{const{usuario:e,isAdmin:t}=Je();return n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Bienvenido, ",e==null?void 0:e.nombre,"!"]}),n.jsx("p",{className:"text-gray-600",children:t()?"Panel de administración":"Tu espacio personal de aprendizaje"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-xl shadow-sm border border-blue-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-blue-900 mb-3 flex items-center",children:[n.jsx("span",{className:"mr-2",children:"👤"}),"Tu Perfil"]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("p",{className:"text-blue-700",children:[n.jsx("span",{className:"font-medium",children:"Nombre:"})," ",e==null?void 0:e.nombre," ",e==null?void 0:e.apellido]}),n.jsxs("p",{className:"text-blue-700",children:[n.jsx("span",{className:"font-medium",children:"Email:"})," ",e==null?void 0:e.email]}),n.jsxs("p",{className:"text-blue-700",children:[n.jsx("span",{className:"font-medium",children:"Rol:"}),n.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t()?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:e==null?void 0:e.rol})]})]})]}),t()&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-xl shadow-sm border border-green-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-green-900 mb-3 flex items-center",children:[n.jsx("span",{className:"mr-2",children:"👥"}),"Gestión de Usuarios"]}),n.jsx("p",{className:"text-green-700 mb-4",children:"Administra los usuarios del sistema"}),n.jsx(pt,{to:"/usuarios",className:"inline-block bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"Ver Usuarios"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-xl shadow-sm border border-purple-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-purple-900 mb-3 flex items-center",children:[n.jsx("span",{className:"mr-2",children:"📊"}),"Sesiones Compartidas"]}),n.jsx("p",{className:"text-purple-700 mb-4",children:"Revisa las sesiones de estudio que los alumnos han compartido contigo"}),n.jsx(pt,{to:"/sesiones-compartidas",className:"inline-block bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"Ver Sesiones"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-xl shadow-sm border border-green-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-green-900 mb-3 flex items-center",children:[n.jsx("span",{className:"mr-2",children:"⚙️"}),"Panel de Administración"]}),n.jsx("p",{className:"text-green-700 mb-4",children:"Acceso completo al sistema"}),n.jsx("span",{className:"inline-block bg-green-600 text-white px-4 py-2 rounded-lg text-sm",children:"Administrador"})]})]}),!t()&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-xl shadow-sm border border-blue-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-blue-900 mb-3 flex items-center",children:[n.jsx("span",{className:"mr-2",children:"🎼"}),"Partituras"]}),n.jsx("p",{className:"text-blue-700 mb-4",children:"Explora y marca tus partituras favoritas"}),n.jsx(pt,{to:"/partituras",className:"inline-block bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"Ver Partituras"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-xl shadow-sm border border-green-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-green-900 mb-3 flex items-center",children:[n.jsx("span",{className:"mr-2",children:"📚"}),"Mis Clases"]}),n.jsx("p",{className:"text-green-700 mb-4",children:"Revisa el resumen de tus clases anteriores"}),n.jsx(pt,{to:"/mis-clases",className:"inline-block bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"Ver Mis Clases"})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 p-6 rounded-xl shadow-sm border border-indigo-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-indigo-900 mb-3 flex items-center",children:[n.jsx("span",{className:"mr-2",children:"🔒"}),"Seguridad"]}),n.jsx("p",{className:"text-indigo-700 mb-4",children:"Cambia tu contraseña cuando sea necesario"}),n.jsx(pt,{to:"/cambiar-contrasena",className:"inline-block bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"Cambiar Contraseña"})]})]}),n.jsxs("div",{className:"mt-8 bg-gradient-to-r from-yellow-50 to-amber-50 p-6 rounded-xl shadow-sm border border-yellow-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-yellow-900 mb-3 flex items-center",children:[n.jsx("span",{className:"mr-2",children:"💡"}),"Información Importante"]}),n.jsx("p",{className:"text-yellow-700",children:(e==null?void 0:e.rol)==="usuario"?"Si esta es tu primera vez ingresando, recuerda cambiar tu contraseña provisional.":"Como administrador, puedes gestionar todos los usuarios del sistema."})]})]})},vv=({usuario:e,onSubmit:t,onCancel:r})=>{const[s,a]=f.useState({nombre:"",apellido:"",email:"",telefono:"",password:"",rol:"usuario"}),[o,l]=f.useState(!1),[i,c]=f.useState("");f.useEffect(()=>{e&&a({nombre:e.nombre||"",apellido:e.apellido||"",email:e.email||"",telefono:e.telefono||"",password:"",rol:e.rol||"usuario"})},[e]);const d=m=>{a({...s,[m.target.name]:m.target.value})},u=async m=>{var x,w;m.preventDefault(),l(!0),c("");try{if(e){const v={...s};v.password||delete v.password,await Ve.actualizar(e._id,v)}else await Ve.crear(s);t()}catch(v){c(((w=(x=v.response)==null?void 0:x.data)==null?void 0:w.message)||"Error al guardar usuario")}finally{l(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:n.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:n.jsxs("div",{className:"mt-3",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 text-center mb-4",children:e?"Editar Usuario":"Nuevo Usuario"}),n.jsxs("form",{onSubmit:u,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre"}),n.jsx("input",{type:"text",name:"nombre",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:s.nombre,onChange:d})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Apellido"}),n.jsx("input",{type:"text",name:"apellido",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:s.apellido,onChange:d})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),n.jsx("input",{type:"email",name:"email",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:s.email,onChange:d})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Teléfono (WhatsApp)"}),n.jsx("input",{type:"tel",name:"telefono",placeholder:"Ej: +54911234567, +1234567890, 15234567",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:s.telefono,onChange:d}),n.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Incluye código de país completo (ej: +54 para Argentina, +1 para USA)"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e?"Nueva Contraseña (dejar vacío para no cambiar)":"Contraseña Provisoria"}),n.jsx("input",{type:"password",name:"password",required:!e,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:s.password,onChange:d})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Rol"}),n.jsxs("select",{name:"rol",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:s.rol,onChange:d,children:[n.jsx("option",{value:"usuario",children:"Usuario"}),n.jsx("option",{value:"administrador",children:"Administrador"})]})]}),i&&n.jsx("div",{className:"text-red-600 text-sm",children:i}),n.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[n.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancelar"}),n.jsx("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:o?"Guardando...":"Guardar"})]})]})]})})})},$r=({title:e="Cargando...",subtitle:t=null,showRenderMessage:r=!1,size:s="large"})=>{const[a,o]=f.useState(!1);f.useEffect(()=>{if(r){const c=setTimeout(()=>{o(!0)},3e3);return()=>clearTimeout(c)}},[r]);const l={small:"h-8 w-8",medium:"h-12 w-12",large:"h-16 w-16"},i={small:"min-h-32",medium:"min-h-48",large:"min-h-64"};return n.jsx("div",{className:`flex justify-center items-center ${i[s]}`,children:n.jsxs("div",{className:"text-center max-w-md mx-auto px-4",children:[n.jsxs("div",{className:"relative mb-6",children:[n.jsxs("div",{className:`${l[s]} mx-auto relative`,children:[n.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-indigo-100 dark:border-gray-700"}),n.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-transparent border-t-indigo-500 animate-spin"})]}),n.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:n.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"})})]}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e}),t&&n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:t}),r&&n.jsx("div",{className:`transition-all duration-500 ${a?"opacity-100 transform translate-y-0":"opacity-0 transform translate-y-2"}`,children:n.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("svg",{className:"w-5 h-5 text-blue-500 mt-0.5 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),n.jsxs("div",{className:"text-sm",children:[n.jsx("p",{className:"font-medium text-blue-800 dark:text-blue-200 mb-1",children:"Despertando el servidor..."}),n.jsx("p",{className:"text-blue-700 dark:text-blue-300",children:"El servidor está iniciando en Render.com. Esto puede tomar unos momentos la primera vez."})]})]})})}),n.jsxs("div",{className:"flex justify-center space-x-1 mt-4",children:[n.jsx("div",{className:"w-2 h-2 bg-indigo-400 rounded-full animate-bounce"}),n.jsx("div",{className:"w-2 h-2 bg-indigo-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),n.jsx("div",{className:"w-2 h-2 bg-indigo-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})},bv=()=>{const[e,t]=f.useState([]),[r,s]=f.useState(!0),[a,o]=f.useState(""),[l,i]=f.useState(!1),[c,d]=f.useState(null),[u,m]=f.useState(null),[x,w]=f.useState(null),[v,b]=f.useState({}),{isAdmin:N}=Je();f.useEffect(()=>{p()},[]);const p=async()=>{try{s(!0);const k=await Ve.obtenerTodos();t(k.data)}catch{o("Error al cargar usuarios")}finally{s(!1)}},h=()=>{d(null),i(!0)},g=k=>{d(k),i(!0)},C=async k=>{try{await Ve.eliminar(k),t(e.filter(S=>S._id!==k)),m(null)}catch{o("Error al eliminar usuario")}},P=async(k,S)=>{try{b(j=>({...j,[k]:!0})),await Ve.cambiarEstado(k,S),t(e.map(j=>j._id===k?{...j,activo:S}:j))}catch{o(`Error al ${S?"reactivar":"pausar"} usuario`)}finally{b(j=>({...j,[k]:!1}))}},y=async k=>{try{b(j=>({...j,[k]:!0}));const S=await Ve.eliminarCompleto(k);if(t(e.filter(j=>j._id!==k)),w(null),S.data.estadisticas){const j=S.data.estadisticas;alert(`Usuario "${j.usuario}" eliminado completamente.
Clases eliminadas: ${j.clasesEliminadas}
Pagos eliminados: ${j.pagosEliminados}`)}}catch{o("Error al eliminar usuario completo")}finally{b(S=>({...S,[k]:!1})),w(null)}},E=()=>{i(!1),d(null),p()},L=()=>{i(!1),d(null)};return r?n.jsx($r,{title:"Cargando usuarios...",subtitle:"Obteniendo la lista de usuarios del sistema",showRenderMessage:!0,size:"medium"}):n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestión de Usuarios"}),N()&&n.jsx("button",{onClick:h,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded",children:"Nuevo Usuario"})]}),a&&n.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:a}),n.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:n.jsx("ul",{className:"divide-y divide-gray-200",children:e.map(k=>{var S,j;return n.jsx("li",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-500 flex items-center justify-center",children:n.jsxs("span",{className:"text-white font-medium",children:[(S=k.nombre)==null?void 0:S.charAt(0),(j=k.apellido)==null?void 0:j.charAt(0)]})})}),n.jsxs("div",{className:"ml-4",children:[n.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[k.nombre," ",k.apellido,k.activo===!1&&n.jsx("span",{className:"ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:"Pausado"})]}),n.jsxs("div",{className:"text-sm text-gray-500",children:[k.email,k.telefono&&n.jsxs("span",{className:"ml-3 text-green-600",children:["📱 ",k.telefono]})]}),n.jsx("div",{className:"text-xs text-gray-400",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${k.rol==="administrador"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:k.rol})})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx(pt,{to:`/clases?usuario=${k._id}`,className:"text-blue-600 hover:text-blue-900 text-sm font-medium",children:"Ver Clases"}),N()&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>g(k),className:"text-indigo-600 hover:text-indigo-900 text-sm font-medium",children:"Editar"}),k.rol!=="administrador"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>P(k._id,!k.activo),disabled:v[k._id],className:`text-sm font-medium ${k.activo?"text-orange-600 hover:text-orange-900":"text-green-600 hover:text-green-900"} ${v[k._id]?"opacity-50 cursor-not-allowed":""}`,children:v[k._id]?"Procesando...":k.activo?"Pausar":"Reactivar"}),n.jsx("button",{onClick:()=>m(k._id),className:"text-red-600 hover:text-red-900 text-sm font-medium",children:"Eliminar"}),n.jsx("button",{onClick:()=>w(k._id),className:"text-red-800 hover:text-red-900 text-sm font-bold",children:"Eliminar Todo"})]}),k.rol==="administrador"&&n.jsx("button",{onClick:()=>m(k._id),className:"text-red-600 hover:text-red-900 text-sm font-medium",children:"Eliminar"})]})]})]})},k._id)})})}),e.length===0&&!r&&n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-gray-500",children:"No hay usuarios registrados"})}),l&&n.jsx(vv,{usuario:c,onSubmit:E,onCancel:L}),u&&n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:n.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:n.jsxs("div",{className:"mt-3 text-center",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Confirmar Eliminación"}),n.jsx("div",{className:"mt-2 px-7 py-3",children:n.jsx("p",{className:"text-sm text-gray-500",children:"¿Estás seguro de que quieres eliminar este usuario? Esta acción no se puede deshacer."})}),n.jsxs("div",{className:"flex justify-center space-x-2 pt-4",children:[n.jsx("button",{onClick:()=>m(null),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancelar"}),n.jsx("button",{onClick:()=>C(u),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Eliminar"})]})]})})}),x&&n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:n.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:n.jsxs("div",{className:"mt-3 text-center",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"⚠️ Eliminación Completa"}),n.jsxs("div",{className:"mt-2 px-7 py-3",children:[n.jsxs("p",{className:"text-sm text-gray-500 mb-3",children:[n.jsx("strong",{children:"¡ATENCIÓN!"})," Esta acción eliminará:"]}),n.jsxs("ul",{className:"text-sm text-red-600 text-left list-disc list-inside space-y-1",children:[n.jsx("li",{children:"El usuario completamente"}),n.jsx("li",{children:"Todos sus pagos"}),n.jsx("li",{children:"Todas sus clases"})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-3",children:n.jsx("strong",{children:"Esta acción NO se puede deshacer."})})]}),n.jsxs("div",{className:"flex justify-center space-x-2 pt-4",children:[n.jsx("button",{onClick:()=>w(null),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancelar"}),n.jsx("button",{onClick:()=>y(x),disabled:v[x],className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:v[x]?"Eliminando...":"Eliminar Todo"})]})]})})})]})},jv=()=>{const[e,t]=f.useState({contrasenaActual:"",nuevaContrasena:"",confirmarContrasena:""}),[r,s]=f.useState(!1),[a,o]=f.useState(""),[l,i]=f.useState(""),{usuario:c}=Je(),d=m=>{t({...e,[m.target.name]:m.target.value})},u=async m=>{var x,w;if(m.preventDefault(),s(!0),o(""),i(""),e.nuevaContrasena!==e.confirmarContrasena){o("Las contraseñas no coinciden"),s(!1);return}if(e.nuevaContrasena.length<6){o("La contraseña debe tener al menos 6 caracteres"),s(!1);return}try{await Ve.cambiarContrasena(c._id,{contrasenaActual:e.contrasenaActual,nuevaContrasena:e.nuevaContrasena}),i("Contraseña cambiada exitosamente"),t({contrasenaActual:"",nuevaContrasena:"",confirmarContrasena:""})}catch(v){o(((w=(x=v.response)==null?void 0:x.data)==null?void 0:w.message)||"Error al cambiar contraseña")}finally{s(!1)}};return n.jsx("div",{className:"container mx-auto px-4 py-8",children:n.jsxs("div",{className:"max-w-md mx-auto bg-white rounded-lg shadow-md p-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Cambiar Contraseña"}),n.jsxs("form",{onSubmit:u,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Contraseña Actual"}),n.jsx("input",{type:"password",name:"contrasenaActual",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:e.contrasenaActual,onChange:d})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nueva Contraseña"}),n.jsx("input",{type:"password",name:"nuevaContrasena",required:!0,minLength:"6",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:e.nuevaContrasena,onChange:d})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Confirmar Nueva Contraseña"}),n.jsx("input",{type:"password",name:"confirmarContrasena",required:!0,minLength:"6",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:e.confirmarContrasena,onChange:d})]}),a&&n.jsx("div",{className:"text-red-600 text-sm",children:a}),l&&n.jsx("div",{className:"text-green-600 text-sm",children:l}),n.jsx("button",{type:"submit",disabled:r,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:r?"Cambiando...":"Cambiar Contraseña"})]})]})})},go=e=>{if(!e)return null;const t=new Date(e);return t.getUTCHours()!==0||t.getUTCMinutes()!==0||t.getUTCSeconds()!==0?t:new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),12,0,0,0)},wv=(e,t={})=>{if(!e)return"";const r=go(e),a={...{weekday:"long",year:"numeric",month:"long",day:"numeric"},...t},o=typeof navigator<"u"&&navigator.language||"es-ES";return r.toLocaleDateString(o,a)},$e=e=>{if(!e)return"";const t=go(e),r={weekday:void 0,year:"numeric",month:"long",day:"numeric"};return t.toLocaleDateString("es-ES",r)},Nv=e=>wv(e,{weekday:void 0,year:"numeric",month:"short",day:"numeric"}),kv=e=>{if(!e)return"";const t=go(e),r=t.getDate().toString().padStart(2,"0"),s=(t.getMonth()+1).toString().padStart(2,"0"),a=t.getFullYear().toString().slice(-2);return`${r}/${s}/${a}`},Sv=e=>{if(!e)return"";const t=go(e),r=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],s=t.getDate(),a=r[t.getMonth()],o=t.getFullYear();return`${a} ${s}, ${o}`},Cv=e=>{if(!e)return null;if(typeof e=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(e)){const[r,s,a]=e.split("-").map(Number);return new Date(Date.UTC(r,s-1,a,12,0,0,0))}const t=new Date(e);return new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),12,0,0,0))},Ev=e=>{const t=new Date(e),r=new Date;return t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()},Pv=e=>{const t=new Date(e),r={year:"numeric",month:"long"};return t.toLocaleDateString("es-ES",r)},_v=e=>{const t=[],r=[];return e.forEach(s=>{if(Ev(s.fechaPago))t.push(s);else{const a=Pv(s.fechaPago);let o=r.find(l=>l.mesAnio===a);o||(o={mesAnio:a,fecha:new Date(s.fechaPago),pagos:[]},r.push(o)),o.pagos.push(s)}}),r.sort((s,a)=>a.fecha-s.fecha),{pagosActuales:t,pagosHistoricos:r}},Lv=e=>e.replace(/\n/g,"%0A").replace(/ /g,"%20").replace(/&/g,"%26").replace(/\+/g,"%2B").replace(/#/g,"%23").replace(/\?/g,"%3F").replace(/=/g,"%3D"),pr=(e,t=null)=>{const r=Lv(e);let s;if(t&&t.trim()!==""){let a=t.replace(/[\s\-\(\)]/g,"");a=a.replace(/^\+/,""),s=`https://api.whatsapp.com/send?phone=${a}&text=${r}`}else s=`https://api.whatsapp.com/send?text=${r}`;window.open(s,"_blank")},oc=({fecha:e,obrasEstudiadas:t=[],objetivosProximaClase:r=""})=>{let s=`*Resumen de Clase*
`;return s+=`📅 Fecha: ${e}

`,t.length>0&&(s+=`🎵 *Obras Estudiadas:*
`,t.forEach((a,o)=>{s+=`${o+1}. *${a.compositor}* - ${a.obra}
`,a.movimientosCompases&&(s+=`   📖 : ${a.movimientosCompases}
`),a.comentarios&&(s+=`   💭 ${a.comentarios}
`),s+=`
`})),r&&(s+=`📋 *Próxima Clase:*
${r}`),s},Bd=({pago:e,onEdit:t,onEliminar:r})=>{const s=l=>{if(!l||l.length===0)return"Sin clases";const i=l.reduce((d,u)=>{const m=new Date(u.fecha),x=`${m.getFullYear()}-${m.getMonth()}`;return d[x]||(d[x]={nombreMes:m.toLocaleString("es-ES",{month:"long"}),fechas:[]}),d[x].fechas.push(m.getDate()),d},{});return Object.values(i).map(d=>{const u=d.fechas.sort((w,v)=>w-v),m=d.nombreMes.charAt(0).toUpperCase()+d.nombreMes.slice(1),x=u.join("-");return`${m} ${x}`}).join(" - ")},a=async()=>{if(e.linkFactura)try{const l=document.createElement("a");l.href=e.linkFactura,l.download=`Factura_${e.usuario.nombre}_${e.usuario.apellido}_${$e(e.fechaPago)}.pdf`,document.body.appendChild(l),l.click(),document.body.removeChild(l)}catch(l){I.error("Error al descargar factura:",l),window.open(e.linkFactura,"_blank")}},o=()=>{var u;const l=`$${e.monto.toLocaleString()}`,i=s(e.clasesDetalle),c=$e(e.fechaPago);let d=`⭐⭐⭐⭐⭐⭐⭐⭐⭐

`;d+=`*Pagado ${l} - ${i}*

`,e.descripcion&&e.descripcion.trim()!==""&&(d+=`💬 ${e.descripcion}

`),d+=`📅 ${c}

`,e.linkFactura&&(d+=`*Descargar factura*
📘📘📘📘📘📘📘📘📘
${e.linkFactura}`),(u=e.usuario)!=null&&u.telefono?pr(d,e.usuario.telefono):pr(d)};return n.jsxs("div",{className:"bg-white rounded-lg shadow-md border p-3",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsx("div",{children:n.jsxs("h3",{className:"text-base font-semibold text-gray-900",children:[e.usuario.nombre," ",e.usuario.apellido]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:o,className:"text-green-600 hover:text-green-800 text-sm font-medium",title:"Compartir por WhatsApp",children:"📱"}),n.jsx("button",{onClick:()=>t(e),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"✏️"}),n.jsx("button",{onClick:()=>r(e._id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"🗑️"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"text-left",children:n.jsxs("span",{className:"font-semibold text-base text-gray-900",children:["$",e.monto.toLocaleString()]})}),n.jsx("div",{className:"text-left",children:n.jsx("span",{className:"text-sm text-gray-600",children:e.clasesDetalle?s(e.clasesDetalle):"Cargando..."})}),e.descripcion&&n.jsx("div",{className:"mt-2 p-2 bg-amber-100 rounded border border-amber-200",children:n.jsx("p",{className:"text-sm text-amber-800",children:e.descripcion})}),e.linkFactura&&n.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[n.jsx("span",{className:"text-xs text-blue-600",children:"📄 Factura digital"}),n.jsx("button",{onClick:a,className:"inline-flex items-center px-2 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors",children:"⬇ Descargar"})]})]})]})},Rv=()=>{const[e,t]=f.useState([]),[r,s]=f.useState([]),[a,o]=f.useState([]),[l,i]=f.useState([]),[c,d]=f.useState(!0),[u,m]=f.useState(""),[x,w]=f.useState(!1),[v,b]=f.useState(null),[N,p]=f.useState("periodo"),[h,g]=f.useState([""]),[C,P]=f.useState({show:!1,message:"",type:""}),[y,E]=f.useState({usuarioId:"",monto:"",fechaInicio:"",fechaFin:"",descripcion:"",linkFactura:""}),L=(T,R="success")=>{P({show:!0,message:T,type:R}),setTimeout(()=>{P({show:!1,message:"",type:""})},3e3)};f.useEffect(()=>{k()},[]);const k=async()=>{d(!0);try{const[T,R]=await Promise.all([Hn.obtenerTodos(),Ve.obtenerTodos()]),B=T.data,U=await Promise.all(B.map(async K=>{try{const Y=(await kt.obtenerPorPago(K._id)).data;return{...K,totalClases:Y.length,clasesActivas:Y.filter(oe=>oe.activo!==!1).length,clasesDetalle:Y}}catch{I.error("Error al obtener clases para pago:",K._id);try{const oe=(await kt.obtenerPorUsuario(K.usuario._id)).data.filter(ie=>ie.pago&&ie.pago._id&&ie.pago._id.toString()===K._id.toString());return{...K,totalClases:oe.length,clasesActivas:oe.filter(ie=>ie.activo!==!1).length,clasesDetalle:oe}}catch(Y){return I.error("Error en fallback para pago:",K._id,Y),{...K,totalClases:0,clasesActivas:0,clasesDetalle:[]}}}}));t(U),i(R.data);const{pagosActuales:D,pagosHistoricos:$}=_v(U);s(D),o($)}catch(T){m("Error al cargar los datos"),I.error("Error:",T)}finally{d(!1)}},S=async T=>{var R,B,U,D;T.preventDefault();try{let $={monto:y.monto,descripcion:y.descripcion,linkFactura:y.linkFactura};if(v){const K=v.fechaInicio?v.fechaInicio.split("T")[0]:"",G=v.fechaFin?v.fechaFin.split("T")[0]:"",Y=y.fechaInicio!==K,oe=y.fechaFin!==G;if(I.debug("🔍 Verificando cambios de fechas",{fechaInicioOriginal:K,fechaFinOriginal:G,fechaInicio:y.fechaInicio,fechaFin:y.fechaFin,fechaInicioCambio:Y,fechaFinCambio:oe}),N==="individual"){const ie=h.filter(Et=>Et.trim()!=="");if(ie.length===0){L("Debe agregar al menos una fecha de clase.","error");return}$.fechasClases=ie}else if(N==="periodo")if(Y||oe){if(!y.fechaInicio||!y.fechaFin){L("Debe especificar fechas de inicio y fin.","error");return}const ie=new Date(y.fechaInicio);if(new Date(y.fechaFin)<=ie){L("La fecha de fin debe ser posterior a la fecha de inicio.","error");return}$.fechaInicio=y.fechaInicio,$.fechaFin=y.fechaFin,I.dev("📅 Incluyendo fechas cambiadas en la actualización")}else I.dev("ℹ️  No se incluyen fechas - no hubo cambios")}else if($.usuarioId=y.usuarioId,N==="individual"){const K=h.filter(G=>G.trim()!=="");if(K.length===0){L("Debe agregar al menos una fecha de clase para crear el pago.","error");return}$.fechasClases=K}else if(N==="periodo"){if(!y.fechaInicio||!y.fechaFin){L("Debe especificar fechas de inicio y fin para crear clases automáticamente.","error");return}const K=new Date(y.fechaInicio);if(new Date(y.fechaFin)<=K){L("La fecha de fin debe ser posterior a la fecha de inicio.","error");return}$.fechaInicio=y.fechaInicio,$.fechaFin=y.fechaFin}if(v)I.sensitive("🔄 Datos a enviar para actualización:",$),I.debug("📝 Link de factura en formData:",y.linkFactura),I.debug("📝 Link de factura en pagoData:",$.linkFactura),await Hn.actualizar(v._id,$),L("Pago actualizado exitosamente","success");else{const G=(await Hn.crear($)).data;let Y="Pago creado exitosamente";G.clases&&G.clases.length>0&&(Y+=` - Se crearon ${G.clases.length} clases automáticamente`),$.linkFactura&&(Y+=" - Factura digital guardada"),L(Y,"success")}await k(),z(),w(!1)}catch($){I.error("Error al guardar pago:",$),((B=(R=$.response)==null?void 0:R.data)==null?void 0:B.error)==="CLASES_REQUERIDAS"?L($.response.data.message,"error"):(D=(U=$.response)==null?void 0:U.data)!=null&&D.message?L(`Error: ${$.response.data.message}`,"error"):L("Error al guardar el pago. Verifique que todos los campos estén completos.","error")}},j=async T=>{if(window.confirm("¿Estás seguro de que quieres eliminar este pago?"))try{await Hn.eliminar(T),await k(),L("Pago eliminado exitosamente","success")}catch(R){I.error("Error al eliminar pago:",R),L("Error al eliminar el pago","error")}},z=()=>{E({usuarioId:"",monto:"",fechaInicio:"",fechaFin:"",descripcion:"",linkFactura:""}),b(null),p("periodo"),g([""])},V=async T=>{b(T);const R=T.fechaInicio&&T.fechaFin?"periodo":"individual";if(p(R),E({usuarioId:T.usuario._id,monto:T.monto,fechaInicio:T.fechaInicio?T.fechaInicio.split("T")[0]:"",fechaFin:T.fechaFin?T.fechaFin.split("T")[0]:"",descripcion:T.descripcion||"",linkFactura:T.linkFactura||""}),R==="individual")try{const U=(await kt.obtenerPorPago(T._id)).data.map(D=>new Date(D.fecha).toISOString().split("T")[0]);g(U.length>0?U:[""])}catch(B){I.error("Error al cargar fechas de clases:",B),g([""])}else g([""]);w(!0)},A=()=>{g([...h,""])},Q=T=>{const R=h.filter((B,U)=>U!==T);g(R.length>0?R:[""])},J=(T,R)=>{const B=[...h];B[T]=R,g(B)};return c?n.jsx($r,{title:"Cargando pagos...",subtitle:"Obteniendo información de pagos y usuarios",showRenderMessage:!0,size:"medium"}):n.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[C.show&&n.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-3 rounded-lg shadow-lg transform transition-all duration-300 ${C.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:C.type==="success"?"✅":"❌"}),n.jsx("span",{className:"font-medium",children:C.message})]})}),n.jsxs("div",{className:"flex justify-between items-center mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestión de Pagos"}),n.jsx("button",{onClick:()=>{z(),w(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-semibold",children:"➕ Nuevo Pago"})]}),u&&n.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:u}),r.length>0&&n.jsx("div",{className:"mb-8",children:n.jsxs("details",{open:!0,className:"border border-blue-200 rounded-lg bg-blue-50",children:[n.jsxs("summary",{className:"cursor-pointer bg-blue-100 hover:bg-blue-200 p-4 font-bold text-blue-900 flex justify-between items-center rounded-t-lg",children:[n.jsxs("span",{className:"flex items-center",children:["📅 Pagos de ",new Date().toLocaleDateString("es-ES",{month:"long",year:"numeric"}),n.jsx("span",{className:"ml-3 bg-blue-600 text-white text-sm font-medium px-2.5 py-0.5 rounded-full",children:r.length})]}),n.jsx("span",{className:"text-sm text-blue-700",children:"Mes actual"})]}),n.jsx("div",{className:"p-4",children:n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:r.map(T=>n.jsx(Bd,{pago:T,onEdit:V,onEliminar:j},T._id))})})]})}),a.length>0&&n.jsxs("div",{className:"mb-8",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:["Historial de Pagos",n.jsxs("span",{className:"ml-3 text-sm text-gray-600 font-normal",children:["(",a.reduce((T,R)=>T+R.pagos.length,0)," pagos)"]})]}),n.jsx("div",{className:"space-y-4",children:a.map(T=>n.jsxs("details",{className:"border border-gray-200 rounded-lg",children:[n.jsxs("summary",{className:"cursor-pointer bg-gray-50 hover:bg-gray-100 p-4 font-medium text-gray-900 flex justify-between items-center",children:[n.jsxs("span",{className:"capitalize",children:["📆 ",T.mesAnio]}),n.jsxs("span",{className:"text-sm text-gray-500 bg-gray-200 px-2 py-1 rounded-full",children:[T.pagos.length," ",T.pagos.length===1?"pago":"pagos"]})]}),n.jsx("div",{className:"p-4",children:n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:T.pagos.map(R=>n.jsx(Bd,{pago:R,onEdit:V,onEliminar:j},R._id))})})]},T.mesAnio))})]}),r.length===0&&a.length===0&&!c&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:n.jsx("span",{className:"text-4xl",children:"💰"})}),n.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"No hay pagos registrados"}),n.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Crea el primer pago para comenzar a gestionar las clases"})]}),x&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("h3",{className:"text-lg font-bold mb-4",children:v?"Editar Pago":"Nuevo Pago"}),n.jsxs("form",{onSubmit:S,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Usuario"}),n.jsxs("select",{value:y.usuarioId,onChange:T=>E({...y,usuarioId:T.target.value}),required:!0,className:"w-full p-2 border border-gray-300 rounded-md",children:[n.jsx("option",{value:"",children:"Seleccionar usuario..."}),l.map(T=>n.jsxs("option",{value:T._id,children:[T.nombre," ",T.apellido," (",T.email,")"]},T._id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monto ($)"}),n.jsx("input",{type:"number",value:y.monto,onChange:T=>E({...y,monto:T.target.value}),required:!0,min:"0",className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"56200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de programación de clases"}),n.jsxs("div",{className:"flex gap-4 mb-4",children:[n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"radio",value:"periodo",checked:N==="periodo",onChange:T=>p(T.target.value),className:"mr-2",disabled:v}),"Por período (semanal)"]}),n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"radio",value:"individual",checked:N==="individual",onChange:T=>p(T.target.value),className:"mr-2",disabled:v}),"Clases individuales"]})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3 mb-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-blue-600 mr-2",children:"💡"}),n.jsxs("p",{className:"text-sm text-blue-800",children:[n.jsx("strong",{children:"Importante:"})," Todo pago debe tener clases asociadas.",N==="periodo"?" Se crearán clases automáticamente cada semana entre las fechas seleccionadas.":" Debe especificar al menos una fecha de clase."]})]})}),v&&n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"💡 Tipo detectado automáticamente. Para cambiar el tipo, elimine y cree un nuevo pago."})]}),(N==="periodo"||v)&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de inicio"}),n.jsx("input",{type:"date",value:y.fechaInicio,onChange:T=>E({...y,fechaInicio:T.target.value}),required:N==="periodo",className:"w-full p-2 border border-gray-300 rounded-md"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de fin"}),n.jsx("input",{type:"date",value:y.fechaFin,onChange:T=>E({...y,fechaFin:T.target.value}),required:N==="periodo",className:"w-full p-2 border border-gray-300 rounded-md"})]})]}),N==="individual"&&n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Fechas de clases ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Agregue las fechas específicas en que se realizarán las clases. Mínimo: 1 fecha."}),h.map((T,R)=>n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsx("input",{type:"date",value:T,onChange:B=>J(R,B.target.value),className:"flex-1 p-2 border border-gray-300 rounded-md",required:!0}),h.length>1&&n.jsx("button",{type:"button",onClick:()=>Q(R),className:"px-3 py-2 bg-red-500 text-white rounded hover:bg-red-600",title:"Eliminar fecha",children:"🗑️"})]},R)),n.jsx("button",{type:"button",onClick:A,className:"w-full p-2 border-2 border-dashed border-gray-300 rounded-md text-gray-600 hover:border-blue-400 hover:text-blue-600",children:"➕ Agregar otra fecha"}),h.filter(T=>T.trim()!=="").length>0&&n.jsxs("p",{className:"text-sm text-green-600 mt-2",children:["✅ ",h.filter(T=>T.trim()!=="").length," fecha(s) programada(s)"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción (opcional)"}),n.jsx("textarea",{value:y.descripcion,onChange:T=>E({...y,descripcion:T.target.value}),className:"w-full p-2 border border-gray-300 rounded-md",rows:"3",placeholder:"Descripción del pago..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Link de Factura Digital (opcional)"}),n.jsx("input",{type:"url",value:y.linkFactura,onChange:T=>E({...y,linkFactura:T.target.value}),className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"https://ejemplo.com/factura.pdf"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"📄 Enlace a la factura digital para descarga (Google Drive, Dropbox, etc.)"})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsx("button",{type:"button",onClick:()=>{w(!1),z()},className:"flex-1 px-4 py-2 text-gray-600 bg-gray-200 rounded hover:bg-gray-300",children:"Cancelar"}),n.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:v?"Actualizar":"Crear"})]})]})]})})]})},lc=({claseId:e,usuarioId:t,fecha:r,onClose:s,onSave:a,resumenExistente:o,isStandalone:l=!1})=>{const[i,c]=f.useState(!0),[d,u]=f.useState(!1),[m,x]=f.useState([]),[w,v]=f.useState([]),[b,N]=f.useState(null),[p,h]=f.useState({obrasEstudiadas:[],objetivosProximaClase:""}),[g,C]=f.useState({compositor:"",obra:"",movimientosCompases:"",comentarios:""});f.useEffect(()=>{P()},[e,o]);const P=async()=>{try{const A=await sn.obtenerTodas();x(A.data);const Q=[...new Set(A.data.map(J=>J.compositor))].sort();if(v(Q),t)try{const J=await Ve.obtenerPorId(t);N(J.data)}catch(J){I.error("Error al cargar usuario:",J)}if(o)h({obrasEstudiadas:o.obrasEstudiadas||[],objetivosProximaClase:o.objetivosProximaClase||""});else{const J=await mn.obtenerPorClase(e);J.data&&J.data.obrasEstudiadas&&h({obrasEstudiadas:J.data.obrasEstudiadas||[],objetivosProximaClase:J.data.objetivosProximaClase||""})}}catch(A){I.error("Error al cargar datos:",A)}finally{c(!1)}},y=A=>m.filter(Q=>Q.compositor===A),E=()=>{if(!g.compositor||!g.obra){alert("Por favor completa compositor y obra");return}I.dev("Agregando obra:",{compositor:g.compositor,obra:g.obra});const A=m.find(T=>T.compositor===g.compositor&&T.obra===g.obra);if(p.obrasEstudiadas.some(T=>T.compositor===g.compositor&&T.obra===g.obra&&T.movimientosCompases===g.movimientosCompases)){alert("Esta obra con los mismos movimientos/compases ya está agregada. Si quieres agregar diferentes movimientos, especifica movimientos distintos.");return}const J={id:Date.now(),compositor:g.compositor,obra:g.obra,movimientosCompases:g.movimientosCompases||"",comentarios:g.comentarios||"",...A&&A._id?{partitura:A._id}:{},esManual:!A||!A._id};I.dev("Obra completa a agregar:",J),I.dev(A?"Obra encontrada en DB":"Obra manual (no está en DB)"),h({...p,obrasEstudiadas:[...p.obrasEstudiadas,J]}),C({...g,movimientosCompases:"",comentarios:""})},L=A=>{const Q=p.obrasEstudiadas.filter((J,T)=>T!==A);h({...p,obrasEstudiadas:Q})},k=(A,Q,J)=>{const T=[...p.obrasEstudiadas];T[A]={...T[A],[Q]:J},h({...p,obrasEstudiadas:T})},S=async A=>{var Q,J,T;A.preventDefault(),u(!0);try{if(p.obrasEstudiadas.length===0){alert("⚠️ No hay obras agregadas. Por favor, agrega al menos una obra."),u(!1);return}const R={claseId:e,obrasEstudiadas:p.obrasEstudiadas.map(U=>({...U.partitura?{partitura:U.partitura}:{},compositor:U.compositor,obra:U.obra,movimientosCompases:U.movimientosCompases||"",comentarios:U.comentarios||"",esManual:U.esManual||!1})),objetivosProximaClase:p.objetivosProximaClase||""};I.sensitive("Datos enviados al backend:",R),I.dev("Obras de DB:",R.obrasEstudiadas.filter(U=>U.partitura).length),I.dev("Obras manuales:",R.obrasEstudiadas.filter(U=>U.esManual).length);const B=await mn.crearOActualizar(R);I.sensitive("Respuesta del backend:",B.data),I.success("Resumen guardado exitosamente, llamando onSave..."),a&&a(),alert("✅ Resumen de clase guardado exitosamente"),s()}catch(R){I.error("Error al guardar resumen:",R),I.sensitive("Respuesta del error:",(Q=R.response)==null?void 0:Q.data);let B="Error al guardar el resumen";(T=(J=R.response)==null?void 0:J.data)!=null&&T.message&&(B=R.response.data.message,R.response.data.partiturasNoEncontradas&&(I.error("Partituras no encontradas:",R.response.data.partiturasNoEncontradas),B+=`

Partituras no válidas encontradas. Por favor, vuelve a seleccionar las obras.`)),alert(`❌ ${B}`)}finally{u(!1)}},j=async()=>{try{u(!0);const A={claseId:e,obrasEstudiadas:p.obrasEstudiadas.map(J=>({...J.partitura?{partitura:J.partitura}:{},compositor:J.compositor,obra:J.obra,movimientosCompases:J.movimientosCompases||"",comentarios:J.comentarios||"",esManual:J.esManual||!1})),objetivosProximaClase:p.objetivosProximaClase||""};await mn.crearOActualizar(A);const Q=oc({fecha:$e(r),obrasEstudiadas:p.obrasEstudiadas,objetivosProximaClase:p.objetivosProximaClase});b!=null&&b.telefono?pr(Q,b.telefono):pr(Q),I.success("Resumen guardado exitosamente (WhatsApp), llamando onSave..."),a&&a(),alert("✅ Resumen guardado y WhatsApp abierto"),s()}catch(A){I.error("Error al guardar y enviar por WhatsApp:",A),alert("❌ Error al procesar la acción")}finally{u(!1)}};if(i)return n.jsx("div",{className:`${l?"":"fixed inset-0 bg-black bg-opacity-50"} flex items-center justify-center ${l?"p-6":"z-50"}`,children:n.jsxs("div",{className:"bg-white rounded-lg p-6",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"mt-2 text-center",children:"Cargando..."})]})});const z=l?"bg-white rounded-lg w-full":"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",V=l?"w-full":"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto";return n.jsx("div",{className:z,children:n.jsx("div",{className:V,children:n.jsxs("div",{className:"p-6",children:[!l&&n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"📚 Resumen de Clase"}),n.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 text-2xl font-bold",children:"×"})]}),n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:[n.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Información de la Clase"}),n.jsxs("div",{className:"text-sm space-y-1",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-blue-700 font-medium",children:"Fecha:"}),n.jsx("span",{className:"text-blue-900 ml-2",children:$e(r)})]}),b&&n.jsxs("div",{children:[n.jsx("span",{className:"text-blue-700 font-medium",children:"Alumno:"}),n.jsxs("span",{className:"text-blue-900 ml-2",children:[b.nombre," ",b.apellido]}),b.telefono&&n.jsx("span",{className:"text-green-600 ml-2 text-xs",children:"📱 WhatsApp disponible"})]})]})]}),n.jsxs("form",{onSubmit:S,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"🎼 Obras Estudiadas"}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[n.jsx("h4",{className:"font-medium mb-3",children:"Agregar Nueva Obra"}),n.jsxs("div",{className:"mb-3 p-3 bg-blue-50 rounded-md border border-blue-200",children:[n.jsxs("p",{className:"text-sm text-blue-800",children:["💡 ",n.jsx("strong",{children:"Opciones para agregar obras:"})]}),n.jsxs("ul",{className:"text-sm text-blue-700 mt-2 space-y-1",children:[n.jsxs("li",{children:["📚 ",n.jsx("strong",{children:"De la biblioteca:"})," Selecciona de los menús desplegables"]}),n.jsxs("li",{children:["✏️ ",n.jsx("strong",{children:"Manual:"})," Escribe directamente compositor y obra (no requiere estar en la biblioteca)"]}),n.jsxs("li",{children:["🔄 ",n.jsx("strong",{children:"Múltiples movimientos:"})," Agrega el mismo compositor/obra con diferentes movimientos"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Compositor"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("select",{value:g.compositor,onChange:A=>C({...g,compositor:A.target.value,obra:""}),className:"w-full p-2 border border-gray-300 rounded-md",children:[n.jsx("option",{value:"",children:"Seleccionar de la biblioteca..."}),w.map(A=>n.jsx("option",{value:A,children:A},A))]}),n.jsx("div",{className:"text-xs text-gray-500 text-center",children:"O"}),n.jsx("input",{type:"text",value:g.compositor,onChange:A=>C({...g,compositor:A.target.value,obra:""}),placeholder:"Escribir compositor manualmente...",className:"w-full p-2 border border-gray-300 rounded-md"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Obra"}),n.jsxs("div",{className:"space-y-2",children:[g.compositor&&w.includes(g.compositor)&&n.jsxs("select",{value:g.obra,onChange:A=>C({...g,obra:A.target.value}),className:"w-full p-2 border border-gray-300 rounded-md",children:[n.jsx("option",{value:"",children:"Seleccionar de la biblioteca..."}),y(g.compositor).map(A=>n.jsx("option",{value:A.obra,children:A.obra},A._id))]}),g.compositor&&w.includes(g.compositor)&&n.jsx("div",{className:"text-xs text-gray-500 text-center",children:"O"}),n.jsx("input",{type:"text",value:g.obra,onChange:A=>C({...g,obra:A.target.value}),placeholder:"Escribir obra manualmente...",className:"w-full p-2 border border-gray-300 rounded-md"})]})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parte de la obra"}),n.jsx("input",{type:"text",value:g.movimientosCompases,onChange:A=>C({...g,movimientosCompases:A.target.value}),placeholder:"Ej: 1er movimiento, compases 1-32, Andante...",className:"w-full p-2 border border-gray-300 rounded-md"})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comentarios"}),n.jsx("textarea",{value:g.comentarios,onChange:A=>C({...g,comentarios:A.target.value}),placeholder:"Qué se trabajó, dificultades encontradas, correcciones...",className:"w-full p-2 border border-gray-300 rounded-md",rows:"2"})]}),n.jsxs("div",{className:"mt-4 flex gap-2",children:[n.jsx("button",{type:"button",onClick:E,disabled:!g.compositor||!g.obra,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"➕ Agregar Parte de la Obra"}),(g.compositor||g.obra)&&n.jsx("button",{type:"button",onClick:()=>C({compositor:"",obra:"",movimientosCompases:"",comentarios:""}),className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"🔄 Nueva Obra"})]}),g.compositor&&g.obra&&n.jsx("div",{className:"mt-2 p-3 bg-blue-50 rounded-md border border-blue-200",children:n.jsxs("p",{className:"text-sm text-blue-800",children:["💡 ",n.jsx("strong",{children:"Tip:"})," Puedes agregar múltiples movimientos de la misma obra. Después de agregar un movimiento, el formulario mantiene la obra seleccionada para que puedas agregar fácilmente otro movimiento o ejercicio."]})})]}),n.jsxs("div",{className:"space-y-3",children:[(()=>{const A=p.obrasEstudiadas.reduce((Q,J,T)=>{const R=`${J.compositor}-${J.obra}`;return Q[R]||(Q[R]={compositor:J.compositor,obra:J.obra,esManual:J.esManual,partitura:J.partitura,movimientos:[]}),Q[R].movimientos.push({...J,indiceOriginal:T}),Q},{});return Object.values(A).map((Q,J)=>n.jsxs("div",{className:`border rounded-lg p-4 bg-white ${Q.movimientos.length>1?"border-blue-300 bg-blue-50":"border-gray-300"}`,children:[n.jsxs("div",{className:"mb-3 pb-2 border-b border-gray-200",children:[n.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[Q.compositor,Q.movimientos.length>1&&n.jsxs("span",{className:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full",children:[Q.movimientos.length," movimientos"]}),Q.esManual&&n.jsx("span",{className:"bg-orange-500 text-white text-xs px-2 py-1 rounded-full",title:"Obra agregada manualmente",children:"✏️ Manual"}),!Q.esManual&&Q.partitura&&n.jsx("span",{className:"bg-green-500 text-white text-xs px-2 py-1 rounded-full",title:"Obra de la biblioteca",children:"📚 Biblioteca"})]}),n.jsx("p",{className:"text-gray-700 text-lg",children:Q.obra})]}),n.jsx("div",{className:"space-y-3",children:Q.movimientos.map((T,R)=>n.jsxs("div",{className:"bg-white rounded-md p-3 border border-gray-200",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[Q.movimientos.length>1&&n.jsxs("span",{className:"bg-gray-500 text-white text-xs px-2 py-1 rounded-full",children:["#",R+1]}),n.jsx("span",{className:"text-sm font-medium text-gray-600",children:T.movimientosCompases||"Movimiento sin especificar"})]}),n.jsx("button",{type:"button",onClick:()=>L(T.indiceOriginal),className:"text-red-600 hover:text-red-800 text-lg",title:"Eliminar este movimiento",children:"🗑️"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parte de la obra"}),n.jsx("input",{type:"text",value:T.movimientosCompases||"",onChange:B=>k(T.indiceOriginal,"movimientosCompases",B.target.value),placeholder:"Ej: Ejercicio 20, 1er movimiento, compases 1-32...",className:"w-full p-2 border border-gray-300 rounded-md text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comentarios"}),n.jsx("textarea",{value:T.comentarios||"",onChange:B=>k(T.indiceOriginal,"comentarios",B.target.value),placeholder:"Qué se trabajó, correcciones...",className:"w-full p-2 border border-gray-300 rounded-md text-sm",rows:"2"})]})]})]},T.id||T.indiceOriginal))})]},J))})(),p.obrasEstudiadas.length===0&&n.jsxs("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-300 rounded-lg",children:[n.jsx("p",{className:"text-lg",children:"🎼"}),n.jsx("p",{children:"No hay obras agregadas"}),n.jsx("p",{className:"text-sm",children:"Usa el formulario arriba para agregar obras estudiadas"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"📝 Próxima Clase"}),n.jsx("textarea",{value:p.objetivosProximaClase,onChange:A=>h({...p,objetivosProximaClase:A.target.value}),placeholder:"Qué trabajar la próxima clase, metas específicas...",className:"w-full p-3 border border-gray-300 rounded-md",rows:"3"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-6 border-t",children:[!l&&n.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancelar"}),n.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:d?"Guardando...":"Guardar"}),n.jsx("button",{type:"button",onClick:j,disabled:d,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 flex items-center gap-2",children:d?"Procesando...":n.jsxs(n.Fragment,{children:["📱 Enviar por WhatsApp",(b==null?void 0:b.telefono)&&n.jsx("span",{className:"text-xs bg-green-800 px-1.5 py-0.5 rounded",children:"Auto"})]})})]})]})]})})})},zv=({resumen:e,onEdit:t,onDelete:r})=>{var i;const[s,a]=f.useState(!1);if(!e||!e.clase)return I.warn("ResumenClaseCard: resumen o clase es null/undefined",e),n.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4 shadow-md",children:n.jsx("p",{className:"text-red-600",children:"⚠️ Error: Datos de resumen incompletos"})});const o=async()=>{var c,d;try{a(!0);const u=oc({fecha:(c=e.clase)!=null&&c.fecha?$e(e.clase.fecha):"Fecha no disponible",obrasEstudiadas:e.obrasEstudiadas||[],objetivosProximaClase:e.objetivosProximaClase||""});(d=e.usuario)!=null&&d.telefono?pr(u,e.usuario.telefono):pr(u)}catch(u){I.error("Error al enviar por WhatsApp:",u),alert("❌ Error al procesar el envío por WhatsApp")}finally{a(!1)}},l=async()=>{if(window.confirm("¿Estás seguro de que quieres eliminar este resumen?"))try{await mn.eliminar(e._id),r(e._id),alert("✅ Resumen eliminado exitosamente")}catch(c){I.error("Error al eliminar resumen:",c),alert("❌ Error al eliminar el resumen")}};return n.jsxs("div",{className:"bg-white border-2 border-blue-200 rounded-lg p-4 shadow-md hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("div",{children:n.jsxs("p",{className:"text-sm text-gray-600 font-bold",children:["📅 ",(i=e.clase)!=null&&i.fecha?$e(e.clase.fecha):"Fecha no disponible"]})}),n.jsx("button",{onClick:l,className:"text-red-500 hover:text-red-700 text-sm",title:"Eliminar resumen",children:"🗑️"})]}),e.obrasEstudiadas&&e.obrasEstudiadas.length>0&&n.jsxs("div",{className:"mb-4",children:[n.jsxs("h5",{className:"text-sm font-medium text-gray-700 mb-2 text-left",children:["🎼 Obras (",e.obrasEstudiadas.length,")"]}),n.jsx("div",{className:"space-y-2",children:(()=>{const c=e.obrasEstudiadas.reduce((d,u,m)=>{const x=`${u.compositor}-${u.obra}`;return d[x]||(d[x]={compositor:u.compositor,obra:u.obra,movimientos:[]}),d[x].movimientos.push(u),d},{});return Object.values(c).map((d,u)=>n.jsxs("div",{className:"bg-gray-50 p-3 rounded-md text-left",children:[n.jsxs("div",{className:"font-medium text-gray-800 mb-2",children:[d.compositor," - ",d.obra,d.movimientos.length>1&&n.jsxs("span",{className:"ml-2 bg-blue-500 text-white text-xs px-2 py-1 rounded-full",children:[d.movimientos.length," partes"]})]}),n.jsx("div",{className:"space-y-1",children:d.movimientos.map((m,x)=>n.jsxs("div",{className:"text-sm",children:[m.movimientosCompases&&n.jsxs("div",{className:"text-blue-600",children:["📍 ",m.movimientosCompases]}),m.comentarios&&n.jsxs("div",{className:"text-gray-600 mt-1",children:["💬 ",m.comentarios]}),d.movimientos.length>1&&x<d.movimientos.length-1&&n.jsx("div",{className:"border-b border-gray-200 my-2"})]},x))})]},u))})()})]}),e.objetivosProximaClase&&n.jsxs("div",{className:"mb-4",children:[n.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2 text-left",children:"🎯 Próxima Clase"}),n.jsx("div",{className:"bg-green-50 p-3 rounded-md text-left",children:n.jsx("p",{className:"text-sm text-gray-700",children:e.objetivosProximaClase})})]}),n.jsxs("div",{className:"flex gap-2 pt-3 border-t border-gray-200",children:[n.jsx("button",{onClick:()=>t(e),className:"flex-1 px-3 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"✏️ Editar"}),n.jsx("button",{onClick:o,disabled:s,className:"flex-1 px-3 py-2 text-sm bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 transition-colors",children:s?"Enviando...":"📱 WhatsApp"})]})]})};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Fv=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,s)=>s?s.toUpperCase():r.toLowerCase()),Hd=e=>{const t=Fv(e);return t.charAt(0).toUpperCase()+t.slice(1)},Zf=(...e)=>e.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim(),Mv=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Av={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=f.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:o,iconNode:l,...i},c)=>f.createElement("svg",{ref:c,...Av,width:t,height:t,stroke:e,strokeWidth:s?Number(r)*24/Number(t):r,className:Zf("lucide",a),...!o&&!Mv(i)&&{"aria-hidden":"true"},...i},[...l.map(([d,u])=>f.createElement(d,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=(e,t)=>{const r=f.forwardRef(({className:s,...a},o)=>f.createElement(Ov,{ref:o,iconNode:t,className:Zf(`lucide-${Tv(Hd(e))}`,`lucide-${e}`,s),...a}));return r.displayName=Hd(e),r};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Xo=le("bell",$v);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],ni=le("book",Dv);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ep=le("calendar",Iv);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],Bv=le("check-check",Uv);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Vv=le("check",Hv);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Vd=le("chevron-down",Wv);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Wd=le("chevron-right",qv);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],tp=le("circle-check-big",Qv);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ic=le("clock",Gv);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],rp=le("eye-off",Kv);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],np=le("eye",Jv);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],sp=le("funnel",Yv);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],ur=le("message-circle",Xv);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],cc=le("music",Zv);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],ap=le("pause",eb);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],rb=le("pen",tb);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],si=le("play",nb);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ab=le("plus",sb);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],lb=le("save",ob);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],dc=le("search",ib);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],qd=le("share-2",cb);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ub=le("square-pen",db);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],fb=le("square",mb);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],op=le("trash-2",pb);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],lp=le("user",hb);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],gb=le("volume-2",xb);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],vb=le("volume-x",yb);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],yo=le("x",bb),tr={obtenerEstudios:async(e={})=>{try{const t=new URLSearchParams;return e.usuarioId&&t.append("usuarioId",e.usuarioId),e.estado&&t.append("estado",e.estado),e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),(await H.get(`/estudios?${t}`)).data}catch(t){throw console.error("Error al obtener estudios:",t),t}},obtenerEstudiosPorUsuario:async e=>{try{return(await H.get(`/estudios/usuario/${e}`)).data}catch(t){throw console.error("Error al obtener estudios del usuario:",t),t}},crearEstudio:async e=>{try{return(await H.post("/estudios",e)).data}catch(t){throw console.error("Error al crear estudio:",t),t}},actualizarEstudio:async(e,t)=>{try{return(await H.put(`/estudios/${e}`,t)).data}catch(r){throw console.error("Error al actualizar estudio:",r),r}},eliminarEstudio:async e=>{try{return(await H.delete(`/estudios/${e}`)).data}catch(t){throw console.error("Error al eliminar estudio:",t),t}},finalizarEstudio:async e=>{try{return(await H.patch(`/estudios/${e}/finalizar`)).data}catch(t){throw console.error("Error al finalizar estudio:",t),t}}},ip=({mostrar:e,onCerrar:t,onGuardado:r,estudioEditando:s=null,usuarioPreseleccionado:a=null})=>{const[o,l]=f.useState({usuario:"",compositor:"",obra:"",fechaInicio:"",fechaFinalizada:"",porcentajeProgreso:0,estado:"en_progreso",notas:""}),[i,c]=f.useState([]),[d,u]=f.useState(!1),[m,x]=f.useState("");f.useEffect(()=>{e&&w()},[e]),f.useEffect(()=>{a&&l(b=>({...b,usuario:a}))},[a]),f.useEffect(()=>{l(s?{usuario:s.usuario._id,compositor:s.compositor,obra:s.obra,fechaInicio:s.fechaInicio?s.fechaInicio.split("T")[0]:"",fechaFinalizada:s.fechaFinalizada?s.fechaFinalizada.split("T")[0]:"",porcentajeProgreso:s.porcentajeProgreso,estado:s.estado,notas:s.notas||""}:{usuario:a||"",compositor:"",obra:"",fechaInicio:new Date().toISOString().split("T")[0],fechaFinalizada:"",porcentajeProgreso:0,estado:"en_progreso",notas:""})},[s,a]);const w=async()=>{try{const b=await Ve.obtenerTodos();c(Array.isArray(b)?b:b.data||[])}catch(b){console.error("Error al cargar datos:",b),x("Error al cargar los datos")}},v=async b=>{var N,p;b.preventDefault();try{u(!0),x("");const h={usuarioId:o.usuario,compositor:o.compositor,obra:o.obra,fechaInicio:o.fechaInicio,fechaFinalizada:o.fechaFinalizada||null,porcentajeProgreso:parseInt(o.porcentajeProgreso)||0,estado:o.estado,notas:o.notas||""};s?await tr.actualizarEstudio(s._id,h):await tr.crearEstudio(h),r(),t()}catch(h){console.error("Error al guardar estudio:",h),x(((p=(N=h.response)==null?void 0:N.data)==null?void 0:p.message)||"Error al guardar el estudio")}finally{u(!1)}};return e?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[n.jsx("h2",{className:"text-xl font-semibold",children:s?"Editar Estudio":"Nuevo Estudio"}),n.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:n.jsx(yo,{size:24})})]}),n.jsxs("form",{onSubmit:v,className:"p-6",children:[m&&n.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:m}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estudiante *"}),n.jsxs("select",{value:o.usuario,onChange:b=>l({...o,usuario:b.target.value}),required:!0,disabled:!!a,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100",children:[n.jsx("option",{value:"",children:"Seleccionar estudiante"}),i.filter(b=>b.rol==="usuario").map(b=>n.jsxs("option",{value:b._id,children:[b.nombre," ",b.apellido]},b._id))]}),a&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Usuario preseleccionado desde gestión de clases"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Compositor *"}),n.jsx("input",{type:"text",value:o.compositor,onChange:b=>l({...o,compositor:b.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Obra *"}),n.jsx("input",{type:"text",value:o.obra,onChange:b=>l({...o,obra:b.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de inicio *"}),n.jsx("input",{type:"date",value:o.fechaInicio,onChange:b=>l({...o,fechaInicio:b.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Logro (%)"}),n.jsx("input",{type:"number",min:"0",max:"100",value:o.porcentajeProgreso,onChange:b=>l({...o,porcentajeProgreso:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de finalización real"}),n.jsx("input",{type:"date",value:o.fechaFinalizada,onChange:b=>l({...o,fechaFinalizada:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:o.estado!=="finalizado"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Solo se puede establecer cuando el estado es "Finalizado"'})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),n.jsxs("select",{value:o.estado,onChange:b=>{const N=b.target.value;l({...o,estado:N,fechaFinalizada:N==="finalizado"&&!o.fechaFinalizada?new Date().toISOString().split("T")[0]:N==="finalizado"?o.fechaFinalizada:""})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"en_progreso",children:"En progreso"}),n.jsx("option",{value:"finalizado",children:"Finalizado"}),n.jsx("option",{value:"pausado",children:"Pausado"})]})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas adicionales"}),n.jsx("textarea",{value:o.notas,onChange:b=>l({...o,notas:b.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Observaciones, técnicas específicas, objetivos..."})]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[n.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",disabled:d,children:"Cancelar"}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",disabled:d,children:d?"Guardando...":s?"Actualizar":"Crear"})]})]})]})}):null},jb=`
  .slider::-webkit-slider-thumb {
    appearance: none;
    height: 16px;
    width: 16px;
    border-radius: 50%;
    background: #3b82f6;
    cursor: pointer;
    border: 2px solid #ffffff;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  }
  
  .slider::-moz-range-thumb {
    height: 16px;
    width: 16px;
    border-radius: 50%;
    background: #3b82f6;
    cursor: pointer;
    border: 2px solid #ffffff;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  }
`;if(!document.getElementById("slider-styles")){const e=document.createElement("style");e.id="slider-styles",e.textContent=jb,document.head.appendChild(e)}const cp=({usuarioId:e,mostrarTitulo:t=!0,modoVisualizacion:r="details",filtrarEstados:s=null,esAdmin:a=!1})=>{const[o,l]=f.useState([]),[i,c]=f.useState(!1),[d,u]=f.useState(""),[m,x]=f.useState({2025:!0}),[w,v]=f.useState({}),[b,N]=f.useState(new Set),[p,h]=f.useState({}),[g,C]=f.useState(!1),[P,y]=f.useState(null),[E,L]=f.useState("");f.useEffect(()=>{e&&k()},[e,s]);const k=async()=>{try{c(!0);let $=(await tr.obtenerEstudios({usuarioId:e})).estudios||[];s&&s.length>0&&($=$.filter(K=>s.includes(K.estado))),l($)}catch(D){console.error("Error al cargar estudios:",D),u("Error al cargar los estudios")}finally{c(!1)}},S=D=>{switch(D){case"en_progreso":return"text-blue-600";case"finalizado":return"text-green-600";case"pausado":return"text-yellow-600";default:return"text-gray-600"}},j=D=>{switch(D){case"en_progreso":return n.jsx(si,{className:"w-3 h-3"});case"finalizado":return n.jsx(tp,{className:"w-3 h-3"});case"pausado":return n.jsx(ap,{className:"w-3 h-3"});default:return n.jsx(ic,{className:"w-3 h-3"})}},z=D=>{const $={};return D.forEach(K=>{const G=new Date(K.fechaInicio),Y=G.getFullYear(),oe=G.getMonth(),ie=G.toLocaleDateString("es-ES",{month:"long"});$[Y]||($[Y]={}),$[Y][oe]||($[Y][oe]={nombre:ie,estudios:[]}),$[Y][oe].estudios.push(K)}),$},V=D=>{x($=>({...$,[D]:!$[D]}))},A=(D,$)=>{const K=`${D}-${$}`;v(G=>({...G,[K]:!G[K]}))},Q=D=>{y(D);const $=new Date().toISOString().split("T")[0];L($),C(!0)},J=()=>{C(!1),y(null),L("")},T=async()=>{var D,$;if(!(!P||!E))try{N(G=>new Set([...G,P._id]));const K=p[P._id]||P.porcentajeProgreso;await tr.actualizarEstudio(P._id,{estado:"finalizado",porcentajeProgreso:K,fechaFinalizada:E}),J(),setTimeout(()=>{l(G=>G.filter(Y=>Y._id!==P._id)),N(G=>{const Y=new Set(G);return Y.delete(P._id),Y}),h(G=>{const Y={...G};return delete Y[P._id],Y})},2e3)}catch(K){console.error("Error al finalizar estudio:",K),N(G=>{const Y=new Set(G);return Y.delete(P._id),Y}),alert("Error al finalizar el estudio: "+((($=(D=K.response)==null?void 0:D.data)==null?void 0:$.message)||K.message))}};if(i)return n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),n.jsx("div",{className:"space-y-2",children:[1,2,3].map(D=>n.jsx("div",{className:"h-8 bg-gray-200 rounded"},D))})]});if(d)return n.jsx("div",{className:"text-red-600 text-sm",children:d});if(o.length===0)return n.jsxs("div",{className:"text-gray-500 text-sm italic",children:[t&&n.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"📚 Estudios"}),r==="cards"?"No hay estudios activos":"No hay estudios registrados"]});if(r==="cards")return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"space-y-3",children:[t&&n.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:["📚 Estudios Activos (",o.length,")"]}),n.jsx("div",{className:"space-y-2",children:o.map(D=>{const $=b.has(D._id),K=p[D._id]!==void 0?p[D._id]:D.porcentajeProgreso,G=Y=>{if(!Y)return"";const oe=new Date(Y),ie=oe.getDate().toString().padStart(2,"0"),Vt=["ENE","FEB","MAR","ABR","MAY","JUN","JUL","AGO","SEP","OCT","NOV","DIC"][oe.getMonth()];return`${ie}${Vt}`};return n.jsx("div",{className:`bg-white border border-gray-200 rounded-lg shadow-sm transition-all duration-200 overflow-hidden ${$?"bg-green-50 border-green-300 opacity-70":"hover:shadow-md hover:border-gray-300"}`,children:n.jsxs("div",{className:"grid grid-cols-[auto_1fr_auto] text-sm",children:[n.jsx("div",{className:"flex flex-col justify-center items-center min-w-[60px] bg-gray-700 text-white py-1",children:n.jsx("span",{className:"font-bold text-sm",children:G(D.fechaInicio)})}),n.jsxs("div",{className:"flex flex-col gap-1 px-3 py-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium text-gray-900 truncate",children:D.compositor}),n.jsx("span",{className:"text-gray-600 truncate flex-1",children:D.obra})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-16 h-1.5 bg-gray-200 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:`${K}%`}})}),n.jsxs("span",{className:"text-xs font-medium text-blue-600",children:[K,"%"]})]}),n.jsx("span",{className:`flex items-center justify-center min-w-[30px] ${S(D.estado)}`,children:j(D.estado)})]})]}),n.jsx("div",{className:`flex flex-col justify-center items-center min-w-[60px] py-1 ${D.fechaFinalizada,"bg-gray-700 text-white"}`,children:D.fechaFinalizada?n.jsx("span",{className:"font-bold text-sm",children:G(D.fechaFinalizada)}):n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"font-bold text-sm text-white",children:"-:-"}),a&&D.estado!=="finalizado"&&n.jsx("button",{onClick:()=>Q(D),disabled:$,className:`mt-1 p-1 rounded text-xs transition-all duration-200 ${$?"bg-green-500 text-white cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white hover:shadow-md"}`,title:"Finalizar estudio",children:$?"⏳":"✓"})]})})]})},D._id)})}),g&&P&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-900",children:"🎯 Finalizar Estudio"}),n.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-blue-900 mb-1",children:P.compositor}),n.jsx("p",{className:"text-blue-700 text-sm",children:P.obra})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"📅 Fecha de finalización"}),n.jsx("input",{type:"date",value:E,onChange:D=>L(D.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",max:new Date().toISOString().split("T")[0]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Por defecto se usa la fecha de hoy. No se permiten fechas futuras."})]}),n.jsx("div",{className:"mb-6 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:n.jsxs("p",{className:"text-sm text-yellow-800",children:["⚠️ ",n.jsx("strong",{children:"Atención:"})," Una vez finalizado, el estudio se ocultará de la vista de estudios activos y se marcará como completado."]})}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:J,disabled:P&&b.has(P._id),className:"flex-1 px-4 py-2 text-gray-600 bg-gray-200 rounded-lg hover:bg-gray-300 disabled:opacity-50 transition-colors",children:"Cancelar"}),n.jsx("button",{onClick:T,disabled:P&&b.has(P._id)||!E,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors font-medium",children:P&&b.has(P._id)?"Finalizando...":"Finalizar Estudio"})]})]})})]})});const R=z(o),B=Object.keys(R).sort((D,$)=>$-D),U=D=>{if(!D)return"";const $=new Date(D),K=$.getDate().toString().padStart(2,"0"),Y=["ENE","FEB","MAR","ABR","MAY","JUN","JUL","AGO","SEP","OCT","NOV","DIC"][$.getMonth()];return`${K}${Y}`};return n.jsxs("div",{className:"space-y-2",children:[t&&n.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:["📚 Estudios (",o.length,")"]}),B.map(D=>n.jsxs("details",{className:"group",open:m[D],children:[n.jsxs("summary",{className:"flex items-center justify-between cursor-pointer text-sm font-medium text-gray-800 py-1 px-2 bg-gray-50 rounded hover:bg-gray-100",onClick:$=>{$.preventDefault(),V(D)},children:[n.jsxs("span",{className:"flex items-center",children:[m[D]?n.jsx(Vd,{className:"w-4 h-4 mr-1"}):n.jsx(Wd,{className:"w-4 h-4 mr-1"}),D]}),n.jsxs("span",{className:"text-xs text-gray-500",children:[Object.values(R[D]).reduce(($,K)=>$+K.estudios.length,0)," estudios"]})]}),n.jsx("div",{className:"ml-4 mt-1 space-y-1",children:Object.entries(R[D]).sort(([$],[K])=>K-$).map(([$,K])=>n.jsxs("details",{className:"group",open:w[`${D}-${$}`],children:[n.jsxs("summary",{className:"flex items-center justify-between cursor-pointer text-xs font-medium text-gray-700 py-1 px-2 bg-gray-25 rounded hover:bg-gray-50",onClick:G=>{G.preventDefault(),A(D,$)},children:[n.jsxs("span",{className:"flex items-center capitalize",children:[w[`${D}-${$}`]?n.jsx(Vd,{className:"w-3 h-3 mr-1"}):n.jsx(Wd,{className:"w-3 h-3 mr-1"}),K.nombre]}),n.jsxs("span",{className:"text-xs text-gray-500",children:[K.estudios.length," estudios"]})]}),n.jsx("div",{className:"ml-4 mt-1 space-y-1",children:K.estudios.map(G=>n.jsxs("div",{className:"bg-white border border-gray-200 rounded p-2 hover:bg-gray-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[n.jsx("span",{className:"font-semibold text-gray-700 min-w-[45px]",children:U(G.fechaInicio)}),n.jsx("span",{className:"font-medium text-gray-900 min-w-[100px] truncate",children:G.compositor}),n.jsx("span",{className:"text-gray-600 flex-1 truncate",children:G.obra}),n.jsxs("div",{className:"flex items-center gap-1 min-w-[60px]",children:[n.jsx("div",{className:"w-8 h-1 bg-gray-200 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:`${G.porcentajeProgreso}%`}})}),n.jsxs("span",{className:"text-xs font-medium text-blue-600 w-6",children:[G.porcentajeProgreso,"%"]})]}),n.jsx("span",{className:`flex items-center justify-center min-w-[30px] ${S(G.estado)}`,children:j(G.estado)}),G.fechaFinalizada&&n.jsx("span",{className:"font-semibold text-green-700 min-w-[45px]",children:U(G.fechaFinalizada)})]}),G.notas&&n.jsxs("div",{className:"mt-1 ml-[45px] text-xs text-gray-500 italic",children:["📝 ",G.notas]})]},G._id))})]},`${D}-${$}`))})]},D))]})},Tt={no_iniciada:{label:"No iniciada",color:"bg-gray-400 hover:bg-gray-500",textColor:"text-white",icon:"⚪"},tomada:{label:"Tomada",color:"bg-green-500 hover:bg-green-600",textColor:"text-white",icon:"🟢"},ausente:{label:"Ausente",color:"bg-red-500 hover:bg-red-600",textColor:"text-white",icon:"🔴"},reprogramar:{label:"Reprogramar",color:"bg-amber-500 hover:bg-amber-600",textColor:"text-white",icon:"🟡"},recuperada:{label:"Recuperada",color:"bg-purple-500 hover:bg-purple-600",textColor:"text-white",icon:"🟣"}},Qd=({clase:e,onEstadoChange:t,usuarioId:r,onResumenGuardado:s})=>{var k;const[a,o]=f.useState(!1),[l,i]=f.useState(!1),[c,d]=f.useState(!1),[u,m]=f.useState(!1),[x,w]=f.useState(e.notas||""),[v,b]=f.useState(e.notas||""),[N,p]=f.useState(e.fechaReprogramada?new Date(e.fechaReprogramada).toISOString().split("T")[0]:"");f.useEffect(()=>{w(e.notas||""),b(e.notas||"")},[e.notas]);const h=Tt[e.estado]||Tt.no_iniciada,g=()=>{i(!0)},C=async S=>{if(S==="reprogramar"&&!N){alert("Por favor selecciona una fecha para reprogramar la clase");return}o(!0);try{const j={estado:S,notas:x};S==="reprogramar"&&N&&(j.fechaReprogramada=Cv(N)),await kt.actualizarEstado(e._id,j),t(e._id),i(!1)}catch(j){I.error("Error al cambiar estado:",j),alert("Error al cambiar el estado de la clase")}finally{o(!1)}},P=async()=>{if(confirm('¿Estás seguro de que quieres deshacer la reprogramación? La clase volverá a estado "No iniciada" y se eliminará la fecha reprogramada.')){o(!0);try{const S={estado:"no_iniciada",notas:x,fechaReprogramada:null};await kt.actualizarEstado(e._id,S),t(e._id),i(!1)}catch(S){I.error("Error al deshacer reprogramación:",S),alert("Error al deshacer la reprogramación")}finally{o(!1)}}},y=async()=>{o(!0);try{const S={estado:e.estado,notas:v};e.fechaReprogramada&&(S.fechaReprogramada=e.fechaReprogramada),await kt.actualizarEstado(e._id,S),w(v),t(e._id),m(!1)}catch(S){I.error("Error al actualizar notas:",S),alert("Error al actualizar las notas: "+(S.message||"Error desconocido"))}finally{o(!1)}},E=()=>{b(x),m(!0)},L=async()=>{if(window.confirm("¿Estás seguro de que quieres eliminar las notas de esta clase?")){o(!0);try{const j={estado:e.estado,notas:""};e.fechaReprogramada&&(j.fechaReprogramada=e.fechaReprogramada),await kt.actualizarEstado(e._id,j),w(""),b(""),m(!1),t(e._id)}catch(j){I.error("Error al eliminar notas:",j),alert("Error al eliminar las notas: "+(j.message||"Error desconocido"))}finally{o(!1)}}};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:`${h.color} ${h.textColor} p-4 rounded-lg shadow-md transition-all duration-200 transform hover:scale-105`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-2xl",children:h.icon}),n.jsx("span",{className:"text-sm font-semibold",children:h.label})]}),n.jsxs("div",{className:"text-sm",children:[n.jsx("p",{className:"font-bold mb-1",children:$e(e.fecha)}),e.pago&&n.jsxs("p",{className:"opacity-90",children:["Pago: $",(k=e.pago.monto)==null?void 0:k.toLocaleString()]}),e.fechaReprogramada&&n.jsxs("p",{className:"mt-2 text-xs bg-white bg-opacity-30 rounded px-2 py-1",children:["📅 Reprogramada para: ",$e(e.fechaReprogramada)]}),x&&n.jsxs("p",{className:"mt-2 text-xs bg-white bg-opacity-20 rounded px-2 py-1",children:["📝 ",x]})]}),n.jsxs("div",{className:"mt-3 flex gap-1",children:[n.jsx("button",{onClick:g,className:"flex-1 px-2 py-1 bg-white bg-opacity-20 hover:bg-opacity-30 rounded text-xs font-medium transition-colors",children:"Estado"}),x&&n.jsx("button",{onClick:E,className:"px-2 py-1 bg-white bg-opacity-20 hover:bg-opacity-30 rounded text-xs font-medium transition-colors",title:"Editar notas",children:"✏️"}),n.jsx("a",{href:`/alumnos/admin/resumen-clase/${e._id}?usuarioId=${r}&fecha=${encodeURIComponent(e.fecha)}&newTab=true`,target:"_blank",rel:"noopener noreferrer",onClick:S=>{if(S.stopPropagation(),!r){S.preventDefault(),alert("Error: No se puede abrir el resumen. Usuario no seleccionado.");return}I.debug("Abriendo resumen via enlace",{usuarioId:r,claseId:e._id,url:`/alumnos/admin/resumen-clase/${e._id}?usuarioId=${r}&fecha=${encodeURIComponent(e.fecha)}&newTab=true`})},className:"flex-1 px-2 py-1 bg-white bg-opacity-20 hover:bg-opacity-30 rounded text-xs font-medium transition-colors text-center inline-block",children:"📝 Resumen"})]})]}),l&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[n.jsx("h3",{className:"text-lg font-bold mb-4",children:"Cambiar estado de clase"}),n.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["📅 Fecha original: ",$e(e.fecha)]}),e.fechaReprogramada&&n.jsxs("p",{className:"text-sm text-amber-600 mb-4 bg-amber-50 p-2 rounded",children:["🔄 Reprogramada para: ",$e(e.fechaReprogramada)]}),n.jsxs("div",{className:"grid grid-cols-1 gap-2 mb-4",children:[e.estado==="reprogramar"&&e.fechaReprogramada&&n.jsxs("button",{onClick:()=>P(),disabled:a,className:"bg-gray-600 hover:bg-gray-700 text-white p-2 rounded text-sm font-semibold disabled:opacity-50 flex items-center gap-2 border-2 border-gray-400",children:[n.jsx("span",{children:"↩️"}),"Deshacer reprogramación"]}),Object.entries(Tt).map(([S,j])=>n.jsxs("button",{onClick:()=>C(S),disabled:a,className:`${j.color} ${j.textColor} p-2 rounded text-sm font-semibold disabled:opacity-50 flex items-center gap-2`,children:[n.jsx("span",{children:j.icon}),j.label]},S))]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas (opcional)"}),n.jsx("textarea",{value:x,onChange:S=>w(S.target.value),className:"w-full p-2 border border-gray-300 rounded-md text-sm",rows:"3",placeholder:"Agregar notas sobre la clase..."})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de reprogramación"}),n.jsx("p",{className:"text-xs text-gray-500 mb-2",children:'Solo necesaria si seleccionas "Reprogramar". Deja vacío para otros estados.'}),n.jsx("input",{type:"date",value:N,onChange:S=>p(S.target.value),className:"w-full p-2 border border-gray-300 rounded-md text-sm",min:new Date().toISOString().split("T")[0]})]}),n.jsx("div",{className:"flex gap-2",children:n.jsx("button",{onClick:()=>i(!1),className:"flex-1 px-4 py-2 text-gray-600 bg-gray-200 rounded hover:bg-gray-300",children:"Cancelar"})})]})}),c&&n.jsx(lc,{claseId:e._id,usuarioId:r,fecha:e.fecha,onClose:()=>d(!1),onSave:()=>{s&&s()}}),u&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[n.jsx("h3",{className:"text-lg font-bold mb-4",children:"Editar notas de la clase"}),n.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["📅 Fecha: ",$e(e.fecha)]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas"}),n.jsx("textarea",{value:v,onChange:S=>b(S.target.value),className:"w-full p-3 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"4",placeholder:"Agregar notas sobre la clase..."})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>{m(!1),b(x)},disabled:a,className:"px-4 py-2 text-gray-600 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50",children:"Cancelar"}),x&&n.jsx("button",{onClick:L,disabled:a,className:"px-4 py-2 text-red-600 bg-red-100 rounded hover:bg-red-200 disabled:opacity-50",title:"Eliminar notas",children:"🗑️"}),n.jsx("button",{onClick:y,disabled:a,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:a?"Guardando...":"Guardar"})]})]})})]})},wb=({usuarioSeleccionado:e})=>{var Fs,M,W,Ye,Wt,Vr;const{usuario:t}=Je(),[r]=bf(),[s,a]=f.useState([]),[o,l]=f.useState([]),[i,c]=f.useState(null),[d,u]=f.useState([]),[m,x]=f.useState(e||r.get("usuario")||""),[w,v]=f.useState({}),[b,N]=f.useState(!1),[p,h]=f.useState(""),[g,C]=f.useState(!1),[P,y]=f.useState([]),[E,L]=f.useState(!1),[k,S]=f.useState([]),[j,z]=f.useState(null),[V,A]=f.useState([]),[Q,J]=f.useState(!1),[T,R]=f.useState(null),[B,U]=f.useState(!0),[D,$]=f.useState(!1),[K,G]=f.useState(0),Y=(t==null?void 0:t.rol)==="administrador",oe=F=>`clases_orden_${F}`,ie=(F,X)=>{try{const te=oe(F);localStorage.setItem(te,JSON.stringify(X))}catch(te){I.error("Error al guardar orden en localStorage:",te)}},Et=F=>{try{const X=oe(F),te=localStorage.getItem(X);return te?JSON.parse(te):null}catch(X){return I.error("Error al obtener orden de localStorage:",X),null}};f.useEffect(()=>{(async()=>{try{const X=await Ve.obtenerTodos();u(X.data)}catch(X){I.error("Error al obtener usuarios:",X)}})()},[]),f.useEffect(()=>{const F=r.get("usuario");F&&F!==m&&x(F)},[r]),f.useEffect(()=>{m?(S([]),z(null),Vt(),setTimeout(()=>{br()},150)):(S([]),a([]),l([]),c(null),z(null),A([]))},[m]),f.useEffect(()=>{if(s.length>0&&m){const F=Et(m);S(X=>{if(F&&F.length>0){const te=[],se=[...s];return F.forEach(Ce=>{const _t=se.find(jr=>jr._id===Ce);if(_t){te.push(_t);const jr=se.findIndex(up=>up._id===Ce);se.splice(jr,1)}}),se.forEach(Ce=>{te.push(Ce)}),te}else{const te=[...s].sort((Ce,_t)=>new Date(Ce.fecha)-new Date(_t.fecha)),se=te.map(Ce=>Ce._id);return ie(m,se),te}})}else S([])},[s,m]),f.useEffect(()=>{Y&&En()},[Y]),f.useEffect(()=>{Ps()},[s,o]),f.useEffect(()=>{let F=0;const X=te=>{if(te.key==="resumen_update_event"&&te.newValue)try{const se=JSON.parse(te.newValue);if(se.timestamp&&se.timestamp<=F)return;I.dev("📝 Evento de resumen detectado:",se),F=se.timestamp,se.type==="resumen_guardado"&&se.usuarioId===m&&(I.info("🔄 Recargando resúmenes por actualización desde nueva pestaña..."),setTimeout(()=>{br()},300))}catch(se){I.error("Error al procesar evento de resumen:",se)}};return window.addEventListener("storage",X),()=>{window.removeEventListener("storage",X)}},[m]);const Vt=async()=>{if(m){N(!0),h("");try{const F=await kt.obtenerSeparadas(m);a(F.data.clasesUltimoPago),l(F.data.historialClases),c(F.data.ultimoPago)}catch(F){h("Error al cargar las clases"),I.error("Error:",F)}finally{N(!1)}}},br=async()=>{if(!m){A([]);return}if(Q){I.dev("⏳ Ya se están cargando resúmenes, saltando...");return}I.dev("🔄 Cargando resúmenes para usuario:",m),J(!0);try{const F=await mn.obtenerPorUsuario(m);I.sensitive("📝 Respuesta de resúmenes:",F.data);const X=(F.data.resumenes||[]).filter(te=>te&&te.clase&&te.clase.fecha);I.dev("✅ Resúmenes válidos:",X.length,"de",(F.data.resumenes||[]).length),X.length!==(F.data.resumenes||[]).length&&I.warn("⚠️ Se filtraron resúmenes con datos incompletos de clase"),A(X)}catch(F){I.error("❌ Error al cargar resúmenes:",F),A([])}finally{J(!1)}},Ps=()=>{if(!m){v({no_iniciada:0,tomada:0,ausente:0,reprogramar:0,recuperada:0});return}try{const F=[...s,...o];if(F.length===0){v({no_iniciada:0,tomada:0,ausente:0,reprogramar:0,recuperada:0});return}const te={no_iniciada:0,tomada:0,ausente:0,reprogramar:0,recuperada:0,...F.reduce((se,Ce)=>(se[Ce.estado]=(se[Ce.estado]||0)+1,se),{})};v(te)}catch(F){I.error("Error al calcular resumen:",F)}},En=async()=>{L(!0);try{const F=await kt.obtenerEstudiantesPorDia();y(F.data)}catch(F){I.error("Error al cargar estudiantes por día:",F)}finally{L(!1)}},vo=()=>{$(!0)},bo=()=>{$(!1)},Hr=()=>{G(F=>F+1)},_s=F=>{Vt().then(()=>{S(X=>{const te=[...X],se=te.findIndex(Ce=>Ce._id===F);if(se!==-1){const[Ce]=te.splice(se,1);if(te.push(Ce),m){const _t=te.map(jr=>jr._id);ie(m,_t)}}return te})})},jo=()=>{if(m&&s.length>0){const F=[...s].sort((te,se)=>new Date(te.fecha)-new Date(se.fecha));S(F);const X=F.map(te=>te._id);ie(m,X)}},Ls=F=>{z(j===F?null:F)},Pt=F=>j?F.filter(X=>X.estado===j):F,Rs=F=>{R(F)},Pn=F=>{A(X=>X.filter(te=>te._id!==F))},zs=()=>{I.info("💾 Resumen guardado, recargando lista de resúmenes..."),setTimeout(()=>{br()},200),R(null)},vt=d.find(F=>F._id===m),Ts=F=>{x(F),U(!1)};return n.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Gestión de Clases"}),Y&&n.jsx("div",{className:"mb-8",children:n.jsxs("details",{open:B,className:"bg-gray-50 rounded-lg overflow-hidden",children:[n.jsx("summary",{className:"cursor-pointer p-4 font-semibold text-lg text-gray-900 hover:bg-gray-100 transition-colors flex items-center justify-between",onClick:F=>{F.preventDefault(),U(!B)},children:n.jsxs("span",{className:"flex items-center",children:[n.jsx("span",{className:`transform transition-transform mr-2 ${B?"rotate-90":""}`,children:"▶"}),"📅 Estudiantes por Día de la Semana",m&&n.jsxs("span",{className:"ml-2 text-sm text-gray-600 font-normal",children:["(Usuario seleccionado: ",vt==null?void 0:vt.nombre,")"]})]})}),n.jsx("div",{className:"p-4 pt-0",children:E?n.jsx($r,{title:"Cargando estudiantes...",subtitle:"Agrupando por días de la semana",size:"small"}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:P.filter(F=>F.dia!=="1").map(F=>n.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-900 mb-2 text-sm",children:F.nombreDia}),n.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:[F.estudiantes.length," estudiante",F.estudiantes.length!==1?"s":""]}),F.estudiantes.length>0?n.jsx("div",{className:"space-y-2",children:F.estudiantes.map(X=>n.jsx("div",{className:"p-2 bg-blue-50 rounded text-xs cursor-pointer hover:bg-blue-100 transition-colors",onClick:()=>Ts(X._id),children:n.jsx("div",{className:"font-medium text-blue-900",children:X.nombre})},X._id))}):n.jsx("div",{className:"text-xs text-gray-400 italic",children:"Sin estudiantes"})]},F.dia))})})]})}),!m&&n.jsxs("div",{className:"mb-6 bg-gray-50 rounded-lg p-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"🔍 Búsqueda Manual de Usuario"}),n.jsx("div",{className:"flex gap-4 items-end",children:n.jsxs("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seleccionar Usuario Específico"}),n.jsxs("select",{value:m,onChange:F=>Ts(F.target.value),className:"w-full p-2 border border-gray-300 rounded-md",children:[n.jsx("option",{value:"",children:"Seleccionar usuario..."}),d.map(F=>n.jsxs("option",{value:F._id,children:[F.nombre," ",F.apellido," (",F.email,")"]},F._id))]})]})})]}),m&&n.jsxs(n.Fragment,{children:[vt&&n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-6 shadow-sm",children:[n.jsxs("div",{className:"hidden md:grid md:grid-cols-12 md:gap-6 md:items-center",children:[n.jsx("div",{className:"col-span-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:["👤 ",vt.nombre," ",vt.apellido]}),Y&&n.jsx("button",{onClick:()=>U(!0),className:"text-sm text-blue-600 hover:text-blue-800 underline",title:"Cambiar usuario",children:"👤➡️👤 Cambiar usuario"})]})}),n.jsx("div",{className:"col-span-4",children:i&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-green-700",children:["Último Pago - $",(Fs=i.monto)==null?void 0:Fs.toLocaleString()]}),i.descripcion&&n.jsx("p",{className:"text-green-600 text-sm",children:i.descripcion})]})}),n.jsx("div",{className:"col-span-4",children:Object.keys(w).length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[n.jsx("p",{className:"text-xs text-gray-500",children:"📊 Resumen Total (Todas las clases)"}),j&&n.jsx("button",{onClick:()=>z(null),className:"text-xs text-red-600 hover:text-red-800 font-medium bg-red-50 px-2 py-1 rounded",title:"Limpiar filtro",children:"✕ Limpiar filtro"})]}),n.jsx("div",{className:"grid grid-cols-5 gap-1",children:Object.entries(Tt).map(([F,X])=>{const te=j===F,Ce=Pt(k).filter(jr=>jr.estado===F).length,_t=w[F]||0;return n.jsxs("div",{className:`p-1 rounded text-center cursor-pointer transition-all duration-200 ${te?`${X.color} ${X.textColor} ring-2 ring-offset-1 ring-blue-500`:`${X.color} ${X.textColor} hover:scale-105`}`,onClick:()=>Ls(F),title:`${X.label}: ${_t} total${j?`, ${Ce} visibles`:""}`,children:[n.jsx("div",{className:"text-xs font-bold",children:_t}),n.jsx("div",{className:"text-xs",children:X.label})]},F)})})]})})]}),n.jsxs("div",{className:"md:hidden",children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["👤 ",vt.nombre," ",vt.apellido]}),Y&&n.jsx("button",{onClick:()=>U(!0),className:"text-sm text-blue-600 hover:text-blue-800 underline",title:"Cambiar usuario",children:"👤➡️👤 Cambiar"})]}),i&&n.jsxs("div",{className:"mb-4",children:[n.jsxs("h3",{className:"text-base font-semibold text-green-700",children:["Último Pago - $",(M=i.monto)==null?void 0:M.toLocaleString()]}),i.descripcion&&n.jsx("p",{className:"text-green-600 text-sm",children:i.descripcion})]})]}),Object.keys(w).length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[n.jsx("p",{className:"text-xs text-gray-500",children:"📊 Resumen Total (Todas las clases)"}),j&&n.jsx("button",{onClick:()=>z(null),className:"text-xs text-red-600 hover:text-red-800 font-medium bg-red-50 px-2 py-1 rounded",title:"Limpiar filtro",children:"✕ Limpiar filtro"})]}),n.jsx("div",{className:"grid grid-cols-5 gap-2",children:Object.entries(Tt).map(([F,X])=>{const te=j===F,se=(w[F]||0)>0;return n.jsx("div",{className:`
                              p-2 rounded text-center border transition-all duration-200 cursor-pointer
                              ${te?`${X.color} ${X.textColor} ring-2 ring-offset-1 ring-blue-500`:se?"bg-gray-50 hover:bg-gray-100 hover:shadow-md transform hover:scale-105":"bg-gray-50 opacity-60"}
                            ${se?"":"cursor-not-allowed"}
                          `,title:`${X.label}: ${w[F]||0} clase${(w[F]||0)!==1?"s":""}${se?" - Click para filtrar":""}`,onClick:()=>se&&Ls(F),children:n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("span",{className:"text-sm mb-1",children:X.icon}),n.jsx("span",{className:`text-xs font-medium mb-1 leading-tight ${te?"text-white":"text-gray-600"}`,children:X.label}),n.jsx("p",{className:`text-base font-bold ${te?"text-white":"text-gray-800"}`,children:w[F]||0})]})},F)})})]})]})]}),V.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["📚 Resúmenes de Clase Guardados (",V.length,")"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:V.map(F=>n.jsx(zv,{resumen:F,onEdit:Rs,onDelete:Pn},F._id))})]}),n.jsxs("div",{className:"mb-6",children:[Y&&n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"📚 Estudios Activos"}),n.jsx("button",{onClick:vo,className:"inline-flex items-center px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-sm",children:"📚 Agregar Estudio"})]}),n.jsx(cp,{usuarioId:m,modoVisualizacion:"cards",filtrarEstados:["en_progreso","pausado"],mostrarTitulo:!Y,esAdmin:Y},`estudios-${m}-${K}`)]}),b?n.jsx($r,{title:"Cargando clases...",subtitle:"Obteniendo información de las clases",showRenderMessage:!0,size:"small"}):p?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("p",{className:"text-red-600",children:p}),n.jsx("button",{onClick:Vt,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reintentar"})]}):i?s.length===0?n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-gray-600",children:"No hay clases programadas para el último pago."})}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900",children:j?`${Pt(s).length} Clases Filtradas`:`${s.length} Clases Actuales`}),n.jsx("p",{className:"text-sm text-gray-600",children:j?n.jsxs(n.Fragment,{children:["Mostrando solo: ",n.jsx("span",{className:"font-medium text-blue-600",children:(W=Tt[j])==null?void 0:W.label})," • Total de clases: ",s.length+o.length]}):n.jsxs(n.Fragment,{children:["Pago actual • Total de clases: ",s.length+o.length]})})]}),n.jsxs("div",{className:"flex gap-2",children:[j&&n.jsxs("button",{onClick:()=>z(null),className:"inline-flex items-center gap-2 px-3 py-2 text-sm text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition-colors",title:"Limpiar filtro",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Limpiar filtro"]}),n.jsxs("button",{onClick:jo,className:"inline-flex items-center gap-2 px-3 py-2 text-sm text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",title:"Resetear orden a cronológico",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Resetear orden"]})]})]}),j&&Pt(s).length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsxs("p",{className:"text-gray-600",children:['No hay clases con estado "',(Ye=Tt[j])==null?void 0:Ye.label,'" en el pago actual.']}),n.jsx("button",{onClick:()=>z(null),className:"mt-2 px-4 py-2 text-blue-600 bg-blue-50 rounded hover:bg-blue-100",children:"Ver todas las clases"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Pt(k.length>0?k:s).map(F=>n.jsx(Qd,{clase:F,usuarioId:m,onEstadoChange:_s,onResumenGuardado:br},F._id))})]}),o.length>0&&n.jsx("div",{className:"mt-8",children:n.jsxs("details",{className:"bg-gray-50 rounded-lg overflow-hidden",open:g,onToggle:F=>C(F.target.open),children:[n.jsx("summary",{className:"cursor-pointer p-4 bg-gray-100 hover:bg-gray-200 transition-colors",children:n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 inline-flex items-center gap-2",children:["📋 Historial de Clases",j?n.jsxs("span",{className:"text-sm font-normal text-gray-600",children:["(",Pt(o).length," de ",o.length," - ",(Wt=Tt[j])==null?void 0:Wt.label,")"]}):n.jsxs("span",{className:"text-sm font-normal text-gray-600",children:["(",o.length,")"]}),n.jsx("span",{className:"text-sm font-normal text-gray-600",children:"(Pagos anteriores - incluidas en el resumen total)"})]})}),n.jsx("div",{className:"p-4",children:j&&Pt(o).length===0?n.jsx("div",{className:"text-center py-4",children:n.jsxs("p",{className:"text-gray-600",children:['No hay clases con estado "',(Vr=Tt[j])==null?void 0:Vr.label,'" en el historial.']})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Pt(o).map(F=>n.jsx(Qd,{clase:F,usuarioId:m,onEstadoChange:_s,onResumenGuardado:br},F._id))})})]})})]}):n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-gray-600",children:"No hay pagos registrados para este usuario."})})]}),T&&n.jsx(lc,{claseId:T.clase._id,usuarioId:m,fecha:T.clase.fecha,resumenExistente:T,onClose:()=>R(null),onSave:zs}),n.jsx(ip,{mostrar:D,onCerrar:bo,onGuardado:Hr,usuarioPreseleccionado:m})]})},Nb=()=>{const{usuario:e}=Je(),[t,r]=f.useState([]),[s,a]=f.useState(!0),[o,l]=f.useState(""),[i,c]=f.useState(""),[d,u]=f.useState([]),[m,x]=f.useState(new Set),[w,v]=f.useState(!1),b=f.useRef(null),N=()=>{if(!b.current)return;const y=Array.from(b.current.querySelectorAll(".partitura-card"));if(y.length===0)return;y.forEach(S=>{S.style.height="auto"});const E=[];let L=[],k=null;y.forEach(S=>{const j=S.offsetTop;k===null||j===k?(L.push(S),k=j):(E.push(L),L=[S],k=j)}),L.length>0&&E.push(L),E.forEach(S=>{const j=Math.max(...S.map(z=>z.offsetHeight));S.forEach(z=>{z.style.height=`${j}px`})})};f.useEffect(()=>{const y=setTimeout(()=>{N()},100);return()=>clearTimeout(y)},[d]),f.useEffect(()=>{const y=()=>{const E=setTimeout(()=>{N()},100);return()=>clearTimeout(E)};return window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]),f.useEffect(()=>{p()},[]),f.useEffect(()=>{let y=t;if(i.trim()){const E=C(i);y=y.filter(L=>{var k;return C(L.compositor).includes(E)||C(L.obra).includes(E)||((k=L.movimientos)==null?void 0:k.some(S=>S.nombre&&C(S.nombre).includes(E)))})}w&&(y=y.filter(E=>m.has(E._id))),u(y)},[i,t,m,w]);const p=async()=>{var y,E;try{a(!0);const k=(await sn.obtenerTodas()).data||[];r(k),u(k),k.length===0&&l("No se encontraron partituras en la base de datos")}catch(L){l("Error al cargar partituras: "+(((E=(y=L.response)==null?void 0:y.data)==null?void 0:E.message)||L.message))}finally{a(!1)}},h=async y=>{var L,k,S,j;if(!(e!=null&&e._id)){I.error("Usuario no autenticado");return}const E=m.has(y);x(E?z=>{const V=new Set(z);return V.delete(y),V}:z=>new Set([...z,y]));try{await Ve.alternarFavorito(e._id,y)}catch(z){I.error("Error al alternar favorito:",z),I.error("Detalles del error:",{status:(L=z.response)==null?void 0:L.status,message:(S=(k=z.response)==null?void 0:k.data)==null?void 0:S.message,url:(j=z.config)==null?void 0:j.url}),x(E?V=>new Set([...V,y]):V=>{const A=new Set(V);return A.delete(y),A}),l("Error al actualizar favorito. Inténtalo de nuevo.")}},g=async()=>{var y,E,L,k;if(e!=null&&e._id)try{const j=(await Ve.obtenerFavoritos(e._id)).data.map(z=>z._id||z);x(new Set(j))}catch(S){I.error("Error al cargar favoritos:",S),I.error("Detalles del error:",{status:(y=S.response)==null?void 0:y.status,message:(L=(E=S.response)==null?void 0:E.data)==null?void 0:L.message,url:(k=S.config)==null?void 0:k.url});try{const j=localStorage.getItem(`favoritos-partituras-${e._id}`);j&&x(new Set(JSON.parse(j)))}catch(j){I.error("Error al cargar favoritos desde localStorage:",j)}}};f.useEffect(()=>{g()},[e]);const C=y=>y.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),P=({partitura:y})=>{const E=m.has(y._id),L=()=>{setTimeout(()=>{N()},50)};return n.jsx("div",{className:"bg-indigo-100 border border-indigo-200 rounded-lg shadow-sm dark:bg-gray-800 dark:border-gray-700 h-full flex flex-col w-full sm:min-w-[350px] lg:min-w-[380px] min-h-[130px] partitura-card transition-all duration-300 ease-in-out",children:n.jsxs("div",{className:"p-3 sm:p-4 text-left flex-1 flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2 sm:mb-3",children:[n.jsx("h5",{className:"text-lg sm:text-xl lg:text-2xl font-bold tracking-tight text-gray-900 dark:text-white flex-1 mr-2 break-words",children:y.compositor}),n.jsx("button",{onClick:()=>h(y._id),className:`p-1 rounded-full transition-colors flex-shrink-0 ${E?"text-amber-500 hover:text-amber-600":"text-slate-400 hover:text-amber-500"}`,title:E?"Quitar de favoritos":"Agregar a favoritos",children:n.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:E?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})]}),n.jsx("p",{className:"mb-2 sm:mb-3 text-base sm:text-lg font-semibold text-gray-700 dark:text-gray-400 break-words",children:y.obra}),n.jsxs("div",{className:"mt-auto space-y-2",children:[(y.partituraCello||y.partituraPiano)&&n.jsxs("details",{name:"detalles",className:"mb-2",onToggle:L,children:[n.jsx("summary",{className:"py-2 px-3 bg-indigo-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-indigo-200 dark:hover:bg-gray-600 transition-colors font-medium text-gray-900 dark:text-white",children:"Partituras"}),n.jsxs("div",{className:"mt-1 space-y-2",children:[y.partituraCello&&n.jsxs("a",{href:y.partituraCello,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between py-2 px-3 text-gray-900 dark:text-gray-300 hover:bg-indigo-200 dark:hover:bg-gray-600 rounded-md transition-colors",children:[n.jsx("span",{className:"text-sm font-medium",children:"Violoncello"}),n.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})]}),y.partituraPiano&&n.jsxs("a",{href:y.partituraPiano,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between py-2 px-3 text-gray-900 dark:text-gray-300 hover:bg-indigo-200 dark:hover:bg-gray-600 rounded-md transition-colors",children:[n.jsx("span",{className:"text-sm font-medium",children:"Piano/Otro"}),n.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})]})]})]}),y.movimientos&&y.movimientos.length>0&&n.jsxs("details",{name:"detalles",onToggle:L,children:[n.jsxs("summary",{className:"py-2 px-3 bg-indigo-100 dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-indigo-200 dark:hover:bg-gray-600 transition-colors font-medium text-gray-900 dark:text-white",children:["Acompañamientos (",y.movimientos.length,")"]}),n.jsx("div",{className:"mt-1 space-y-1",children:y.movimientos.map((k,S)=>n.jsxs("details",{name:"movimientos",className:"ml-4",onToggle:L,children:[n.jsx("summary",{className:"py-2 px-3 bg-indigo-100 dark:bg-gray-600 rounded-md cursor-pointer hover:bg-indigo-200 dark:hover:bg-gray-500 transition-colors text-medium text-gray-800 dark:text-gray-200",children:k.nombre}),(k.subtitulo||k.descripcion||k.duracion)&&n.jsx("p",{className:"mt-1 mb-2 text-sm text-gray-600 dark:text-gray-400 px-3",children:k.subtitulo||k.descripcion||k.duracion}),k.audios&&k.audios.length>0?n.jsx("div",{className:"mt-2 flex flex-wrap gap-2 px-3",children:k.audios.map((j,z)=>n.jsx("a",{href:j.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-9 h-9 text-sm font-semibold text-white bg-indigo-500 rounded-lg hover:bg-indigo-600 focus:ring-2 focus:outline-none focus:ring-indigo-300 transition-colors",children:j.nombre},z))}):n.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400 italic px-3",children:k.descripcion||k.duracion?"Movimiento configurado (estructura heredada)":"No hay acompañamientos disponibles"})]},S))})]})]})]})})};return s?n.jsx($r,{title:"Cargando partituras...",subtitle:"Obteniendo la colección de partituras musicales",showRenderMessage:!0,size:"large"}):n.jsxs("div",{className:"px-4 sm:px-6 py-8 max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("div",{className:"text-center mb-6",children:n.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Partituras"})}),(e==null?void 0:e.isAdmin)&&n.jsx("div",{className:"flex justify-center",children:n.jsxs(pt,{to:"/admin-partituras",className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 focus:ring-2 focus:outline-none focus:ring-indigo-300 transition-colors",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Administrar Partituras"]})})]}),n.jsx("div",{className:"mb-6 flex justify-center",children:n.jsxs("div",{className:"relative max-w-lg w-full",children:[n.jsx("div",{className:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none",children:n.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:n.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})}),n.jsx("input",{type:"search",value:i,onChange:y=>c(y.target.value),className:"block w-full p-4 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Buscar por compositor, obra o movimiento..."})]})}),n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.jsxs("button",{onClick:()=>v(!1),className:`inline-flex items-center px-4 py-2 text-sm font-medium rounded-lg border transition-colors ${w?"bg-slate-50 text-slate-700 border-slate-300 hover:bg-slate-100 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700":"bg-blue-500 text-white border-blue-500 hover:bg-blue-600"}`,children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14-7l-7 7-7-7m14 18l-7-7-7 7"})}),"Todas las partituras (",t.length,")"]}),n.jsxs("button",{onClick:()=>v(!0),className:`inline-flex items-center px-4 py-2 text-sm font-medium rounded-lg border transition-colors ${w?"bg-amber-400 text-amber-900 border-amber-400 hover:bg-amber-500":"bg-slate-50 text-slate-700 border-slate-300 hover:bg-slate-100 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700"}`,children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:w?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),"Solo favoritas (",m.size,")"]}),n.jsxs("div",{className:"flex items-center px-3 py-2 text-sm text-slate-600 dark:text-gray-400 bg-slate-100 dark:bg-gray-700 rounded-lg",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Mostrando: ",d.length]})]})}),o&&n.jsxs("div",{className:"mb-6 p-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert",children:[n.jsx("span",{className:"font-medium",children:"Error:"})," ",o]}),d.length>0?n.jsx("div",{ref:b,className:"grid grid-cols-1 sm:grid-cols-[repeat(auto-fill,minmax(350px,1fr))] lg:grid-cols-[repeat(auto-fill,minmax(380px,1fr))] gap-4 sm:gap-6 items-start justify-center",children:d.map(y=>n.jsx(P,{partitura:y},y._id))}):!s&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-gray-500 dark:text-gray-400 mb-4",children:n.jsx("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-.895 2-2 2s-2-.895-2-2 .895-2 2-2 2 .895 2 2zm12-3c0 1.105-.895 2-2 2s-2-.895-2-2 .895-2 2-2 2 .895 2 2zM9 10l12-3"})})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No se encontraron partituras"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:i?"Intenta con diferentes términos de búsqueda.":"No hay partituras disponibles en este momento."})]})]})},kb=()=>{const{usuario:e}=Je(),[t,r]=f.useState([]),[s,a]=f.useState(!0),[o,l]=f.useState(""),[i,c]=f.useState(""),[d,u]=f.useState(!1),[m,x]=f.useState(null),[w,v]=f.useState({compositor:"",obra:"",partituraCello:"",partituraPiano:"",movimientos:[]});f.useEffect(()=>{b()},[]);const b=async()=>{var S,j;try{a(!0);const z=await sn.obtenerTodas();r(z.data||[])}catch(z){l("Error al cargar partituras: "+(((j=(S=z.response)==null?void 0:S.data)==null?void 0:j.message)||z.message))}finally{a(!1)}},N=()=>{v({compositor:"",obra:"",partituraCello:"",partituraPiano:"",movimientos:[]}),x(null),u(!1),l(""),c("")},p=S=>{v({compositor:S.compositor||"",obra:S.obra||"",partituraCello:S.partituraCello||"",partituraPiano:S.partituraPiano||"",movimientos:(S.movimientos||[]).map(j=>({nombre:j.nombre||"",subtitulo:j.subtitulo||j.descripcion||j.duracion||"",audios:(j.audios||[]).map(z=>({nombre:z.nombre||"",url:z.url||""}))}))}),x(S),u(!0)},h=()=>{v(S=>({...S,movimientos:[...S.movimientos,{nombre:"",subtitulo:"",audios:[]}]}))},g=(S,j,z)=>{v(V=>({...V,movimientos:V.movimientos.map((A,Q)=>Q===S?{...A,[j]:z}:A)}))},C=S=>{v(j=>({...j,movimientos:j.movimientos.filter((z,V)=>V!==S)}))},P=S=>{v(j=>({...j,movimientos:j.movimientos.map((z,V)=>V===S?{...z,audios:[...z.audios||[],{nombre:"",url:""}]}:z)}))},y=(S,j,z,V)=>{v(A=>({...A,movimientos:A.movimientos.map((Q,J)=>J===S?{...Q,audios:(Q.audios||[]).map((T,R)=>R===j?{...T,[z]:V}:T)}:Q)}))},E=(S,j)=>{v(z=>({...z,movimientos:z.movimientos.map((V,A)=>A===S?{...V,audios:(V.audios||[]).filter((Q,J)=>J!==j)}:V)}))},L=async S=>{var j,z;if(S.preventDefault(),!w.compositor.trim()||!w.obra.trim()||!w.partituraCello.trim()){l("Los campos Compositor, Obra y Partitura de Violoncello son obligatorios");return}try{a(!0),l(""),m?(await sn.actualizar(m._id,w),c("Partitura actualizada exitosamente")):(await sn.crear(w),c("Partitura creada exitosamente")),await b(),N()}catch(V){l("Error al guardar partitura: "+(((z=(j=V.response)==null?void 0:j.data)==null?void 0:z.message)||V.message))}finally{a(!1)}},k=async S=>{var j,z;if(window.confirm("¿Estás seguro de que quieres eliminar esta partitura?"))try{a(!0),await sn.eliminar(S),c("Partitura eliminada exitosamente"),await b()}catch(V){l("Error al eliminar partitura: "+(((z=(j=V.response)==null?void 0:j.data)==null?void 0:z.message)||V.message))}finally{a(!1)}};return s&&!d?n.jsx($r,{title:"Cargando gestión de partituras...",subtitle:"Obteniendo datos del sistema",showRenderMessage:!0,size:"large"}):n.jsxs("div",{className:"px-4 py-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Gestión de Partituras"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Administrar partituras del sistema"})]}),!d&&n.jsx("div",{className:"flex justify-center",children:n.jsxs("button",{onClick:()=>u(!0),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 focus:ring-2 focus:outline-none focus:ring-blue-300 transition-colors",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Nueva Partitura"]})})]}),o&&n.jsxs("div",{className:"mb-6 p-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert",children:[n.jsx("span",{className:"font-medium",children:"Error:"})," ",o]}),i&&n.jsxs("div",{className:"mb-6 p-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert",children:[n.jsx("span",{className:"font-medium",children:"Éxito:"})," ",i]}),d&&n.jsxs("div",{className:"mb-8 bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:m?"Editar Partitura":"Nueva Partitura"}),n.jsx("button",{onClick:N,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("form",{onSubmit:L,className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Compositor *"}),n.jsx("input",{type:"text",required:!0,value:w.compositor||"",onChange:S=>v(j=>({...j,compositor:S.target.value})),className:"block w-full p-3 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"Ej: Bach, J.S."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Obra *"}),n.jsx("input",{type:"text",required:!0,value:w.obra||"",onChange:S=>v(j=>({...j,obra:S.target.value})),className:"block w-full p-3 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"Ej: Bach for the Cello - Álbum"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Enlace Partitura Violoncello *"}),n.jsx("input",{type:"url",required:!0,value:w.partituraCello||"",onChange:S=>v(j=>({...j,partituraCello:S.target.value})),className:"block w-full p-3 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"https://drive.google.com/..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Enlace Partitura Piano/Otros (opcional)"}),n.jsx("input",{type:"url",value:w.partituraPiano||"",onChange:S=>v(j=>({...j,partituraPiano:S.target.value})),className:"block w-full p-3 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"https://drive.google.com/..."})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Movimientos"}),n.jsxs("button",{type:"button",onClick:h,className:"inline-flex items-center px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 focus:ring-2 focus:outline-none focus:ring-blue-300 dark:bg-blue-900 dark:text-blue-300 dark:hover:bg-blue-800",children:[n.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Agregar Movimiento"]})]}),w.movimientos.map((S,j)=>n.jsxs("div",{className:"mb-6 p-4 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white",children:["Movimiento ",j+1]}),n.jsx("button",{type:"button",onClick:()=>C(j),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-200",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre del Movimiento"}),n.jsx("input",{type:"text",value:S.nombre||"",onChange:z=>g(j,"nombre",z.target.value),className:"block w-full p-2 text-sm text-gray-900 border border-gray-300 rounded-lg bg-white focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white",placeholder:"Ej: March in G"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Subtítulo (cuenta/tempo)"}),n.jsx("input",{type:"text",value:S.subtitulo||"",onChange:z=>g(j,"subtitulo",z.target.value),className:"block w-full p-2 text-sm text-gray-900 border border-gray-300 rounded-lg bg-white focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white",placeholder:"Ej: La cuenta es de 4 negras"})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Audios (velocidades)"}),n.jsxs("button",{type:"button",onClick:()=>P(j),className:"inline-flex items-center px-2 py-1 text-xs font-medium text-green-600 bg-green-50 rounded hover:bg-green-100 focus:ring-2 focus:outline-none focus:ring-green-300 dark:bg-green-900 dark:text-green-300 dark:hover:bg-green-800",children:[n.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Agregar Audio"]})]}),(S.audios||[]).map((z,V)=>n.jsxs("div",{className:"flex gap-2 mb-2",children:[n.jsx("input",{type:"text",value:z.nombre||"",onChange:A=>y(j,V,"nombre",A.target.value),className:"w-20 p-2 text-sm text-gray-900 border border-gray-300 rounded bg-white focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:border-gray-500 dark:text-white",placeholder:"60"}),n.jsx("input",{type:"url",value:z.url||"",onChange:A=>y(j,V,"url",A.target.value),className:"flex-1 p-2 text-sm text-gray-900 border border-gray-300 rounded bg-white focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:border-gray-500 dark:text-white",placeholder:"https://app.box.com/..."}),n.jsx("button",{type:"button",onClick:()=>E(j,V),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},V))]})]},j))]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:ring-2 focus:outline-none focus:ring-blue-300 dark:bg-gray-600 dark:text-gray-300 dark:border-gray-500 dark:hover:bg-gray-700",children:"Cancelar"}),n.jsx("button",{type:"submit",disabled:s,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:ring-2 focus:outline-none focus:ring-blue-300 disabled:opacity-50",children:s?"Guardando...":m?"Actualizar":"Crear"})]})]})]}),!d&&n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[n.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:n.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Partituras Existentes (",t.length,")"]})}),t.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-gray-500 dark:text-gray-400 mb-4",children:n.jsx("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-.895 2-2 2s-2-.895-2-2 .895-2 2-2 2 .895 2 2zm12-3c0 1.105-.895 2-2 2s-2-.895-2-2 .895-2 2-2 2 .895 2 2zM9 10l12-3"})})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No hay partituras"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Comienza creando tu primera partitura."})]}):n.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:t.map(S=>{var j,z;return n.jsx("div",{className:"p-6 hover:bg-gray-50 dark:hover:bg-gray-700",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1 text-left",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:S.compositor}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:S.obra}),n.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 space-x-4",children:[n.jsxs("span",{children:["Movimientos: ",((j=S.movimientos)==null?void 0:j.length)||0]}),n.jsxs("span",{children:["Total audios: ",((z=S.movimientos)==null?void 0:z.reduce((V,A)=>{var Q;return V+(((Q=A.audios)==null?void 0:Q.length)||0)},0))||0]})]})]}),n.jsxs("div",{className:"flex items-center space-x-3 ml-6",children:[n.jsxs("button",{onClick:()=>p(S),className:"inline-flex items-center px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 focus:ring-2 focus:outline-none focus:ring-blue-300 dark:bg-blue-900 dark:text-blue-300 dark:hover:bg-blue-800 transition-colors",children:[n.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Editar"]}),n.jsxs("button",{onClick:()=>k(S._id),className:"inline-flex items-center px-3 py-2 text-sm font-medium text-red-600 bg-red-50 rounded-lg hover:bg-red-100 focus:ring-2 focus:outline-none focus:ring-red-300 dark:bg-red-900 dark:text-red-300 dark:hover:bg-red-800 transition-colors",children:[n.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Eliminar"]})]})]})},S._id)})})]})]})},Sb=()=>{const{claseId:e}=gx(),[t]=bf(),{usuario:r,isAdmin:s}=Je(),a=t.get("usuarioId"),o=t.get("fecha"),l=t.get("newTab")==="true";I.debug("ResumenClasePage - Parámetros recibidos",{claseId:e,usuarioId:a,fecha:o,isNewTab:l,usuario:r,url:window.location.href,pathname:window.location.pathname,search:window.location.search}),I.dev("Componente ResumenClasePage renderizándose correctamente");const[i,c]=f.useState(!1);if(f.useEffect(()=>{I.dev("ResumenClasePage useEffect - verificando parámetros"),I.dev("Todos los parámetros necesarios presentes:",!!e&&!!a),e||I.error("claseId faltante"),a||I.error("usuarioId faltante"),r||I.error("usuario no autenticado")},[e,a,r]),I.debug("ResumenClasePage - Verificación de permisos",{usuario:r,rol:r==null?void 0:r.rol,isAdmin:s()}),!r)return I.dev("ResumenClasePage - Usuario no cargado aún"),n.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:n.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[n.jsx("h2",{className:"text-xl font-bold text-blue-600 mb-2",children:"Cargando..."}),n.jsx("p",{className:"text-gray-600",children:"Verificando autenticación..."}),n.jsx("div",{className:"mt-4 animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})]})});if(!s())return I.warn("ResumenClasePage - Usuario no autorizado. Rol actual:",r.rol),n.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:n.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[n.jsx("h2",{className:"text-xl font-bold text-red-600 mb-2",children:"Acceso Denegado"}),n.jsx("p",{className:"text-gray-600",children:"No tienes permisos para acceder a esta página."}),n.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Rol actual: ",r.rol]})]})});const d=()=>{c(!0);const m={type:"resumen_guardado",claseId:e,usuarioId:a,timestamp:Date.now()};localStorage.setItem("resumen_update_event",JSON.stringify(m)),setTimeout(()=>{localStorage.removeItem("resumen_update_event")},1e3),setTimeout(()=>c(!1),3e3)},u=()=>{window.close()};return n.jsxs("div",{className:"min-h-screen bg-gray-100",children:[n.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200 px-6 py-4 sticky top-0 z-10",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"📝 Resumen de Clase"}),o&&n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["📅 ",$e(o)]})]}),n.jsxs("div",{className:"flex gap-3",children:[i&&n.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-3 py-2 rounded-md text-sm",children:"✅ Guardado correctamente"}),n.jsx("button",{onClick:u,className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-colors",children:"Cerrar"})]})]})}),n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsx(lc,{claseId:e,usuarioId:a,fecha:o,onClose:u,onSave:d,isStandalone:!0})})})]})},Gd=({title:e,subtitle:t,size:r="normal"})=>{const s=r==="small"?"h-6 w-6":"h-8 w-8";return n.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[n.jsx("div",{className:`animate-spin rounded-full ${s} border-b-2 border-blue-600`}),n.jsx("p",{className:"mt-3 text-gray-600 font-medium",children:e}),t&&n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t})]})},Cb=({resumen:e,usuario:t})=>{var o;const[r,s]=f.useState(!1);if(!e||!e.clase)return I.warn("ResumenCard: resumen o clase es null/undefined",e),n.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4 shadow-md",children:n.jsx("p",{className:"text-red-600",children:"⚠️ Error: Datos de resumen incompletos"})});const a=async()=>{var l;try{s(!0);const i=oc({fecha:(l=e.clase)!=null&&l.fecha?$e(e.clase.fecha):"Fecha no disponible",obrasEstudiadas:e.obrasEstudiadas||[],objetivosProximaClase:e.objetivosProximaClase||""});t!=null&&t.telefono?pr(i,t.telefono):pr(i)}catch(i){I.error("Error al enviar por WhatsApp:",i),alert("❌ Error al procesar el envío por WhatsApp")}finally{s(!1)}};return n.jsxs("div",{className:"bg-white border-2 border-blue-200 rounded-lg p-4 shadow-md hover:shadow-lg transition-shadow",children:[n.jsx("div",{className:"flex justify-between items-start mb-4",children:n.jsx("div",{children:n.jsxs("p",{className:"text-sm text-gray-600 font-bold",children:["📅 ",(o=e.clase)!=null&&o.fecha?$e(e.clase.fecha):"Fecha no disponible"]})})}),e.obrasEstudiadas&&e.obrasEstudiadas.length>0&&n.jsxs("div",{className:"mb-4",children:[n.jsxs("h5",{className:"text-sm font-medium text-gray-700 mb-2 text-left",children:["🎼 Obras (",e.obrasEstudiadas.length,")"]}),n.jsx("div",{className:"space-y-2",children:(()=>{const l=e.obrasEstudiadas.reduce((i,c,d)=>{const u=`${c.compositor}-${c.obra}`;return i[u]||(i[u]={compositor:c.compositor,obra:c.obra,movimientos:[]}),i[u].movimientos.push(c),i},{});return Object.values(l).map((i,c)=>n.jsxs("div",{className:"bg-gray-50 p-3 rounded-md text-left",children:[n.jsxs("div",{className:"font-medium text-gray-800 mb-2",children:[i.compositor," - ",i.obra,i.movimientos.length>1&&n.jsxs("span",{className:"ml-2 bg-blue-500 text-white text-xs px-2 py-1 rounded-full",children:[i.movimientos.length," partes"]})]}),n.jsx("div",{className:"space-y-1",children:i.movimientos.map((d,u)=>n.jsxs("div",{className:"text-sm",children:[d.movimientosCompases&&n.jsxs("div",{className:"text-blue-600",children:["📍 ",d.movimientosCompases]}),d.comentarios&&n.jsxs("div",{className:"text-gray-600 mt-1",children:["💬 ",d.comentarios]}),i.movimientos.length>1&&u<i.movimientos.length-1&&n.jsx("div",{className:"border-b border-gray-200 my-2"})]},u))})]},c))})()})]}),e.objetivosProximaClase&&n.jsxs("div",{className:"mb-4",children:[n.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2 text-left",children:"🎯 Próxima Clase"}),n.jsx("div",{className:"bg-green-50 p-3 rounded-md text-left",children:n.jsx("p",{className:"text-sm text-gray-700",children:e.objetivosProximaClase})})]}),n.jsx("div",{className:"pt-3 border-t border-gray-200",children:n.jsx("button",{onClick:a,disabled:r,className:"w-full px-3 py-2 text-sm bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 transition-colors",children:r?"Enviando...":"📱 WhatsApp"})})]})},Kd=({clase:e})=>{const t={no_iniciada:{label:"No iniciada",color:"bg-gray-50",textColor:"text-gray-800",borderColor:"border-gray-200",footerColor:"bg-gray-100",icon:"⏳"},tomada:{label:"Tomada",color:"bg-green-50",textColor:"text-green-800",borderColor:"border-green-200",footerColor:"bg-green-100",icon:"✅"},ausente:{label:"Ausente",color:"bg-red-50",textColor:"text-red-800",borderColor:"border-red-200",footerColor:"bg-red-100",icon:"❌"},reprogramar:{label:"Reprogramada",color:"bg-amber-50",textColor:"text-amber-800",borderColor:"border-amber-200",footerColor:"bg-amber-100",icon:"🔄"},recuperada:{label:"Recuperada",color:"bg-purple-50",textColor:"text-purple-800",borderColor:"border-purple-200",footerColor:"bg-purple-100",icon:"🔁"},realizada:{label:"Realizada",color:"bg-green-50",textColor:"text-green-800",borderColor:"border-green-200",footerColor:"bg-green-100",icon:"✅"},cancelada:{label:"Cancelada",color:"bg-red-50",textColor:"text-red-800",borderColor:"border-red-200",footerColor:"bg-red-100",icon:"🚫"},pendiente:{label:"Pendiente",color:"bg-blue-50",textColor:"text-blue-800",borderColor:"border-blue-200",footerColor:"bg-blue-100",icon:"⏰"}},r=t[e.estado]||t.no_iniciada,s=new Date(e.fecha),a=s.toLocaleDateString("es-ES",{month:"long"}).toUpperCase(),o=s.getDate();return n.jsxs("div",{className:`${r.color} ${r.borderColor} border rounded overflow-hidden shadow-sm hover:shadow-md transition-shadow min-h-[80px] sm:min-h-[90px]`,children:[n.jsx("div",{className:`${r.footerColor} px-1 py-0.5 text-center border-b ${r.borderColor}`,children:n.jsx("h4",{className:`text-xs font-bold ${r.textColor} tracking-wide`,children:a.slice(0,3)})}),n.jsxs("div",{className:"px-1 py-1 text-center flex-1 flex flex-col justify-center",children:[n.jsx("div",{className:`text-sm sm:text-base lg:text-lg font-bold ${r.textColor} mb-0.5`,children:o}),n.jsxs("div",{className:"space-y-0.5 text-xs",children:[e.fechaReprogramada&&n.jsx("div",{className:`${r.textColor} opacity-80`,children:n.jsxs("p",{className:"text-xs",children:[new Date(e.fechaReprogramada).getDate(),"/",new Date(e.fechaReprogramada).getMonth()+1]})}),e.notas&&!e.fechaReprogramada&&n.jsx("div",{className:`${r.textColor} opacity-80`,children:n.jsxs("p",{className:"text-xs leading-tight italic line-clamp-1",children:['"',e.notas.slice(0,20),'..."']})})]})]}),n.jsx("div",{className:`${r.footerColor} px-1 py-0.5 text-center border-t ${r.borderColor} mt-auto`,children:n.jsxs("div",{className:"flex items-center justify-center space-x-0.5",children:[n.jsx("span",{className:"text-xs",children:r.icon}),n.jsx("span",{className:`text-xs font-medium ${r.textColor}`,children:r.label.slice(0,8)})]})})]})},Eb=()=>{const{usuario:e}=Je(),[t,r]=f.useState([]),[s,a]=f.useState({ultimoPago:[],historial:[]}),[o,l]=f.useState(!0),[i,c]=f.useState(!0);f.useEffect(()=>{e!=null&&e._id&&(d(),u())},[e]);const d=async()=>{try{l(!0);const w=((await mn.obtenerPorUsuario(e._id)).data.resumenes||[]).filter(v=>v&&v.clase&&v.clase.fecha).sort((v,b)=>new Date(b.clase.fecha)-new Date(v.clase.fecha));r(w)}catch(m){I.error("Error al cargar resúmenes:",m),r([])}finally{l(!1)}},u=async()=>{try{c(!0);const m=await kt.obtenerSeparadas(e._id),x=v=>v.sort((b,N)=>new Date(b.fecha)-new Date(N.fecha)),w=m.data||{clasesUltimoPago:[],historialClases:[]};a({ultimoPago:x(w.clasesUltimoPago||[]),historial:x(w.historialClases||[])})}catch(m){I.error("Error al cargar clases:",m),a({ultimoPago:[],historial:[]})}finally{c(!1)}};return n.jsxs("div",{className:"max-w-7xl mx-auto p-3 sm:p-6",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-6 sm:mb-8",children:"Mis Clases"}),n.jsx("div",{className:"mb-12",children:i?n.jsx(Gd,{title:"Cargando clases...",subtitle:"Obteniendo tus clases programadas"}):s.ultimoPago.length>0||s.historial.length>0?n.jsxs("div",{className:"space-y-6",children:[s.ultimoPago.length>0&&n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3 sm:p-6",children:[n.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-3 sm:mb-4 flex items-center",children:[n.jsx("span",{className:"w-3 h-3 bg-green-500 rounded-full mr-3"}),"Clases del último pago (",s.ultimoPago.length,")"]}),n.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-7 xl:grid-cols-8 2xl:grid-cols-9 gap-1.5 sm:gap-2",children:s.ultimoPago.map(m=>n.jsx(Kd,{clase:m},m._id))})]}),s.historial.length>0&&n.jsxs("details",{className:"bg-white rounded-lg border border-gray-200 [&[open]>summary>span>svg]:rotate-90",children:[n.jsx("summary",{className:"p-3 sm:p-6 cursor-pointer hover:bg-gray-50 rounded-t-lg list-none",children:n.jsxs("span",{className:"text-base sm:text-lg font-semibold text-gray-900 flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-3 transition-transform duration-200",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),"Historial de clases (",s.historial.length,")"]})}),n.jsx("div",{className:"px-3 sm:px-6 pb-3 sm:pb-6",children:n.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-7 xl:grid-cols-8 2xl:grid-cols-9 gap-1.5 sm:gap-2",children:s.historial.map(m=>n.jsx(Kd,{clase:m},m._id))})})]})]}):n.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[n.jsx("div",{className:"text-4xl mb-4",children:"📅"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay clases programadas"}),n.jsx("p",{className:"text-gray-600",children:"Tus próximas clases aparecerán aquí una vez que sean programadas."})]})}),n.jsx("div",{className:"mb-12",children:o?n.jsx(Gd,{title:"Cargando resúmenes...",subtitle:"Obteniendo tus resúmenes de clase"}):t.length>0?n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[n.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-3 sm:mb-4 flex items-center",children:[n.jsx("span",{className:"w-3 h-3 bg-blue-500 rounded-full mr-3"}),"Resúmenes de clases (",t.length,")"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 max-w-none",children:t.map(m=>n.jsx("div",{className:"max-w-sm",children:n.jsx(Cb,{resumen:m,usuario:e})},m._id))})]}):n.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[n.jsx("div",{className:"text-4xl mb-4",children:"📚"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay resúmenes de clases"}),n.jsx("p",{className:"text-gray-600",children:"Los resúmenes de tus clases aparecerán aquí una vez que el profesor los complete."})]})})]})},Pb=({title:e,subtitle:t,size:r="normal"})=>{const s=r==="small"?"h-6 w-6":"h-8 w-8";return n.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[n.jsx("div",{className:`animate-spin rounded-full ${s} border-b-2 border-blue-600`}),n.jsx("p",{className:"mt-3 text-gray-600 font-medium",children:e}),t&&n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t})]})},_b=({pago:e})=>{var a;const[t,r]=f.useState(!1),s=()=>{const o=e.facturaUrl||e.linkFactura;o&&o!=="undefined"&&o!==""?(r(!0),window.open(o,"_blank"),setTimeout(()=>r(!1),1e3)):alert("No hay factura disponible para este pago")};return n.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-2.5 shadow-md hover:shadow-lg transition-all duration-200 w-full min-w-0 flex flex-col",children:[n.jsx("div",{className:"mb-2 flex-shrink-0",children:n.jsxs("h3",{className:"text-xs font-semibold text-gray-900 mb-1 leading-tight",children:["Pago ",kv(e.fechaCreacion||e.createdAt)]})}),n.jsxs("div",{className:"space-y-1 flex-grow",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs text-gray-600",children:"Monto:"}),n.jsxs("span",{className:"text-sm font-bold text-green-600",children:["$",(a=e.monto)==null?void 0:a.toLocaleString()]})]}),e.periodo&&n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs text-gray-600",children:"Período:"}),n.jsx("span",{className:"text-xs font-medium truncate ml-1",children:e.periodo})]}),e.fechaVencimiento&&n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs text-gray-600",children:"Vence:"}),n.jsx("span",{className:"text-xs font-medium",children:Nv(e.fechaVencimiento)})]}),e.metodoPago&&n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs text-gray-600",children:"Método:"}),n.jsx("span",{className:"text-xs font-medium truncate ml-1",children:e.metodoPago})]}),e.clases&&e.clases.length>0&&n.jsxs("div",{className:"mt-2 p-1.5 bg-blue-50 rounded border",children:[n.jsxs("h4",{className:"text-xs font-medium text-gray-700 mb-1.5 text-center",children:["📚 Clases (",e.clases.length,")"]}),n.jsx("div",{className:"space-y-1",children:e.clases.map((o,l)=>n.jsx("div",{className:"flex flex-col gap-0.5 p-1 bg-white rounded text-xs",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-gray-600 font-medium",children:Sv(o.fecha)}),n.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-xs font-medium ${o.estado==="tomada"?"bg-green-100 text-green-700":o.estado==="ausente"?"bg-red-100 text-red-700":o.estado==="recuperada"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"}`,children:o.estado==="no_iniciada"?"Pendiente":o.estado==="tomada"?"Tomada":o.estado==="ausente"?"Ausente":o.estado==="recuperada"?"Recuperada":o.estado})]})},l))})]}),e.notas&&n.jsx("div",{className:"mt-2 p-1.5 bg-gray-50 rounded border",children:n.jsxs("p",{className:"text-xs text-gray-700",children:["📝 ",e.notas]})})]}),n.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200 flex-shrink-0",children:(()=>{const o=e.facturaUrl||e.linkFactura;return o&&o!=="undefined"&&o!==""&&o!=="null"?n.jsx("button",{onClick:s,disabled:t,className:"w-full px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center justify-center gap-1 text-xs font-medium",children:t?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}),"Descargando"]}):n.jsx(n.Fragment,{children:"📄 Factura"})}):n.jsx("div",{className:"w-full px-2 py-1 bg-gray-100 text-gray-500 rounded text-center text-xs",children:"Sin factura"})})()})]})},Lb=()=>{const{usuario:e}=Je(),[t,r]=f.useState([]),[s,a]=f.useState(!0);f.useEffect(()=>{e!=null&&e._id&&o()},[e]);const o=async()=>{try{a(!0);const i=((await Hn.obtenerPorUsuario(e._id)).data||[]).sort((c,d)=>new Date(d.fechaCreacion||d.createdAt)-new Date(c.fechaCreacion||c.createdAt));r(i)}catch(l){I.error("Error al cargar pagos:",l),r([])}finally{a(!1)}};return n.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Mis Pagos"}),s?n.jsx(Pb,{title:"Cargando pagos...",subtitle:"Obteniendo tu historial de pagos"}):t.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-3 auto-rows-min",children:t.map(l=>n.jsx(_b,{pago:l},l._id))}):n.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[n.jsx("div",{className:"text-4xl mb-4",children:"�"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay pagos registrados"}),n.jsx("p",{className:"text-gray-600",children:"Tu historial de pagos y facturas aparecerán aquí."})]})]})},Rb=()=>{const[e,t]=f.useState(null),[r,s]=f.useState(!0),[a,o]=f.useState("todos");f.useEffect(()=>{l()},[]);const l=async()=>{try{s(!0);const i=Jf.getUsuario();t(i)}catch(i){console.error("Error al cargar usuario:",i)}finally{s(!1)}};return r?n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),n.jsx("div",{className:"space-y-4",children:[1,2,3].map(i=>n.jsx("div",{className:"h-24 bg-gray-200 rounded"},i))})]})}):n.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(ni,{className:"w-8 h-8 text-blue-600"}),n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Estudios"})]}),n.jsx("div",{className:"flex items-center space-x-4",children:n.jsxs("select",{value:a,onChange:i=>o(i.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"todos",children:"Todos los estudios"}),n.jsx("option",{value:"en_progreso",children:"En progreso"}),n.jsx("option",{value:"finalizado",children:"Finalizados"}),n.jsx("option",{value:"pausado",children:"Pausados"})]})})]}),e&&n.jsx(cp,{usuarioId:e._id,mostrarTitulo:!1,modoVisualizacion:"cards",filtrarEstados:a==="todos"?null:[a],esAdmin:!1},`estudios-${e._id}-${a}`)]})},dp={obtenerPartituras:async(e={})=>{try{const t=new URLSearchParams;return e.compositor&&t.append("compositor",e.compositor),e.dificultad&&t.append("dificultad",e.dificultad),e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.q&&t.append("q",e.q),(await H.get(`/partituras?${t}`)).data}catch(t){throw console.error("Error al obtener partituras:",t),t}},buscarPartituras:async e=>{try{return(await H.get(`/partituras/buscar?q=${encodeURIComponent(e)}`)).data}catch(t){throw console.error("Error al buscar partituras:",t),t}},obtenerPorCompositor:async e=>{try{return(await H.get(`/partituras/compositor/${encodeURIComponent(e)}`)).data}catch(t){throw console.error("Error al obtener partituras por compositor:",t),t}},obtenerPartituraPorId:async e=>{try{return(await H.get(`/partituras/${e}`)).data}catch(t){throw console.error("Error al obtener partitura:",t),t}},crearPartitura:async e=>{try{return(await H.post("/partituras",e)).data}catch(t){throw console.error("Error al crear partitura:",t),t}},actualizarPartitura:async(e,t)=>{try{return(await H.put(`/partituras/${e}`,t)).data}catch(r){throw console.error("Error al actualizar partitura:",r),r}},eliminarPartitura:async e=>{try{return(await H.delete(`/partituras/${e}`)).data}catch(t){throw console.error("Error al eliminar partitura:",t),t}},obtenerCompositores:async()=>{try{return(await H.get("/partituras/compositores")).data}catch(e){throw console.error("Error al obtener compositores:",e),e}},obtenerEstadisticas:async()=>{try{return(await H.get("/partituras/estadisticas")).data}catch(e){throw console.error("Error al obtener estadísticas:",e),e}}},zb=()=>{const[e,t]=f.useState([]),[r,s]=f.useState([]),[a,o]=f.useState([]),[l,i]=f.useState(!0),[c,d]=f.useState(""),[u,m]=f.useState(!1),[x,w]=f.useState(null),[v,b]=f.useState({usuarioId:"",estado:"",busqueda:""});f.useEffect(()=>{N()},[]),f.useEffect(()=>{p()},[v]);const N=async()=>{try{i(!0);const[k,S,j]=await Promise.all([tr.obtenerEstudios(),Ve.obtenerTodos(),dp.obtenerPartituras()]);t(k.estudios||[]),s(Array.isArray(S)?S:S.data||[]),o(j.partituras||[])}catch(k){console.error("Error al cargar datos:",k),d("Error al cargar los datos")}finally{i(!1)}},p=async()=>{try{const k={};v.usuarioId&&(k.usuarioId=v.usuarioId),v.estado&&(k.estado=v.estado);let j=(await tr.obtenerEstudios(k)).estudios||[];if(v.busqueda){const z=v.busqueda.toLowerCase();j=j.filter(V=>{var A,Q;return V.compositor.toLowerCase().includes(z)||V.obra.toLowerCase().includes(z)||((Q=(A=V.usuario)==null?void 0:A.nombre)==null?void 0:Q.toLowerCase().includes(z))})}t(j)}catch(k){console.error("Error al cargar estudios:",k),d("Error al cargar los estudios")}},h=(k=null)=>{w(k),m(!0)},g=()=>{m(!1),w(null),d("")},C=()=>{p()},P=async k=>{if(window.confirm("¿Estás seguro de que quieres eliminar este estudio?"))try{await tr.eliminarEstudio(k),await p()}catch(S){console.error("Error al eliminar estudio:",S),d("Error al eliminar el estudio")}},y=async k=>{try{await tr.finalizarEstudio(k),await p()}catch(S){console.error("Error al finalizar estudio:",S),d("Error al finalizar el estudio")}},E=k=>{switch(k){case"en_progreso":return"bg-blue-100 text-blue-800";case"finalizado":return"bg-green-100 text-green-800";case"pausado":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},L=k=>$e(k);return l?n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),n.jsx("div",{className:"space-y-4",children:[1,2,3].map(k=>n.jsx("div",{className:"h-20 bg-gray-200 rounded"},k))})]})}):n.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(ni,{className:"w-8 h-8 text-blue-600"}),n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestión de Estudios"})]}),n.jsxs("button",{onClick:()=>h(),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(ab,{className:"w-5 h-5"}),n.jsx("span",{children:"Nuevo Estudio"})]})]}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buscar"}),n.jsxs("div",{className:"relative",children:[n.jsx(dc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),n.jsx("input",{type:"text",value:v.busqueda,onChange:k=>b({...v,busqueda:k.target.value}),placeholder:"Compositor, obra o estudiante...",className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estudiante"}),n.jsxs("select",{value:v.usuarioId,onChange:k=>b({...v,usuarioId:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"Todos los estudiantes"}),r.filter(k=>k.rol==="usuario").map(k=>n.jsxs("option",{value:k._id,children:[k.nombre," ",k.apellido]},k._id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),n.jsxs("select",{value:v.estado,onChange:k=>b({...v,estado:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"Todos los estados"}),n.jsx("option",{value:"en_progreso",children:"En progreso"}),n.jsx("option",{value:"finalizado",children:"Finalizado"}),n.jsx("option",{value:"pausado",children:"Pausado"})]})]}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{onClick:()=>b({usuarioId:"",estado:"",busqueda:""}),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Limpiar filtros"})})]})}),c&&n.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:n.jsx("p",{className:"text-red-600",children:c})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(ni,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay estudios"}),n.jsx("p",{className:"text-gray-500",children:"Comienza creando el primer estudio para tus estudiantes."})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estudiante"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Obra"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progreso"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fechas"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(k=>{var S,j,z;return n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(lp,{className:"w-5 h-5 text-gray-400 mr-2"}),n.jsxs("div",{children:[n.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[(S=k.usuario)==null?void 0:S.nombre," ",(j=k.usuario)==null?void 0:j.apellido]}),n.jsx("div",{className:"text-sm text-gray-500",children:(z=k.usuario)==null?void 0:z.email})]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.obra}),n.jsx("div",{className:"text-sm text-gray-500",children:k.compositor})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${k.porcentajeProgreso}%`}})}),n.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[k.porcentajeProgreso,"%"]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${E(k.estado)}`,children:k.estado.replace("_"," ")})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.jsxs("div",{children:[n.jsxs("div",{children:["Inicio: ",L(k.fechaInicio)]}),k.fechaFinalizacionSugerida&&n.jsxs("div",{children:["Meta: ",L(k.fechaFinalizacionSugerida)]})]})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[k.estado==="en_progreso"&&n.jsx("button",{onClick:()=>y(k._id),className:"text-green-600 hover:text-green-900 transition-colors",title:"Finalizar estudio",children:n.jsx(tp,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>h(k),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Editar estudio",children:n.jsx(ub,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>P(k._id),className:"text-red-600 hover:text-red-900 transition-colors",title:"Eliminar estudio",children:n.jsx(op,{className:"w-4 h-4"})})]})]},k._id)})})]})})}),n.jsx(ip,{mostrar:u,onCerrar:g,onGuardado:C,estudioEditando:x})]})},Oe={crearSesion:async e=>(await H.post("/sesiones-estudio",e)).data,obtenerSesionActiva:async()=>(await H.get("/sesiones-estudio/activa")).data,actualizarSesion:async(e,t)=>(await H.put(`/sesiones-estudio/${e}`,t)).data,finalizarSesion:async(e,t)=>(await H.put(`/sesiones-estudio/${e}/finalizar`,t)).data,obtenerHistorial:async(e={})=>{const t=new URLSearchParams;return e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.compositor&&t.append("compositor",e.compositor),e.obra&&t.append("obra",e.obra),e.fechaDesde&&t.append("fechaDesde",e.fechaDesde),e.fechaHasta&&t.append("fechaHasta",e.fechaHasta),(await H.get(`/sesiones-estudio/historial?${t.toString()}`)).data},obtenerEstadisticas:async(e,t,r,s)=>{const a=new URLSearchParams;return e&&a.append("fechaDesde",e),t&&a.append("fechaHasta",t),r&&a.append("compositor",r),s&&a.append("obra",s),(await H.get(`/sesiones-estudio/estadisticas?${a.toString()}`)).data},obtenerObras:async()=>(await H.get("/sesiones-estudio/obras")).data,eliminarSesion:async e=>(await H.delete(`/sesiones-estudio/${e}`)).data,editarSesion:async(e,t)=>(await H.put(`/sesiones-estudio/${e}/editar`,t)).data,obtenerSesionPorId:async e=>(await H.get(`/sesiones-estudio/${e}`)).data,compartirSesionConProfesor:async(e,t,r="")=>(await H.post(`/sesiones-estudio/${e}/compartir`,{compartir:t,comentarioAlumno:r})).data,obtenerSesionesCompartidas:async(e={})=>{const t=new URLSearchParams;return e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.compositor&&t.append("compositor",e.compositor),e.obra&&t.append("obra",e.obra),e.fechaDesde&&t.append("fechaDesde",e.fechaDesde),e.fechaHasta&&t.append("fechaHasta",e.fechaHasta),e.alumno&&t.append("alumno",e.alumno),(await H.get(`/sesiones-estudio/compartidas?${t.toString()}`)).data},agregarComentarioProfesor:async(e,t)=>(await H.post(`/sesiones-estudio/${e}/comentario-profesor`,{comentarioProfesor:t})).data},Tb=({isOpen:e,onClose:t,onCompartir:r,datosResumen:s})=>{const[a,o]=f.useState(""),[l,i]=f.useState(!1);if(!e)return null;const c=async u=>{if(!l){i(!0);try{await r(u,a)}catch(m){console.error("Error al procesar decisión:",m)}finally{i(!1)}}},d=u=>{if(!u||isNaN(u)||u<0)return"00:00";const m=Math.floor(Number(u)),x=Math.floor(m/3600),w=Math.floor(m%3600/60),v=m%60;return x>0?`${x.toString().padStart(2,"0")}:${w.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}`:`${w.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}`};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:n.jsx(qd,{className:"w-5 h-5 text-blue-600"})}),n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Sesión Finalizada"})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(yo,{className:"w-5 h-5"})})]})}),n.jsxs("div",{className:"p-6",children:[s&&n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Resumen de tu sesión:"}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:s.compositor})," - ",s.obra]}),(s.movimientoPieza||s.compasesEstudiados)&&n.jsxs("div",{children:[s.movimientoPieza&&n.jsx("span",{children:s.movimientoPieza}),s.movimientoPieza&&s.compasesEstudiados&&n.jsx("span",{children:" • "}),s.compasesEstudiados&&n.jsx("span",{children:s.compasesEstudiados})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Tiempo practicado:"})," ",d(s.tiempoTotalSegundos)]}),s.metronomomUsado&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"BPM:"})," ",s.bpmInicial,s.bpmFinal!==s.bpmInicial&&` → ${s.bpmFinal}`]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"¿Te gustaría compartir esta sesión con tu profesor?"}),n.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:"Compartir tus sesiones ayuda a tu profesor a entender tu progreso y brindarte mejor orientación. Siempre puedes elegir qué compartir y qué mantener privado."})]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(ur,{className:"w-4 h-4 inline mr-1"}),"Comentario para tu profesor (opcional)"]}),n.jsx("textarea",{value:a,onChange:u=>o(u.target.value),placeholder:"Ej: Tuve dificultades con los compases 12-16, me gustaría repasarlo en clase...",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:3,maxLength:500}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[a.length,"/500 caracteres"]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n.jsxs("button",{onClick:()=>c(!0),disabled:l,className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center justify-center space-x-2 transition-colors disabled:opacity-50",children:[n.jsx(qd,{className:"w-4 h-4"}),n.jsx("span",{children:"Compartir con profesor"})]}),n.jsxs("button",{onClick:()=>c(!1),disabled:l,className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg flex items-center justify-center space-x-2 transition-colors disabled:opacity-50",children:[n.jsx(Vv,{className:"w-4 h-4"}),n.jsx("span",{children:"Mantener privado"})]})]}),n.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:n.jsxs("p",{className:"text-xs text-blue-700",children:[n.jsx("strong",{children:"Privacidad:"})," Solo tú puedes decidir qué sesiones compartir. Las sesiones privadas nunca serán visibles para tu profesor."]})})]})]})})},Fb=()=>{const[e,t]=f.useState(null),[r,s]=f.useState("detenido"),[a,o]=f.useState(0),[l,i]=f.useState(120),[c,d]=f.useState(!1),[u,m]=f.useState(""),[x,w]=f.useState(""),[v,b]=f.useState(""),[N,p]=f.useState(""),[h,g]=f.useState(""),[C,P]=f.useState(""),[y,E]=f.useState(""),[L,k]=f.useState([]),[S,j]=f.useState([]),[z,V]=f.useState([]),[A,Q]=f.useState(!1),[J,T]=f.useState(null),R=f.useRef(null),B=f.useRef(null),U=f.useRef(null),D=f.useRef(120),$=f.useRef(null),K=f.useRef(null);f.useEffect(()=>(G(),Y(),oe(),()=>{R.current&&clearInterval(R.current),B.current&&clearInterval(B.current),$.current&&clearTimeout($.current)}),[]),f.useEffect(()=>{let M=null;const W=async()=>{try{"wakeLock"in navigator&&r==="corriendo"&&(M=await navigator.wakeLock.request("screen"),console.log("🔒 Wake Lock activado - La pantalla no se apagará durante la sesión"))}catch(Vr){console.log("Wake Lock no disponible o falló:",Vr)}},Ye=async()=>{if(M)try{await M.release(),M=null,console.log("🔓 Wake Lock liberado")}catch(Vr){console.log("Error al liberar Wake Lock:",Vr)}};r==="corriendo"?W():Ye();const Wt=()=>{!document.hidden&&r==="corriendo"&&(console.log("👁️ Página visible - Sesión continúa activa"),W())};return document.addEventListener("visibilitychange",Wt),()=>{document.removeEventListener("visibilitychange",Wt),Ye()}},[r]),f.useEffect(()=>{const M=[...new Set(L.map(W=>W.compositor))];j(M)},[L]),f.useEffect(()=>{if(u){const M=L.filter(W=>W.compositor===u).map(W=>W.obra||W.titulo);V([...new Set(M)])}else V([])},[u,L]);const G=async()=>{try{const M=await Oe.obtenerSesionActiva();if(M.success&&M.sesion){const W=M.sesion;if(t(W),m(W.compositor),w(W.obra),b(W.movimientoPieza||""),p(W.compasesEstudiados||""),g(W.comentarios||""),i(W.bpmFinal||W.bpmInicial||120),W.estado==="activa"){const Ye=Math.floor((new Date-new Date(W.fechaInicio))/1e3);o(Ye),s("corriendo"),Et()}else W.estado==="pausada"&&(o(W.tiempoTotalSegundos||0),s("pausado"))}}catch(M){console.error("Error al cargar sesión activa:",M)}},Y=async()=>{try{const M=await dp.obtenerPartituras();let W=[];if(M&&M.success&&M.partituras?W=M.partituras:Array.isArray(M)?W=M:M&&Array.isArray(M.data)&&(W=M.data),W&&W.length>0){k(W);return}throw new Error("No se encontraron partituras")}catch(M){console.error("Error al cargar partituras desde API:",M),k([{compositor:"Johann Sebastian Bach",obra:"Invención No. 1 en Do Mayor",dificultad:"Intermedio"},{compositor:"Johann Sebastian Bach",obra:"Invención No. 4 en Re menor",dificultad:"Intermedio"},{compositor:"Johann Sebastian Bach",obra:"Concierto para Violín en La menor",dificultad:"Avanzado"},{compositor:"Wolfgang Amadeus Mozart",obra:"Sonata No. 11 en La Mayor",dificultad:"Avanzado"},{compositor:"Wolfgang Amadeus Mozart",obra:"Concierto para Violín No. 3",dificultad:"Avanzado"},{compositor:"Ludwig van Beethoven",obra:'Sonata para Violín No. 9 "Kreutzer"',dificultad:"Muy Avanzado"},{compositor:"Ludwig van Beethoven",obra:"Concierto para Violín en Re Mayor",dificultad:"Muy Avanzado"},{compositor:"Antonio Vivaldi",obra:"Las Cuatro Estaciones - Primavera",dificultad:"Intermedio"},{compositor:"Antonio Vivaldi",obra:"Concierto en Sol menor RV 315",dificultad:"Avanzado"},{compositor:"Frédéric Chopin",obra:"Nocturno en Mi bemol Mayor",dificultad:"Intermedio"},{compositor:"Frédéric Chopin",obra:"Balada No. 1 en Sol menor",dificultad:"Muy Avanzado"},{compositor:"Niccolo Paganini",obra:"Capricho No. 24",dificultad:"Muy Avanzado"},{compositor:"Johannes Brahms",obra:"Sonata para Violín No. 1",dificultad:"Avanzado"},{compositor:"Pyotr Ilyich Tchaikovsky",obra:"Concierto para Violín en Re Mayor",dificultad:"Muy Avanzado"},{compositor:"Felix Mendelssohn",obra:"Concierto para Violín en Mi menor",dificultad:"Avanzado"}])}},oe=()=>{try{U.current=new(window.AudioContext||window.webkitAudioContext)}catch(M){console.warn("Web Audio API no disponible:",M)}},ie=()=>{if(!U.current)return;const M=U.current.createOscillator(),W=U.current.createGain();M.connect(W),W.connect(U.current.destination),M.frequency.setValueAtTime(800,U.current.currentTime),W.gain.setValueAtTime(.1,U.current.currentTime),W.gain.exponentialRampToValueAtTime(.01,U.current.currentTime+.1),M.start(U.current.currentTime),M.stop(U.current.currentTime+.1)},Et=()=>{R.current&&clearInterval(R.current),R.current=setInterval(()=>{try{o(M=>{const W=M+1;return W%60===0&&console.log(`⏱️ Timer: ${Math.floor(W/60)} minutos transcurridos`),W})}catch(M){console.error("Error en timer:",M)}},1e3),console.log("▶️ Timer iniciado")},Vt=()=>{R.current&&(clearInterval(R.current),R.current=null,console.log("⏹️ Timer detenido"))},br=()=>{c?En():Ps()},Ps=async()=>{if(!U.current){Z.error("Audio no disponible en este navegador");return}if(U.current.state!=="running")try{await U.current.resume(),console.log("🔊 Contexto de audio reanudado")}catch(W){console.error("Error al reanudar contexto de audio:",W)}const M=6e4/l;if(d(!0),ie(),B.current=setInterval(()=>{try{ie()}catch(W){console.error("Error en click del metrónomo:",W)}},M),console.log(`🎵 Metrónomo iniciado a ${l} BPM (intervalo: ${M}ms)`),e&&!e.metronomomUsado)try{await Oe.actualizarSesion(e._id,{metronomomUsado:!0,bpmInicial:l,bpmFinal:l}),t(W=>({...W,metronomomUsado:!0,bpmInicial:l,bpmFinal:l})),D.current=l}catch(W){console.error("Error al marcar metrónomo como usado:",W)}},En=()=>{B.current&&(clearInterval(B.current),B.current=null,console.log("🔇 Metrónomo detenido")),d(!1)},vo=async M=>{if(e&&M!==D.current&&c)try{await Oe.actualizarSesion(e._id,{bpm:M,tiempoEstudioEnSegundos:a}),D.current=M}catch(W){console.error("Error al registrar cambio de BPM:",W)}},bo=M=>{$.current&&clearTimeout($.current),e&&c&&($.current=setTimeout(()=>{vo(M)},5e3))},Hr=M=>{const W=Math.max(40,Math.min(300,l+M));i(W),c&&(En(),setTimeout(()=>{i(W),Ps()},100),bo(W))},_s=async()=>{if(!u||!x){Z.error("Debes seleccionar compositor y obra");return}try{const M=await Oe.crearSesion({compositor:u,obra:x,movimientoPieza:v,compasesEstudiados:N});M.success&&(t(M.sesion),o(0),s("corriendo"),Et(),Z.success("Sesión de estudio iniciada"),setTimeout(()=>{Z("📱 La sesión continuará aunque se bloquee la pantalla",{duration:4e3,position:"top-center",style:{background:"#3B82F6",color:"white"}})},2e3))}catch(M){console.error("Error al iniciar sesión:",M),Z.error("Error al iniciar la sesión")}},jo=async()=>{try{Vt(),s("pausado"),K.current=new Date,e&&await Oe.actualizarSesion(e._id,{estado:"pausada",movimientoPieza:v,compasesEstudiados:N,comentarios:h}),Z.success("Sesión pausada")}catch(M){console.error("Error al pausar sesión:",M),Z.error("Error al pausar la sesión")}},Ls=async()=>{try{s("corriendo"),Et(),K.current=null,e&&await Oe.actualizarSesion(e._id,{estado:"activa"}),Z.success("Sesión reanudada")}catch(M){console.error("Error al reanudar sesión:",M),Z.error("Error al reanudar la sesión")}},Pt=async()=>{if(e)try{if(Vt(),En(),$.current&&clearTimeout($.current),(await Oe.finalizarSesion(e._id,{tiempoTotalSegundos:a,comentarios:h,bpmFinal:l})).success){const W={...e,tiempoTotalSegundos:a,comentarios:h,bpmFinal:l,compositor:u,obra:x,movimientoPieza:v,compasesEstudiados:N};T(W),Q(!0)}}catch(M){console.error("Error al finalizar sesión:",M),Z.error("Error al finalizar la sesión")}},[Rs,Pn]=f.useState(!1),zs=async(M,W="")=>{if(!Rs){Pn(!0);try{(await Oe.compartirSesionConProfesor(e._id,M,W)).success&&(M?Z.success("✅ Sesión compartida con tu profesor"):Z("🔒 Sesión marcada como privada",{icon:"🔒",style:{background:"#6B7280",color:"white"}}),setTimeout(()=>{Ts()},1e3))}catch(Ye){console.error("Error al compartir sesión:",Ye),Z.error("Error al procesar tu decisión"),Pn(!1)}}},vt=()=>{Rs?(Q(!1),T(null)):zs(!1)},Ts=()=>{t(null),s("detenido"),o(0),m(""),w(""),b(""),p(""),g(""),P(""),E(""),i(120),K.current=null,T(null),Q(!1),Pn(!1),Z.success("Sesión finalizada exitosamente")},Fs=M=>{const W=Math.floor(M/3600),Ye=Math.floor(M%3600/60),Wt=M%60;return W>0?`${W.toString().padStart(2,"0")}:${Ye.toString().padStart(2,"0")}:${Wt.toString().padStart(2,"0")}`:`${Ye.toString().padStart(2,"0")}:${Wt.toString().padStart(2,"0")}`};return n.jsxs("div",{className:"container mx-auto px-4 py-6",children:[n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-8",children:"Sesión de Estudio"}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Configuración"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Compositor"}),n.jsxs("select",{value:u,onChange:M=>{m(M.target.value),M.target.value!=="nuevo"&&P("")},disabled:e,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100",children:[n.jsx("option",{value:"",children:"Seleccionar compositor..."}),S.map((M,W)=>n.jsx("option",{value:M,children:M},W)),n.jsx("option",{value:"nuevo",children:"+ Agregar nuevo compositor"})]}),u==="nuevo"&&n.jsx("input",{type:"text",value:C,placeholder:"Nombre del compositor",className:"w-full border border-gray-300 rounded-md px-3 py-2 mt-2 focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:M=>P(M.target.value),onBlur:()=>{C.trim()&&(m(C.trim()),P(""))},onKeyPress:M=>{M.key==="Enter"&&C.trim()&&(m(C.trim()),P(""))}})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Obra"}),n.jsxs("select",{value:x,onChange:M=>{w(M.target.value),M.target.value!=="nueva"&&E("")},disabled:e||!u,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100",children:[n.jsx("option",{value:"",children:"Seleccionar obra..."}),z.map((M,W)=>n.jsx("option",{value:M,children:M},W)),n.jsx("option",{value:"nueva",children:"+ Agregar nueva obra"})]}),x==="nueva"&&n.jsx("input",{type:"text",value:y,placeholder:"Nombre de la obra",className:"w-full border border-gray-300 rounded-md px-3 py-2 mt-2 focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:M=>E(M.target.value),onBlur:()=>{y.trim()&&(w(y.trim()),E(""))},onKeyPress:M=>{M.key==="Enter"&&y.trim()&&(w(y.trim()),E(""))}})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Movimiento/Pieza"}),n.jsx("input",{type:"text",value:v,onChange:M=>b(M.target.value),placeholder:"Ej: I. Allegro, Pieza No. 1",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Compases Estudiados"}),n.jsx("input",{type:"text",value:N,onChange:M=>p(M.target.value),placeholder:"Ej: 1-16, 25-32",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comentarios"}),n.jsx("textarea",{value:h,onChange:M=>g(M.target.value),placeholder:"Notas sobre la sesión, dificultades, logros...",rows:3,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Timer y Controles"}),n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"text-6xl font-mono font-bold text-blue-600 mb-2",children:Fs(a)}),n.jsxs("div",{className:"text-sm text-gray-500",children:[r==="corriendo"&&"Estudiando...",r==="pausado"&&"En pausa",r==="detenido"&&"Listo para comenzar"]})]}),n.jsx("div",{className:"flex justify-center space-x-4 mb-6",children:e?n.jsxs(n.Fragment,{children:[r==="corriendo"?n.jsxs("button",{onClick:jo,className:"bg-yellow-500 hover:bg-yellow-600 text-white px-6 py-3 rounded-lg flex items-center space-x-2 transition-colors",children:[n.jsx(ap,{size:20}),n.jsx("span",{children:"Pausar"})]}):n.jsxs("button",{onClick:Ls,className:"bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg flex items-center space-x-2 transition-colors",children:[n.jsx(si,{size:20}),n.jsx("span",{children:"Reanudar"})]}),n.jsxs("button",{onClick:Pt,className:"bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg flex items-center space-x-2 transition-colors",children:[n.jsx(fb,{size:20}),n.jsx("span",{children:"Finalizar"})]})]}):n.jsxs("button",{onClick:_s,disabled:!u||!x,className:"bg-green-500 hover:bg-green-600 disabled:bg-gray-300 text-white px-6 py-3 rounded-lg flex items-center space-x-2 transition-colors",children:[n.jsx(si,{size:20}),n.jsx("span",{children:"Iniciar Sesión"})]})}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Metrónomo"}),n.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-4",children:[n.jsx("button",{onClick:()=>Hr(-10),className:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-3 py-2 rounded transition-colors",children:"-10"}),n.jsx("button",{onClick:()=>Hr(-1),className:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-3 py-2 rounded transition-colors",children:"-1"}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-gray-800",children:l}),n.jsx("div",{className:"text-sm text-gray-500",children:"BPM"})]}),n.jsx("button",{onClick:()=>Hr(1),className:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-3 py-2 rounded transition-colors",children:"+1"}),n.jsx("button",{onClick:()=>Hr(10),className:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-3 py-2 rounded transition-colors",children:"+10"})]}),n.jsx("div",{className:"flex justify-center",children:n.jsxs("button",{onClick:br,className:`px-6 py-3 rounded-lg flex items-center space-x-2 transition-colors ${c?"bg-red-500 hover:bg-red-600 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:[c?n.jsx(vb,{size:20}):n.jsx(gb,{size:20}),n.jsxs("span",{children:[c?"Detener":"Iniciar"," Metrónomo"]})]})})]})]})]}),e&&n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-3",children:"Sesión Actual"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-blue-700",children:"Obra:"}),n.jsxs("div",{className:"text-blue-600",children:[e.compositor," - ",e.obra]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-blue-700",children:r==="pausado"?"Pausada:":"Iniciada:"}),n.jsx("div",{className:"text-blue-600",children:r==="pausado"&&K.current?K.current.toLocaleString():new Date(e.fechaInicio).toLocaleString()})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-blue-700",children:c?"BPM Actual:":"Metrónomo:"}),n.jsx("div",{className:"text-blue-600",children:c?`${l} BPM`:e.metronomomUsado?`${e.bpmFinal||e.bpmInicial} BPM (detenido)`:"Sin usar"})]})]})]})]}),n.jsx(Tb,{isOpen:A,onClose:vt,onCompartir:zs,datosResumen:J})]})},Mb=({sesion:e,isOpen:t,onClose:r,onSave:s})=>{const[a,o]=f.useState({compositor:"",obra:"",movimientoPieza:"",compasesEstudiados:"",comentarios:""}),[l,i]=f.useState(!1);f.useEffect(()=>{e&&t&&o({compositor:e.compositor||"",obra:e.obra||"",movimientoPieza:e.movimientoPieza||"",compasesEstudiados:e.compasesEstudiados||"",comentarios:e.comentarios||""})},[e,t]);const c=u=>{const{name:m,value:x}=u.target;o(w=>({...w,[m]:x}))},d=async u=>{u.preventDefault(),i(!0);try{const m=await Oe.editarSesion(e._id,a);m.success?(Z.success("Sesión actualizada exitosamente"),s(m.sesion),r()):Z.error(m.message||"Error al actualizar la sesión")}catch(m){console.error("Error al guardar sesión:",m),Z.error("Error al actualizar la sesión")}finally{i(!1)}};return t?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Editar Sesión"}),n.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(yo,{size:24})})]}),n.jsxs("form",{onSubmit:d,className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Compositor"}),n.jsx("input",{type:"text",name:"compositor",value:a.compositor,onChange:c,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Obra"}),n.jsx("input",{type:"text",name:"obra",value:a.obra,onChange:c,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Movimiento/Pieza"}),n.jsx("input",{type:"text",name:"movimientoPieza",value:a.movimientoPieza,onChange:c,placeholder:"Ej: I. Allegro, Pieza No. 1",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Compases Estudiados"}),n.jsx("input",{type:"text",name:"compasesEstudiados",value:a.compasesEstudiados,onChange:c,placeholder:"Ej: 1-16, 25-32",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comentarios"}),n.jsx("textarea",{name:"comentarios",value:a.comentarios,onChange:c,rows:3,placeholder:"Notas sobre la sesión, dificultades, logros...",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[n.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 hover:bg-gray-300 rounded-md transition-colors",children:"Cancelar"}),n.jsxs("button",{type:"submit",disabled:l,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 rounded-md transition-colors flex items-center space-x-2",children:[n.jsx(lb,{size:16}),n.jsx("span",{children:l?"Guardando...":"Guardar Cambios"})]})]})]})]})}):null},Ab=()=>{const[e,t]=f.useState([]),[r,s]=f.useState(null),[a,o]=f.useState(!0),[l,i]=f.useState({compositor:"",obra:"",fechaDesde:"",fechaHasta:"",periodoSemanal:"",page:1,limit:10}),[c,d]=f.useState({}),[u,m]=f.useState(!1),[x,w]=f.useState(null),[v,b]=f.useState(!1);f.useEffect(()=>{N()},[l]);const N=async()=>{try{o(!0);const j=await Oe.obtenerHistorial(l);j.success&&(t(j.sesiones),d(j.paginacion));const z=await Oe.obtenerEstadisticas(l.fechaDesde,l.fechaHasta,l.compositor,l.obra);z.success&&s(z)}catch(j){console.error("Error al cargar datos:",j),Z.error("Error al cargar el historial")}finally{o(!1)}},p=()=>{i(j=>({...j,page:1})),m(!1)},h=()=>{i({compositor:"",obra:"",fechaDesde:"",fechaHasta:"",periodoSemanal:"",page:1,limit:10})},g=j=>{const z=new Date;if(j==="inicio")return{fechaDesde:"",fechaHasta:""};const V=parseInt(j),A=new Date(z);A.setDate(z.getDate()-V+1),A.setHours(0,0,0,0);const Q=new Date(z);return Q.setHours(23,59,59,999),{fechaDesde:A.toISOString().split("T")[0],fechaHasta:Q.toISOString().split("T")[0]}},C=j=>{if(j){const{fechaDesde:z,fechaHasta:V}=g(j);i(A=>({...A,periodoSemanal:j,fechaDesde:z,fechaHasta:V,page:1}))}else i(z=>({...z,periodoSemanal:"",fechaDesde:"",fechaHasta:"",page:1}))},P=j=>{i(z=>({...z,page:j}))},y=j=>{if(!j||isNaN(j)||j<0)return"00:00:00";const z=Math.floor(Number(j)),V=Math.floor(z/3600),A=Math.floor(z%3600/60),Q=z%60;return`${V.toString().padStart(2,"0")}:${A.toString().padStart(2,"0")}:${Q.toString().padStart(2,"0")}`},E=j=>{w(j),b(!0)},L=async j=>{if(window.confirm("¿Estás seguro de que quieres eliminar esta sesión? Esta acción no se puede deshacer."))try{(await Oe.eliminarSesion(j)).success&&(Z.success("Sesión eliminada correctamente"),t(V=>V.filter(A=>A._id!==j)),N())}catch(z){console.error("Error al eliminar sesión:",z),Z.error("Error al eliminar la sesión")}},k=j=>{t(z=>z.map(V=>V._id===j._id?j:V)),N()},S=()=>{w(null),b(!1)};return a&&e.length===0?n.jsx("div",{className:"container mx-auto px-4 py-6",children:n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})})}):n.jsx("div",{className:"container mx-auto px-4 py-6",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 mb-6",children:"Mi Historial de Sesiones"}),r&&n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-600",children:"Total de Sesiones"}),n.jsx("p",{className:"text-lg md:text-2xl font-bold text-gray-900",children:r.resumen.totalSesiones})]}),n.jsx("div",{className:"p-2 md:p-3 bg-blue-100 rounded-full",children:n.jsx(ep,{className:"w-4 h-4 md:w-6 md:h-6 text-blue-600"})})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-600",children:"Tiempo Total"}),n.jsxs("p",{className:"text-lg md:text-2xl font-bold text-gray-900",children:[r.resumen.tiempoTotalHoras,"h"]})]}),n.jsx("div",{className:"p-2 md:p-3 bg-green-100 rounded-full",children:n.jsx(ic,{className:"w-4 h-4 md:w-6 md:h-6 text-green-600"})})]})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-2 md:items-center mb-6",children:[n.jsx("div",{className:"flex-1 md:flex-none",children:n.jsxs("select",{value:l.periodoSemanal,onChange:j=>C(j.target.value),className:"w-full md:w-auto border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[n.jsx("option",{value:"",children:"Seleccionar período..."}),n.jsx("option",{value:"7",children:"Últimos 7 días"}),n.jsx("option",{value:"15",children:"Últimos 15 días"}),n.jsx("option",{value:"30",children:"Últimos 30 días"}),n.jsx("option",{value:"60",children:"Últimos 60 días"}),n.jsx("option",{value:"inicio",children:"Desde el inicio"})]})}),n.jsxs("div",{className:"flex gap-2",children:[(l.periodoSemanal||l.compositor||l.obra||l.fechaDesde||l.fechaHasta)&&n.jsx("button",{onClick:h,className:"bg-gray-500 hover:bg-gray-600 text-white px-3 py-2 rounded-md text-sm transition-colors",children:"Limpiar"}),n.jsxs("button",{onClick:()=>m(!u),className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded-md flex items-center space-x-1 transition-colors text-sm",children:[n.jsx(sp,{size:16}),n.jsx("span",{children:"Más Filtros"})]})]})]}),u&&n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Filtros Adicionales"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Compositor"}),n.jsx("input",{type:"text",value:l.compositor,onChange:j=>i(z=>({...z,compositor:j.target.value})),placeholder:"Buscar compositor...",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Obra"}),n.jsx("input",{type:"text",value:l.obra,onChange:j=>i(z=>({...z,obra:j.target.value})),placeholder:"Buscar obra...",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha Desde"}),n.jsx("input",{type:"date",value:l.fechaDesde,onChange:j=>i(z=>({...z,fechaDesde:j.target.value,periodoSemanal:""})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha Hasta"}),n.jsx("input",{type:"date",value:l.fechaHasta,onChange:j=>i(z=>({...z,fechaHasta:j.target.value,periodoSemanal:""})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),n.jsxs("div",{className:"flex space-x-4 mt-4",children:[n.jsxs("button",{onClick:p,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[n.jsx(dc,{size:16}),n.jsx("span",{children:"Aplicar Filtros"})]}),n.jsx("button",{onClick:()=>{h(),m(!1)},className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:"Limpiar"})]})]}),r&&r.estadisticas.length>0&&n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Estadísticas por Obra"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.estadisticas.map((j,z)=>n.jsx("div",{className:"bg-green-100 border border-green-200 rounded-lg shadow-sm h-full flex flex-col min-h-[180px] transition-all duration-300 ease-in-out hover:shadow-md",children:n.jsxs("div",{className:"p-4 text-left flex-1 flex flex-col",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("h5",{className:"text-lg font-bold tracking-tight text-gray-900 break-words mb-1",children:j.compositor}),n.jsx("h6",{className:"text-base font-semibold text-gray-700 break-words",children:j.obra})]}),(j.movimientoPieza||j.compasesEstudiados)&&n.jsxs("div",{className:"flex-1 text-sm text-gray-600 mb-3",children:[j.movimientoPieza&&n.jsx("div",{className:"text-center",children:n.jsx("span",{className:"text-xs font-medium text-gray-500",children:j.movimientoPieza})}),j.compasesEstudiados&&n.jsxs("div",{className:"flex justify-between mt-1",children:[n.jsx("span",{className:"font-medium",children:"Compases:"}),n.jsx("span",{className:"text-right text-xs",children:j.compasesEstudiados})]})]}),n.jsx("div",{className:"mt-auto pt-3 border-t border-green-200",children:n.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-bold text-gray-900 text-lg",children:j.totalSesiones}),n.jsx("div",{className:"text-xs text-gray-600",children:"Sesiones"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"font-bold text-gray-900 text-lg",children:j.tiempoTotalMinutos}),n.jsx("div",{className:"text-xs text-gray-600",children:"Min"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"font-bold text-gray-900 text-sm",children:new Date(j.ultimaSesion).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit"})}),n.jsx("div",{className:"text-xs text-gray-600",children:"Última"})]})]})})]})},z))})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[n.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Sesiones Recientes"})}),e.length===0?n.jsxs("div",{className:"p-8 text-center bg-gray-50",children:[n.jsx(cc,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500",children:"No se encontraron sesiones de estudio"})]}):n.jsx("div",{className:"p-4 grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:e.map(j=>n.jsx("div",{className:"bg-indigo-100 border border-indigo-200 rounded-lg shadow-sm h-full flex flex-col min-h-[200px] transition-all duration-300 ease-in-out hover:shadow-md",children:n.jsxs("div",{className:"p-4 text-left flex-1 flex flex-col",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("h5",{className:"text-lg font-bold tracking-tight text-gray-900 break-words mb-1",children:j.compositor}),n.jsx("h6",{className:"text-base font-semibold text-gray-700 break-words",children:j.obra})]}),n.jsxs("div",{className:"flex-1 space-y-2 text-sm text-gray-600",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-medium",children:"Tiempo:"}),n.jsx("span",{children:y(j.tiempoTotalSegundos)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-medium",children:"Fecha:"}),n.jsx("span",{children:new Date(j.fechaInicio).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-medium",children:"BPM:"}),n.jsx("span",{children:j.bpmInicial===0&&j.bpmFinal===0||j.bpmInicial===120&&j.bpmFinal===120&&!j.metronomomUsado?n.jsx("span",{className:"text-gray-500",children:"Sin metrónomo"}):j.bpmInicial===j.bpmFinal?`${j.bpmFinal}`:`${j.bpmInicial} → ${j.bpmFinal}`})]}),(j.movimientoPieza||j.compasesEstudiados)&&n.jsxs("div",{className:"pt-2 border-t border-indigo-200",children:[j.movimientoPieza&&n.jsx("div",{className:"text-center",children:n.jsx("span",{className:"text-xs font-medium text-gray-500",children:j.movimientoPieza})}),j.compasesEstudiados&&n.jsxs("div",{className:"flex justify-between mt-1",children:[n.jsx("span",{className:"font-medium",children:"Compases:"}),n.jsx("span",{className:"text-right text-xs",children:j.compasesEstudiados})]})]}),j.comentarios&&n.jsxs("div",{className:"pt-2 border-t border-indigo-200",children:[n.jsx("span",{className:"font-medium block mb-1",children:"Comentarios:"}),n.jsx("p",{className:"text-xs text-gray-500 bg-indigo-50 p-2 rounded",children:j.comentarios})]})]}),n.jsxs("div",{className:"mt-4 pt-3 border-t border-indigo-200 flex justify-between items-center",children:[j.compartidaConProfesor&&n.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Compartida"}),n.jsx("div",{className:"flex-1"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>E(j),className:"p-2 text-indigo-600 hover:text-indigo-800 hover:bg-indigo-200 rounded-full transition-colors",title:"Editar sesión",disabled:j.estado==="activa",children:n.jsx(rb,{size:16})}),n.jsx("button",{onClick:()=>L(j._id),className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-200 rounded-full transition-colors",title:"Eliminar sesión",disabled:j.estado==="activa",children:n.jsx(op,{size:16})})]})]})]})},j._id))})]}),n.jsx(Mb,{sesion:x,isOpen:v,onClose:S,onSave:k}),c.totalPaginas>1&&n.jsxs("div",{className:"flex justify-center items-center space-x-4 mt-6",children:[n.jsx("button",{onClick:()=>P(l.page-1),disabled:l.page<=1,className:"px-4 py-2 text-sm text-gray-600 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),n.jsxs("span",{className:"text-sm text-gray-600",children:["Página ",c.paginaActual," de ",c.totalPaginas]}),n.jsx("button",{onClick:()=>P(l.page+1),disabled:l.page>=c.totalPaginas,className:"px-4 py-2 text-sm text-gray-600 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]})]})})},Ob=()=>{const[e,t]=f.useState([]),[r,s]=f.useState(!0),[a,o]=f.useState({compositor:"",obra:"",fechaDesde:"",fechaHasta:"",alumno:"",page:1,limit:10}),[l,i]=f.useState({}),[c,d]=f.useState(!1),[u,m]=f.useState({}),[x,w]=f.useState({});f.useEffect(()=>{v()},[a]);const v=async()=>{try{s(!0);const y=await Oe.obtenerSesionesCompartidas(a);y.success&&(t(y.sesiones),i(y.paginacion))}catch(y){console.error("Error al cargar sesiones compartidas:",y),Z.error("Error al cargar las sesiones compartidas")}finally{s(!1)}},b=()=>{o(y=>({...y,page:1})),d(!1)},N=()=>{o({compositor:"",obra:"",fechaDesde:"",fechaHasta:"",alumno:"",page:1,limit:10})},p=y=>{o(E=>({...E,page:y}))},h=y=>{w(E=>({...E,[y]:!E[y]}))},g=async y=>{const E=u[y];if(!E||E.trim()===""){Z.error("Por favor ingresa un comentario");return}try{const L=await Oe.agregarComentarioProfesor(y,E);L.success&&(Z.success("Comentario agregado correctamente"),t(k=>k.map(S=>S._id===y?{...S,comentariosProfesor:L.sesion.comentariosProfesor}:S)),m(k=>({...k,[y]:""})))}catch(L){console.error("Error al agregar comentario:",L),Z.error("Error al agregar el comentario")}},C=y=>{if(!y||isNaN(y)||y<0)return"00:00:00";const E=Math.floor(Number(y)),L=Math.floor(E/3600),k=Math.floor(E%3600/60),S=E%60;return`${L.toString().padStart(2,"0")}:${k.toString().padStart(2,"0")}:${S.toString().padStart(2,"0")}`},P=y=>new Date(y).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return r&&e.length===0?n.jsx("div",{className:"container mx-auto px-4 py-6",children:n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})})}):n.jsx("div",{className:"container mx-auto px-4 py-6",children:n.jsxs("div",{className:"max-w-6xl mx-auto",children:[n.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 mb-6",children:"Sesiones Compartidas por Alumnos"}),n.jsx("div",{className:"flex flex-col md:flex-row gap-2 md:items-center mb-6",children:n.jsxs("div",{className:"flex gap-2",children:[(a.compositor||a.obra||a.fechaDesde||a.fechaHasta||a.alumno)&&n.jsx("button",{onClick:N,className:"bg-gray-500 hover:bg-gray-600 text-white px-3 py-2 rounded-md text-sm transition-colors",children:"Limpiar"}),n.jsxs("button",{onClick:()=>d(!c),className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded-md flex items-center space-x-1 transition-colors text-sm",children:[n.jsx(sp,{size:16}),n.jsx("span",{children:"Filtros"})]})]})}),c&&n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Filtros"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alumno"}),n.jsx("input",{type:"text",value:a.alumno,onChange:y=>o(E=>({...E,alumno:y.target.value})),placeholder:"Buscar alumno...",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Compositor"}),n.jsx("input",{type:"text",value:a.compositor,onChange:y=>o(E=>({...E,compositor:y.target.value})),placeholder:"Buscar compositor...",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Obra"}),n.jsx("input",{type:"text",value:a.obra,onChange:y=>o(E=>({...E,obra:y.target.value})),placeholder:"Buscar obra...",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha Desde"}),n.jsx("input",{type:"date",value:a.fechaDesde,onChange:y=>o(E=>({...E,fechaDesde:y.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha Hasta"}),n.jsx("input",{type:"date",value:a.fechaHasta,onChange:y=>o(E=>({...E,fechaHasta:y.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),n.jsxs("div",{className:"flex space-x-4 mt-4",children:[n.jsxs("button",{onClick:b,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[n.jsx(dc,{size:16}),n.jsx("span",{children:"Aplicar Filtros"})]}),n.jsx("button",{onClick:()=>{N(),d(!1)},className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:"Limpiar"})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[n.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:n.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Sesiones Compartidas (",l.total||0,")"]})}),e.length===0?n.jsxs("div",{className:"p-8 text-center bg-gray-50",children:[n.jsx(cc,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500",children:"No hay sesiones compartidas"})]}):n.jsx("div",{className:"divide-y divide-gray-200",children:e.map(y=>{var E;return n.jsx("div",{className:"p-6 hover:bg-gray-100 bg-gray-50/70 transition-colors border-l-2 border-gray-300",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(lp,{className:"w-4 h-4 text-blue-500"}),n.jsxs("span",{className:"font-semibold text-blue-700",children:[y.usuario.nombre," ",y.usuario.apellido]}),n.jsxs("span",{className:"text-sm text-gray-500",children:["(",y.usuario.email,")"]})]}),n.jsx("button",{onClick:()=>h(y._id),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:x[y._id]?n.jsx(rp,{size:16}):n.jsx(np,{size:16})})]}),n.jsx("div",{children:n.jsxs("h4",{className:"font-semibold text-gray-900 text-base md:text-lg",children:[y.compositor," - ",y.obra]})}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Tiempo:"}),n.jsx("span",{className:"ml-2",children:C(y.tiempoTotalSegundos)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Fecha:"}),n.jsx("span",{className:"ml-2",children:new Date(y.fechaInicio).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Compartida:"}),n.jsx("span",{className:"ml-2",children:P(y.fechaCompartida)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"BPM:"}),n.jsx("span",{className:"ml-2",children:y.bpmInicial===y.bpmFinal?`${y.bpmFinal}`:`${y.bpmInicial} → ${y.bpmFinal}`})]})]}),y.comentarioAlumno&&n.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3 rounded-r-md",children:n.jsxs("div",{className:"flex items-start space-x-2 text-left",children:[n.jsx(ur,{className:"w-4 h-4 text-blue-500 mt-1 flex-shrink-0"}),n.jsxs("div",{className:"text-left w-full",children:[n.jsx("p",{className:"text-sm font-medium text-blue-800 text-left",children:"Comentario del alumno:"}),n.jsx("p",{className:"text-sm text-blue-700 mt-1 text-left leading-relaxed",children:y.comentarioAlumno})]})]})}),x[y._id]&&n.jsxs("div",{className:"mt-4 space-y-3 bg-gray-50 p-4 rounded-md",children:[(y.movimientoPieza||y.compasesEstudiados)&&n.jsxs("div",{className:"text-sm text-gray-600",children:[y.movimientoPieza&&n.jsx("div",{className:"text-center mb-2",children:n.jsx("span",{className:"text-xs font-medium text-gray-500",children:y.movimientoPieza})}),y.compasesEstudiados&&n.jsxs("span",{children:[n.jsx("strong",{children:"Compases:"})," ",y.compasesEstudiados]})]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[n.jsx("span",{className:"font-medium",children:"Historial de BPM:"}),n.jsx("div",{className:"ml-2 mt-1",children:y.cambiosMetronomo&&y.cambiosMetronomo.length>0?n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"text-xs",children:[y.bpmInicial," BPM",n.jsxs("span",{className:"text-gray-400 ml-1",children:["(desde 00:00:00 hasta ",C(((E=y.cambiosMetronomo[0])==null?void 0:E.tiempoEstudioEnSegundos)||0),")"]})]}),y.cambiosMetronomo.map((L,k)=>{const S=L.tiempoEstudioEnSegundos||0,j=y.cambiosMetronomo[k+1],z=j?j.tiempoEstudioEnSegundos:y.tiempoTotalSegundos;return n.jsxs("div",{className:"text-xs",children:[L.bpm," BPM",n.jsxs("span",{className:"text-gray-400 ml-1",children:["(desde ",C(S)," hasta ",C(z),")"]})]},k)})]}):n.jsx("div",{className:"text-xs",children:y.bpmInicial===0&&y.bpmFinal===0||y.bpmInicial===120&&y.bpmFinal===120&&!y.metronomomUsado?n.jsx("span",{className:"text-gray-500",children:"Sin metrónomo"}):y.bpmInicial===y.bpmFinal?`${y.bpmFinal} BPM (toda la sesión)`:`${y.bpmInicial} → ${y.bpmFinal} BPM`})})]}),y.comentarios&&n.jsxs("div",{className:"text-sm text-gray-600 bg-gray-100 p-3 rounded-md",children:[n.jsx("span",{className:"font-medium",children:"Comentarios de la sesión:"}),n.jsx("div",{className:"mt-1",children:y.comentarios})]})]}),y.comentariosProfesor&&n.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-3 rounded-r-md",children:n.jsxs("div",{className:"flex items-start space-x-2 text-left",children:[n.jsx(ur,{className:"w-4 h-4 text-green-500 mt-1 flex-shrink-0"}),n.jsxs("div",{className:"text-left w-full",children:[n.jsx("p",{className:"text-sm font-medium text-green-800 text-left",children:"Tu comentario:"}),n.jsx("p",{className:"text-sm text-green-700 mt-1 text-left whitespace-pre-wrap leading-relaxed",children:y.comentariosProfesor})]})]})}),n.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Agregar comentario como profesor:"}),n.jsxs("form",{onSubmit:L=>{L.preventDefault(),g(y._id)},className:"flex space-x-2",children:[n.jsx("textarea",{value:u[y._id]||"",onChange:L=>m(k=>({...k,[y._id]:L.target.value})),placeholder:"Escribe tu comentario para el alumno...",className:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none text-left bg-white",rows:"2"}),n.jsxs("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md transition-colors flex items-center space-x-1",children:[n.jsx(ur,{size:16}),n.jsx("span",{children:"Enviar"})]})]})]})]})},y._id)})})]}),l.totalPaginas>1&&n.jsxs("div",{className:"flex justify-center items-center space-x-4 mt-6",children:[n.jsx("button",{onClick:()=>p(a.page-1),disabled:a.page<=1,className:"px-4 py-2 text-sm text-gray-600 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),n.jsxs("span",{className:"text-sm text-gray-600",children:["Página ",l.paginaActual," de ",l.totalPaginas]}),n.jsx("button",{onClick:()=>p(a.page+1),disabled:a.page>=l.totalPaginas,className:"px-4 py-2 text-sm text-gray-600 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]})]})})},$b=()=>{const[e,t]=f.useState([]),[r,s]=f.useState(!0),[a,o]=f.useState({});f.useEffect(()=>{l()},[]);const l=async()=>{try{s(!0);const u=await Oe.obtenerHistorial({page:1,limit:50});if(u.success){const m=u.sesiones.filter(x=>x.comentariosProfesor&&x.comentariosProfesor.trim()!=="");t(m)}}catch(u){console.error("Error al cargar sesiones con comentarios:",u),Z.error("Error al cargar los comentarios del profesor")}finally{s(!1)}},i=u=>{o(m=>({...m,[u]:!m[u]}))},c=u=>{if(!u||isNaN(u)||u<0)return"00:00";const m=Math.floor(Number(u)),x=Math.floor(m/3600),w=Math.floor(m%3600/60),v=m%60;return x>0?`${x.toString().padStart(2,"0")}:${w.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}`:`${w.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}`},d=u=>new Date(u).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return r?n.jsx("div",{className:"container mx-auto px-4 py-6",children:n.jsx("div",{className:"flex justify-center items-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})})}):n.jsx("div",{className:"container mx-auto px-4 py-6",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 mb-6",children:"Comentarios del Profesor"}),e.length===0?n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[n.jsx(ur,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No hay comentarios del profesor"}),n.jsx("p",{className:"text-gray-500",children:"Cuando compartas sesiones de estudio y tu profesor las comente, aparecerán aquí."})]}):n.jsx("div",{className:"space-y-4",children:e.map(u=>{var m;return n.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[u.compositor," - ",u.obra]}),n.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mt-2",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(ep,{className:"w-4 h-4"}),n.jsx("span",{children:new Date(u.fechaInicio).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(ic,{className:"w-4 h-4"}),n.jsx("span",{children:c(u.tiempoTotalSegundos)})]})]})]}),n.jsx("button",{onClick:()=>i(u._id),className:"p-2 text-gray-400 hover:text-gray-600 rounded-md transition-colors",children:a[u._id]?n.jsx(rp,{size:20}):n.jsx(np,{size:20})})]}),n.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 rounded-r-md",children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:n.jsx(ur,{className:"w-4 h-4 text-green-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-sm font-medium text-green-800 mb-2",children:"Comentario del profesor:"}),n.jsx("p",{className:"text-sm text-green-700 leading-relaxed",children:u.comentariosProfesor})]})]})}),u.comentarios&&n.jsx("div",{className:"mt-4 bg-blue-50 border-l-4 border-blue-400 p-4 rounded-r-md",children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:n.jsx(ur,{className:"w-4 h-4 text-blue-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Tu comentario original:"}),n.jsx("p",{className:"text-sm text-blue-700 leading-relaxed",children:u.comentarios})]})]})}),a[u._id]&&n.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Detalles de la sesión:"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"BPM:"}),n.jsx("span",{className:"ml-2",children:u.bpmInicial===u.bpmFinal?`${u.bpmFinal}`:`${u.bpmInicial} → ${u.bpmFinal}`})]}),u.movimientoPieza&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Movimiento:"}),n.jsx("span",{className:"ml-2",children:u.movimientoPieza})]}),u.compasesEstudiados&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Compases:"}),n.jsx("span",{className:"ml-2",children:u.compasesEstudiados})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Compartida:"}),n.jsx("span",{className:"ml-2",children:d(u.fechaCompartida)})]})]}),u.cambiosMetronomo&&u.cambiosMetronomo.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Historial de BPM:"}),n.jsxs("div",{className:"mt-2 space-y-1",children:[n.jsxs("div",{className:"text-xs text-gray-600",children:[u.bpmInicial," BPM",n.jsxs("span",{className:"text-gray-400 ml-1",children:["(desde 00:00 hasta ",c(((m=u.cambiosMetronomo[0])==null?void 0:m.tiempoEstudioEnSegundos)||0),")"]})]}),u.cambiosMetronomo.map((x,w)=>{const v=x.tiempoEstudioEnSegundos||0,b=u.cambiosMetronomo[w+1],N=b?b.tiempoEstudioEnSegundos:u.tiempoTotalSegundos;return n.jsxs("div",{className:"text-xs text-gray-600",children:[x.bpm," BPM",n.jsxs("span",{className:"text-gray-400 ml-1",children:["(desde ",c(v)," hasta ",c(N),")"]})]},w)})]})]})]})]})},u._id)})})]})})},Db=()=>(f.useEffect(()=>{console.log("=== PRUEBA DEL SISTEMA DE LOGGING ==="),console.log("Modo:","production"),console.log("Es desarrollo:",hv),console.log("Debug logs habilitados:","false"),console.log("Logs sensibles habilitados:","false"),I.dev("🔧 Este es un log de desarrollo"),I.info("ℹ️ Este es un log de información"),I.success("✅ Este es un log de éxito"),I.warn("⚠️ Este es un log de advertencia"),I.error("❌ Este es un log de error"),I.sensitive("🔒 Datos sensibles",{usuario:{id:"123",email:"test@example.com"},token:"abc123xyz789",apiResponse:{data:"información privada"}}),I.debug("🔍 Datos de debug",{estado:"testing",variables:{a:1,b:2}});try{throw new Error("Error simulado para prueba")}catch(e){I.error("Error capturado en testing",e)}console.log("=== FIN DE PRUEBA ===")},[]),n.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[n.jsx("h1",{className:"text-2xl font-bold mb-4",children:"🔍 Prueba del Sistema de Logging"}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[n.jsx("h2",{className:"font-semibold text-blue-800 mb-2",children:"Estado del Sistema:"}),n.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Modo:"})," ","production"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Es desarrollo:"})," ","No"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Debug logs:"})," ","false"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Logs sensibles:"})," ","false"]})]})]}),n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[n.jsx("h2",{className:"font-semibold text-yellow-800 mb-2",children:"🧪 Instrucciones de Prueba:"}),n.jsxs("ol",{className:"text-sm text-yellow-700 space-y-2 list-decimal list-inside",children:[n.jsxs("li",{children:["Abre la ",n.jsx("strong",{children:"Consola del Navegador"})," (F12)"]}),n.jsxs("li",{children:["En ",n.jsx("strong",{children:"DESARROLLO"})," deberías ver todos los logs"]}),n.jsxs("li",{children:["Para probar ",n.jsx("strong",{children:"PRODUCCIÓN"}),":"]}),n.jsxs("ul",{className:"ml-6 mt-1 space-y-1 list-disc list-inside",children:[n.jsxs("li",{children:["Ejecuta: ",n.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:"npm run build"})]}),n.jsxs("li",{children:["Luego: ",n.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:"npm run preview"})]}),n.jsx("li",{children:"Los logs sensibles desaparecerán"})]})]})]}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[n.jsx("h2",{className:"font-semibold text-green-800 mb-2",children:"✅ Tipos de Logs Probados:"}),n.jsxs("ul",{className:"text-sm text-green-700 space-y-1 list-disc list-inside",children:[n.jsxs("li",{children:[n.jsx("code",{children:"logger.dev()"})," - Solo desarrollo"]}),n.jsxs("li",{children:[n.jsx("code",{children:"logger.sensitive()"})," - Datos sensibles (solo desarrollo)"]}),n.jsxs("li",{children:[n.jsx("code",{children:"logger.debug()"})," - Información de depuración"]}),n.jsxs("li",{children:[n.jsx("code",{children:"logger.info()"})," - Información general"]}),n.jsxs("li",{children:[n.jsx("code",{children:"logger.error()"})," - Errores (siempre visible)"]})]})]})]})),Zs={async obtenerNotificaciones(e=20,t=!1){try{return(await H.get("/notificaciones",{params:{limite:e,soloNoLeidas:t}})).data}catch(r){throw console.error("Error al obtener notificaciones:",r),r}},async contarNoLeidas(){try{return(await H.get("/notificaciones/no-leidas")).data}catch(e){throw console.error("Error al contar notificaciones no leídas:",e),e}},async marcarComoLeida(e){try{return(await H.put(`/notificaciones/${e}/leida`)).data}catch(t){throw console.error("Error al marcar notificación como leída:",t),t}},async marcarTodasComoLeidas(){try{return(await H.put("/notificaciones/marcar-todas-leidas")).data}catch(e){throw console.error("Error al marcar todas las notificaciones como leídas:",e),e}}},Ib=()=>{const[e,t]=f.useState([]),[r,s]=f.useState(!0),[a,o]=f.useState(!1),[l,i]=f.useState(0),c=lo();f.useEffect(()=>{d(),u();const p=setInterval(u,3e4);return()=>clearInterval(p)},[]);const d=async()=>{try{s(!0);const p=await Zs.obtenerNotificaciones(20);p.success&&t(p.notificaciones)}catch(p){console.error("Error al cargar notificaciones:",p)}finally{s(!1)}},u=async()=>{try{const p=await Zs.contarNoLeidas();p.success&&i(p.count)}catch(p){console.error("Error al contar notificaciones:",p)}},m=async p=>{try{await Zs.marcarComoLeida(p),t(h=>h.map(g=>g._id===p?{...g,leida:!0,fechaLeida:new Date}:g)),u()}catch(h){console.error("Error al marcar como leída:",h),Z.error("Error al marcar notificación como leída")}},x=async()=>{try{await Zs.marcarTodasComoLeidas(),t(p=>p.map(h=>({...h,leida:!0,fechaLeida:new Date}))),i(0),Z.success("Todas las notificaciones marcadas como leídas")}catch(p){console.error("Error al marcar todas como leídas:",p),Z.error("Error al marcar notificaciones como leídas")}},w=async p=>{p.leida||await m(p._id),o(!1),p.tipo==="sesion_compartida"?c("/sesiones-compartidas"):p.tipo==="comentario_profesor"&&c("/mis-comentarios-profesor")},v=p=>{const h=new Date,g=new Date(p),C=h-g,P=Math.floor(C/6e4),y=Math.floor(C/36e5),E=Math.floor(C/864e5);return P<1?"Ahora":P<60?`${P}m`:y<24?`${y}h`:`${E}d`},b=p=>{switch(p){case"sesion_compartida":return n.jsx(cc,{className:"w-4 h-4"});case"comentario_profesor":return n.jsx(ur,{className:"w-4 h-4"});default:return n.jsx(Xo,{className:"w-4 h-4"})}},N=p=>{switch(p){case"sesion_compartida":return"text-blue-500 bg-blue-50";case"comentario_profesor":return"text-green-500 bg-green-50";default:return"text-gray-500 bg-gray-50"}};return n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>o(!a),className:"relative p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors",children:[n.jsx(Xo,{size:20}),l>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:l>9?"9+":l})]}),a&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)}),n.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[n.jsx("h3",{className:"font-semibold text-gray-800",children:"Notificaciones"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[l>0&&n.jsxs("button",{onClick:x,className:"text-xs text-blue-600 hover:text-blue-800 flex items-center space-x-1",children:[n.jsx(Bv,{size:12}),n.jsx("span",{children:"Marcar todas"})]}),n.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx(yo,{size:16})})]})]}),n.jsx("div",{className:"max-h-96 overflow-y-auto",children:r?n.jsx("div",{className:"p-4 text-center",children:n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mx-auto"})}):e.length===0?n.jsxs("div",{className:"p-4 text-center text-gray-500",children:[n.jsx(Xo,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),n.jsx("p",{children:"No tienes notificaciones"})]}):n.jsx("div",{className:"divide-y divide-gray-100",children:e.map(p=>n.jsx("div",{className:`p-4 hover:bg-gray-50 cursor-pointer transition-colors ${p.leida?"":"bg-blue-50"}`,onClick:()=>w(p),children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:`p-2 rounded-full ${N(p.tipo)}`,children:b(p.tipo)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:`text-sm font-medium ${p.leida?"text-gray-700":"text-gray-900"}`,children:p.titulo}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx("span",{className:"text-xs text-gray-500",children:v(p.fechaCreacion)}),!p.leida&&n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:p.mensaje})]})]})},p._id))})}),e.length>0&&n.jsx("div",{className:"p-3 border-t border-gray-200 text-center",children:n.jsx("button",{onClick:()=>{o(!1),c("/sesiones-compartidas")},className:"text-sm text-blue-600 hover:text-blue-800",children:"Ver sesiones compartidas"})})]})]})]})},Ub=()=>{const{usuario:e,logout:t}=Je(),r=()=>{t()};return n.jsx("nav",{className:"bg-slate-700 shadow-lg fixed top-0 left-0 right-0 z-50",children:n.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex justify-between h-16",children:[n.jsx("div",{className:"flex items-center",children:n.jsx(pt,{to:"/dashboard",className:"text-white text-xl font-bold hover:text-slate-300 flex items-center space-x-2",children:n.jsx("span",{children:"Clases de Violoncello"})})}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(Ib,{}),n.jsxs("div",{className:"text-white text-sm",children:[n.jsxs("span",{className:"font-medium",children:[e==null?void 0:e.nombre," ",e==null?void 0:e.apellido]}),n.jsx("span",{className:`ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full ${(e==null?void 0:e.rol)==="administrador"?"bg-violet-200 text-violet-900":"bg-emerald-200 text-emerald-900"}`,children:e==null?void 0:e.rol})]}),n.jsxs("button",{onClick:r,className:"bg-slate-600 hover:bg-slate-800 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 flex items-center space-x-1",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),n.jsx("span",{children:"Cerrar Sesión"})]})]})]})})})},Bb=()=>{const{isAdmin:e}=Je(),t=Ur(),[r,s]=f.useState(!1),a=l=>t.pathname===l,o=e()?[{name:"Gestión de Clases",path:"/clases",icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),allowedFor:"admin"},{name:"Partituras",path:"/partituras",icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-.895 2-2 2s-2-.895-2-2 .895-2 2-2 2 .895 2 2zm12-3c0 1.105-.895 2-2 2s-2-.895-2-2 .895-2 2-2 2 .895 2 2zM9 10l12-3"})}),allowedFor:"admin"},{name:"Gestión de Pagos",path:"/pagos",icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),allowedFor:"admin"},{name:"Admin Partituras",path:"/admin-partituras",icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),allowedFor:"admin"},{name:"Gestión de Estudios",path:"/estudios",icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),allowedFor:"admin"},{name:"Sesiones Compartidas",path:"/sesiones-compartidas",icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})}),allowedFor:"admin"},{name:"Gestión de Usuarios",path:"/usuarios",icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),allowedFor:"admin"},{name:"Cambiar Contraseña",path:"/cambiar-contrasena",icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),allowedFor:"admin"}]:[{name:"Mis Clases",path:"/mis-clases",icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),allowedFor:"user"},{name:"Mis Estudios",path:"/mis-estudios",icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),allowedFor:"user"},{name:"Sesión de Estudio",path:"/sesion-estudio",icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),allowedFor:"user"},{name:"Historial de Sesiones",path:"/historial-sesiones",icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),allowedFor:"user"},{name:"Comentarios del Profesor",path:"/mis-comentarios-profesor",icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),allowedFor:"user"},{name:"Partituras",path:"/partituras",icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-.895 2-2 2s-2-.895-2-2 .895-2 2-2 2 .895 2 2zm12-3c0 1.105-.895 2-2 2s-2-.895-2-2 .895-2 2-2 2 .895 2 2zM9 10l12-3"})}),allowedFor:"user"},{name:"Mis Pagos",path:"/mis-pagos",icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),allowedFor:"user"},{name:"Cambiar Contraseña",path:"/cambiar-contrasena",icon:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),allowedFor:"user"}];return n.jsxs(n.Fragment,{children:[n.jsx("aside",{className:"md:block hidden fixed left-0 top-16 h-full w-64 bg-slate-50 shadow-lg border-r border-slate-200 z-40",children:n.jsxs("div",{className:"flex flex-col h-full",children:[n.jsx("nav",{className:"flex-1 pt-6 pb-4 overflow-y-auto",children:n.jsx("div",{className:"px-3",children:n.jsx("ul",{className:"space-y-1",children:o.map(l=>n.jsx("li",{children:n.jsxs(pt,{to:l.path,className:`group flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors duration-200 ${a(l.path)?"bg-indigo-200 text-indigo-900 border-r-2 border-indigo-600":"text-slate-700 hover:bg-slate-200 hover:text-slate-900"}`,children:[n.jsx("span",{className:"mr-3",children:l.icon}),l.name]})},l.path))})})}),n.jsx("div",{className:"px-3 py-4 border-t border-slate-200",children:n.jsxs("div",{className:"text-xs text-slate-500 text-center",children:[n.jsx("p",{children:"Sistema de Gestión"}),n.jsx("p",{children:"Clases de Violoncello"})]})})]})}),n.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-slate-800 border-t border-slate-600 shadow-lg z-50",children:n.jsxs("div",{className:"flex justify-around items-center py-2",children:[o.slice(0,4).map(l=>{const i=c=>({"Gestión de Clases":"Clases",Partituras:"Part.","Gestión de Pagos":"Pagos","Mis Clases":"Clases","Mis Estudios":"Estudios","Mis Pagos":"Pagos","Cambiar Contraseña":"Pass.","Admin Partituras":"Admin","Gestión de Estudios":"Estudios","Gestión de Usuarios":"Users"})[c]||c;return n.jsxs(pt,{to:l.path,className:`flex flex-col items-center justify-center min-w-0 flex-1 px-1 py-2 text-xs font-medium transition-colors duration-200 ${a(l.path)?"text-white bg-slate-700":"text-slate-300 hover:text-white hover:bg-slate-700"}`,children:[n.jsx("div",{className:`${a(l.path)?"text-white":"text-slate-300"}`,children:l.icon}),n.jsx("span",{className:"mt-1 text-[10px] leading-tight text-center font-semibold",children:i(l.name)})]},l.path)}),o.length>4&&n.jsxs("button",{onClick:()=>s(!0),className:"flex flex-col items-center justify-center min-w-0 flex-1 px-1 py-2 text-xs font-medium text-slate-300 hover:text-white hover:bg-slate-700 transition-colors duration-200",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),n.jsx("span",{className:"mt-1 text-[10px] font-semibold",children:"Más"})]})]})}),r&&n.jsx("div",{className:"md:hidden fixed inset-0 bg-black bg-opacity-50 z-60 flex items-end pb-20",children:n.jsxs("div",{className:"bg-white w-full rounded-t-lg shadow-lg max-h-96 overflow-y-auto mb-2",children:[n.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Menú"}),n.jsx("button",{onClick:()=>s(!1),className:"text-slate-500 hover:text-slate-700",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsx("div",{className:"p-4 pb-6",children:n.jsx("div",{className:"space-y-2",children:o.map(l=>n.jsxs(pt,{to:l.path,onClick:()=>s(!1),className:`flex items-center px-3 py-3 text-sm font-medium rounded-md transition-colors duration-200 ${a(l.path)?"bg-indigo-100 text-indigo-900":"text-slate-700 hover:bg-slate-100 hover:text-slate-900"}`,children:[n.jsx("span",{className:"mr-3",children:l.icon}),l.name]},l.path))})})]})})]})},ze=({children:e,adminOnly:t=!1})=>{const{isAuthenticated:r,isAdmin:s,loading:a}=Je();return a?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx($r,{title:"Verificando autenticación...",subtitle:"Validando permisos de acceso",showRenderMessage:!1,size:"medium"})}):r()?t&&!s()?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Acceso Denegado"}),n.jsx("p",{className:"text-gray-600",children:"No tienes permisos para acceder a esta sección."})]})}):e:n.jsx(Bn,{to:"/login",replace:!0})};function Hb(){const{isAuthenticated:e,isAdmin:t,loading:r}=Je(),s=window.location.pathname.includes("/admin/resumen-clase/")&&window.location.search.includes("newTab=true");return r?n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Cargando..."})]})}):n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e()&&!s&&n.jsxs(n.Fragment,{children:[n.jsx(Ub,{}),n.jsx(Bb,{})]}),n.jsx("div",{className:`${e()&&!s?"md:ml-64 pt-16 md:pt-24 pb-20 md:pb-0":""}`,children:n.jsxs(Tx,{children:["        ",n.jsx(ge,{path:"/admin/resumen-clase/:claseId",element:n.jsx(ze,{adminOnly:!0,children:n.jsx(Sb,{})})}),n.jsx(ge,{path:"/login",element:e()?n.jsx(Bn,{to:t()?"/clases":"/mis-clases",replace:!0}):n.jsx(gv,{})}),n.jsx(ge,{path:"/dashboard",element:n.jsx(ze,{children:n.jsx(yv,{})})}),n.jsx(ge,{path:"/usuarios",element:n.jsx(ze,{adminOnly:!0,children:n.jsx(bv,{})})}),n.jsx(ge,{path:"/cambiar-contrasena",element:n.jsx(ze,{children:n.jsx(jv,{})})}),n.jsx(ge,{path:"/pagos",element:n.jsx(ze,{adminOnly:!0,children:n.jsx(Rv,{})})}),n.jsx(ge,{path:"/clases",element:n.jsx(ze,{adminOnly:!0,children:n.jsx(wb,{})})}),n.jsx(ge,{path:"/partituras",element:n.jsx(ze,{children:n.jsx(Nb,{})})}),n.jsx(ge,{path:"/admin-partituras",element:n.jsx(ze,{adminOnly:!0,children:n.jsx(kb,{})})}),n.jsx(ge,{path:"/estudios",element:n.jsx(ze,{adminOnly:!0,children:n.jsx(zb,{})})}),n.jsx(ge,{path:"/sesiones-compartidas",element:n.jsx(ze,{adminOnly:!0,children:n.jsx(Ob,{})})}),n.jsx(ge,{path:"/mis-estudios",element:n.jsx(ze,{children:n.jsx(Rb,{})})}),n.jsx(ge,{path:"/sesion-estudio",element:n.jsx(ze,{children:n.jsx(Fb,{})})}),n.jsx(ge,{path:"/historial-sesiones",element:n.jsx(ze,{children:n.jsx(Ab,{})})}),n.jsx(ge,{path:"/mis-comentarios-profesor",element:n.jsx(ze,{children:n.jsx($b,{})})}),n.jsx(ge,{path:"/mis-clases",element:n.jsx(ze,{children:n.jsx(Eb,{})})}),n.jsx(ge,{path:"/mis-pagos",element:n.jsx(ze,{children:n.jsx(Lb,{})})}),n.jsx(ge,{path:"/test-logging",element:n.jsx(Db,{})}),n.jsx(ge,{path:"/",element:e()?n.jsx(Bn,{to:t()?"/clases":"/mis-clases",replace:!0}):n.jsx(Bn,{to:"/login",replace:!0})}),n.jsx(ge,{path:"*",element:n.jsx(Bn,{to:"/",replace:!0})})]})})]})}function Vb(){return n.jsx(xv,{children:n.jsxs(Ux,{basename:"/alumnos",future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[n.jsx(Hb,{}),n.jsx(Fg,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{style:{background:"#059669"}},error:{style:{background:"#dc2626"}}}})]})})}cf(document.getElementById("root")).render(n.jsx(f.StrictMode,{children:n.jsx(Vb,{})}));
